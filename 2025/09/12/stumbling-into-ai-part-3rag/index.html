<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Stumbling into AI: Part 3â€”RAG</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2025/09/12/stumbling-into-ai-part-3rag/">
		
		<script src="/js/copy-code.js"></script>
		
		
		
		

		
		<meta property="og:title" content="Stumbling into AI: Part 3â€”RAG" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2025/09/h_IMG_2454.webp" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2025/09/12/stumbling-into-ai-part-3rag/" />
		<meta property="og:site_name" content="Stumbling into AI: Part 3â€”RAG" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/toc.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/retro-cards.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/custom.css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		
		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only' 
                })
		</script>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>

	</head>
	<body class="ma0 bg-white section-post page-kind-page is-page-true ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/images/2025/09/h_IMG_2454.webp'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net/" title="Home">
						<link rel="preload" as="image" href="https://rmoff.net/img/repton.gif">
						<img
							src="https://rmoff.net/img/logo.jpg"
							class="w2 h2 br-100"
							alt="rmoff&#39;s random ramblings"
							onmouseover="this.src='https:\/\/rmoff.net\/img\/repton.gif';"
							onmouseout="this.src='https:\/\/rmoff.net\/img\/logo.jpg';"
						/>
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://bsky.app/profile/rmoff.net"><i class="fa-brands fa-bluesky"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://twitter.com/rmoff/"><i class="fa-brands fa-x-twitter"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">
						<span class="terminal-title">Stumbling into AI: Part 3â€”RAG<span class="terminal-cursor"></span></span>
					</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
								Published
								<time datetime="2025-09-12T13:10:34Z">Sep 12, 2025</time>
								<span class="display-print">by </span>
								 in <a href="https://rmoff.net/categories/ai" class="no-underline category near-white dim">AI</a>, <a href="https://rmoff.net/categories/rag" class="no-underline category near-white dim">RAG</a>, <a href="https://rmoff.net/categories/stumbling-into-ai" class="no-underline category near-white dim">Stumbling Into AI</a>
								<span class="display-print">at https://rmoff.net/2025/09/12/stumbling-into-ai-part-3rag/</span>
							
						
					</h2>
				</div>

				
				
				
				<div class="w-100 cf hide-print">
					<a class="fr f6 ma0 pa2 link white-50 dim fas fa-camera" href="https://bsky.app/profile/rmoff.net" title="Photo Credit"></a>
				</div>
				
				

			</div>
		</header>
		
		<main role="main">
		
<div class="container-fluid docs">
  <div class="row">
    <main class="docs-content" role="main">

<article class="article">
	<div class="paragraph">
<p><em>A <a href="/categories/stumbling-into-ai">short series</a> of notes for myself as I learn more about the AI ecosystem as of September 2025.</em>
<em>The driver for all this is understanding more about Apache Flinkâ€™s <a href="https://github.com/apache/flink-agents"><strong>Flink Agents</strong></a> project, and Confluentâ€™s <a href="https://www.confluent.io/product/streaming-agents/"><strong>Streaming Agents</strong></a>.</em></p>
</div>
<div class="paragraph">
<p>Having <a href="/2025/09/04/stumbling-into-ai-part-1mcp/">poked around MCP</a> and <a href="/2025/09/08/stumbling-into-ai-part-2models/">Models</a>, next up is RAG.</p>
</div>
<div class="paragraph">
<p>RAG has been one of the buzzwords of the last couple of years, with any vendor worth its salt finding a way to crowbar it into their product.
Iâ€™d been sufficiently put off it by the hype to steer away from actually understanding what it is.
In this blog post, letâ€™s fix thatâ€”because if Iâ€™ve understood it correctly, itâ€™s a pattern thatâ€™s not scary at all.</p>
</div>
<div class="sect1">
<h2 id="_rag_basics">RAG basics&nbsp;<a class="headline-hash" href="#_rag_basics">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>First up: RAG stands for <strong>Retrieval-Augmented Generation</strong>.</p>
</div>
<div class="paragraph">
<p>Put another way, itâ€™s about <strong>Generation</strong> (using LLMs, like we saw <a href="/2025/09/08/stumbling-into-ai-part-2models/">before</a> and like you use every day), in which the prompt given to the LLM is <strong>Augmented</strong> by the <strong>Retrieval</strong> of additional context.</p>
</div>
<div class="paragraph">
<p>It is literally the difference between this prompt &amp; response from an LLM:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Respond to this prompt: whatâ€™s the latest version of kafka?</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Apache Kafka 3.7 (released on May 12, 2023)</p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>and this one:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Using this data: The latest version of Apache Kafka is 4.1</strong>. Respond to this prompt: whatâ€™s the latest version of kafka?</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The latest version of Apache Kafka is 4.1.</p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The second exampleâ€™s <strong>generation</strong> has been <strong>augmented</strong> by the <strong>retrieval</strong> of additional information thatâ€™s then added to the prompt prior to submission to the LLM.</p>
</div>
<div class="paragraph">
<p>This may seem stupidâ€”why would I tell the LLM the latest version, and then ask it the latest version?
But itâ€™s not me asking!
In a typical interaction youâ€™ll have the end-user entering a prompt, and the prompt given to the LLM will be the userâ€™s question, plus context (information) added by some kind of lookup.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/2025/09/rag1.webp" alt="rag1"/></span></p>
</div>
<div class="paragraph">
<p>The LLM uses the additional context in order to provide an answer that is much more likely to be accurate, avoiding the issue of hallucinations (when LLMs make shit up) or simply out of date information (on which the LLM was trained; itâ€™s not their fault really).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/2025/09/rag4.webp" alt="rag4"/></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you like videos, I really liked this video from IBMâ€™s Marina Danilevsky that explains the concept.</p>
</div>
<div class="paragraph">
<p>She uses the analogy of her kid asking her which planet has the most moons, and the fact that her &#34;training dataset&#34; was from several decades ago, and discoveries have been made since then that could render her answer, given in good faith, incorrect.
The RAG bit of the analogy is that she would go and check the latest datasource from somewhere like NASA before giving the answer to her child.</p>
</div>
<div class="paragraph">
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/T-D1OfcDW1M?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>So far, so simple, really.
RAG==a fancy way for giving LLMs more context with which to hopefully give you a better answer.</p>
</div>
<div class="paragraph">
<p>The Kafka version number example is somewhat trite and could be picked apart in multiple ways.
Why do I need an LLM to tell me that? Why canâ€™t I just go to the datasource that gave the additional context to the prompt myself?</p>
</div>
<div class="paragraph">
<p>The point with RAG is that youâ€™re still wanting an LLM to do its thingâ€”but to do so either with much greater accuracy (e.g. Kafka version), or in a way that it simply couldnâ€™t do without the additional context.</p>
</div>
<div class="paragraph">
<p>RAGs really come into their own for <strong>enriching</strong> the behaviour of LLMs with data, often thatâ€™s held within our business.
As a customer, we all expect companies to know &#34;everything&#34; about us, right?
After all, we completely the forms, we checked the boxesâ€”why are you asking me to type in a bunch of data that you already know?</p>
</div>
<div class="paragraph">
<p>Hereâ€™s a simple example of this concept.
Imagine we want to know where <em>our</em> nearest airport is?</p>
</div>
<div class="paragraph">
<p><em>Yes yes, we could just open Google Maps, but hear me out.</em></p>
</div>
<div class="paragraph">
<p>If we ask an LLM this, itâ€™s not got a clueâ€”it has no <em>context</em>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Where is Rickâ€™s nearest airport? Single answer only.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Iâ€™m not aware of any information about Rick, so Iâ€™ll need more context or details about who or what &#34;Rick&#34; refers to.</p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Whereas if we already hold information about our customer &#39;Rick&#39;, we can look that information up and pass it to the LLM:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Using this data: <strong>Rick lives in Dulwich.</strong> Respond to this prompt: Where is Rickâ€™s nearest airport? Single answer only.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>London Gatwick Airport (LGW)</p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/2025/09/rag3.webp" alt="rag3"/></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embeddings_and_vectors">Embeddings and Vectors&nbsp;<a class="headline-hash" href="#_embeddings_and_vectors">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>So how do we get this additional context?
Or rather, how do we do the <strong>Retrieval</strong> of data with which we can <strong>Augment</strong> our <strong>Generation</strong>?</p>
</div>
<div class="paragraph">
<p>Well, you could literally run a SQL query, as illustrated above.
You could have your client make API calls to get data, you could even use an <a href="/2025/09/04/stumbling-into-ai-part-1mcp/">MCP server</a>â€”the end result is the same: the LLM is getting additional context to help it do what you want it to do.</p>
</div>
<div class="paragraph">
<p>One common pattern for the implementation of RAG is the use of vector databases.
In fact, so common I would say itâ€™s become synonymous.
The reason that itâ€™s so widely used is that whilst a SQL lookup is excellent for working with <em>structured</em> data (e.g. &#34;where does my customer live&#34;), thatâ€™s often not the kind of additional context that we want to provide to the LLM.</p>
</div>
<div class="paragraph">
<p>What if weâ€™re working with <em>text</em>?
Whilst LLMs are trained on a metric crap-ton of publicly available text, thereâ€™s material out there that they donâ€™t know about.
That could be content that was created after the LLM was trained (for example, the release notes for the latest version of Apache Kafka).
Often, in the context of RAG, itâ€™s material internal to a company such as documentation, wikis, emails, Slack conversationsâ€¦any manner of content.</p>
</div>
<div class="paragraph">
<p>To use this text data in RAG, a representation (&#34;<em>embedding</em>&#34;) of the <em>semantic meaning</em> of the text is created, and stored as a <em>vector</em>.
This is the <em>RAG Ingestion</em> part.
Once the data is stored, it can be used in <em>RAG Retrieval</em>.
What this does is take the userâ€™s query and convert that to an embedding too.
It then compares the queryâ€™s vector with those held in the vector store (populated by the ingest process) and finds the piece of textual data (&#34;embedding&#34;) thatâ€™s most closely related to it.
This piece of additional information is then included in the LLM request, in exactly the same manner we saw aboveâ€”adding context to the existing prompt.</p>
</div>
<div class="paragraph">
<p>The <a href="https://ollama.com/blog/embedding-models">Ollama blog</a> has a nice example which Iâ€™m going to use here, demonstrating the Kafka version example I showed above.</p>
</div>
<div class="sect2">
<h3 id="_rag_ingestion_populating_a_vector_database_with_embeddings">RAG Ingestion: Populating a vector database with embeddings&nbsp;<a class="headline-hash" href="#_rag_ingestion_populating_a_vector_database_with_embeddings">ðŸ”—</a> </h3>
<div class="paragraph">
<p>First, set up the environment.
Weâ€™re using <a href="https://docs.trychroma.com/">ChromaDB</a> as an in-memory vector store.
<a href="https://ollama.com/">Ollama</a> is a tool for running models locally.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f92672;font-weight: bold">import</span> <span style="color: #f8f8f2">ollama</span>
<span style="color: #f92672;font-weight: bold">import</span> <span style="color: #f8f8f2">chromadb</span>
<span style="color: #f8f8f2;background-color: #49483e">client</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">chromadb</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">Client</span><span style="color: #f8f8f2;background-color: #49483e">()</span>
<span style="color: #f8f8f2;background-color: #49483e">collection</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">client</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">create_collection</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">name</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;docs&#34;</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we define our &#39;documents&#39;.
This is a very simplified example.
In practice we could be ingesting entire wikis or codebases of information.
The vital bit is how we carve it up, which is known as <em>chunking</em>.
A <em>chunk</em> is what will get passed to the LLM for enriching the context, so it needs to be big enough to be useful, but not so big that it is unhelpful (e.g. blows the token limit on the LLM, provides context that is not specific enough, etc).</p>
</div>
<div class="paragraph">
<p>Here Iâ€™ve manually pasted excerpts of the <a href="https://kafka.apache.org/blog">Apache Kafka 4.1.0 release blog post</a> (Iâ€™ve cropped the text in the code sample here, just for clarity of layout):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">documents</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">[</span>
  <span style="color: #e6db74">&#34;4 September 2025 - We are proud to announce the release of Apache KafkaÂ® 4.1.0. This release contai[â€¦]&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;KIP-877: Mechanism for plugins and connectors to register metrics Many client-side plugins can now [â€¦]&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;KIP-932: Queues for Kafka (Early Access) This KIP introduces the concept of a share group as a way [â€¦]&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;KIP-996: Pre-Vote KIP-996 introduces a &#39;Pre-Vote&#39; mechanism to reduce unnecessary KRaft leader elec[â€¦]&#34;</span>
<span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For each of these documents we call an <em>embedding model</em> (which is <strong>not</strong> an LLM!) which captures the semantic meaning of the text and encodes it in a series of vectors which are added to the ChromaDB <code>collection</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #66d9ef;font-weight: bold">for</span> <span style="color: #f8f8f2;background-color: #49483e">i</span><span style="color: #f8f8f2;background-color: #49483e">,</span> <span style="color: #f8f8f2;background-color: #49483e">d</span> <span style="color: #f92672;font-weight: bold">in</span> <span style="color: #f8f8f2">enumerate</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">documents</span><span style="color: #f8f8f2;background-color: #49483e">):</span>
  <span style="color: #f8f8f2;background-color: #49483e">response</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">ollama</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">embed</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">model</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;mxbai-embed-large&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span> <span style="color: #f8f8f2">input</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">d</span><span style="color: #f8f8f2;background-color: #49483e">)</span>
  <span style="color: #f8f8f2;background-color: #49483e">embeddings</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">response</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #e6db74">&#34;embeddings&#34;</span><span style="color: #f8f8f2;background-color: #49483e">]</span>

  <span style="color: #75715e;font-style: italic"># Store the embeddings in ChromaDB
</span>  <span style="color: #f8f8f2;background-color: #49483e">collection</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">add</span><span style="color: #f8f8f2;background-color: #49483e">(</span>
    <span style="color: #f8f8f2;background-color: #49483e">ids</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f8f8f2">str</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">i</span><span style="color: #f8f8f2;background-color: #49483e">)],</span>
    <span style="color: #f8f8f2;background-color: #49483e">embeddings</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">embeddings</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #f8f8f2;background-color: #49483e">documents</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f8f8f2;background-color: #49483e">d</span><span style="color: #f8f8f2;background-color: #49483e">]</span>
  <span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The model used here is <a href="https://www.mixedbread.com/blog/mxbai-embed-large-v1"><code>mxbai-embed-large</code></a>.</p>
</div>
<div class="paragraph">
<p>For interest, hereâ€™s what the data weâ€™re storing in the vector database looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>ID: 0
Document: 4 September 2025 - We are proud to announce the release of Apache KafkaÂ® 4.1.0. This relea[â€¦]
Embedding: [ 0.05642379 -0.02119605 -0.04147635  0.05452667 -0.01146116]...

ID: 1
Document: KIP-877: Mechanism for plugins and connectors to register metrics Many client-side plugins[â€¦]
Embedding: [-0.01764962 -0.00686921 -0.03395142  0.00759143 -0.02553692]...

ID: 2
Document: KIP-932: Queues for Kafka (Early Access) This KIP introduces the concept of a share group [â€¦]
Embedding: [0.05048409 0.00816069 0.00764809 0.03790297 0.00651639]...

ID: 3
Document: KIP-996: Pre-Vote KIP-996 introduces a &#39;Pre-Vote&#39; mechanism to reduce unnecessary KRaft le[â€¦]
Embedding: [ 0.04927347 -0.02349585  0.01001445  0.01915772 -0.010186  ]...</code></pre>
</div>
</div>
<div class="paragraph">
<p>So the vector database holds the <em>actual document (chunk) data</em>, along with the embedding representation.</p>
</div>
<div class="paragraph">
<p>Thatâ€™s all, so far.
A static set of text data, stored in a way that represents the <em>semantic meaning</em> of the data.</p>
</div>
<div class="paragraph">
<p>You do this process once, or add to the vector database as new documents are needed (for example, when Apache Kafka 4.2.0 is released).</p>
</div>
</div>
<div class="sect2">
<h3 id="_rag_retrieval_using_embeddings_to_provide_context_to_an_llm">RAG Retrieval: Using embeddings to provide context to an LLM&nbsp;<a class="headline-hash" href="#_rag_retrieval_using_embeddings_to_provide_context_to_an_llm">ðŸ”—</a> </h3>
<div class="paragraph">
<p>Now our merry user arrives with their LLM client, and wants to know the latest version of Kafka.</p>
</div>
<div class="paragraph">
<p>Left to its own devices, the LLM only knows what it was trained with, which will have a cutoff date.
Sometimes the LLM will tell you that, sometimes it wonâ€™t.</p>
</div>
<div class="paragraph">
<p>Instead of <code>ollama.embed</code>, letâ€™s use <code>ollama.generate</code> with the <code>llama3.2</code> LLM to generate the answer to the question with no additional context:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">user_input</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #e6db74">&#34;what&#39;s the latest version of kafka?&#34;</span>

<span style="color: #f8f8f2;background-color: #49483e">prompt</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #66d9ef;font-weight: bold">f</span><span style="color: #e6db74">&#34;Respond to this prompt: </span><span style="color: #e6db74">{</span><span style="color: #f8f8f2;background-color: #49483e">user_input</span><span style="color: #e6db74">}</span><span style="color: #e6db74">&#34;</span>

<span style="color: #f8f8f2;background-color: #49483e">output</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">ollama</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">generate</span><span style="color: #f8f8f2;background-color: #49483e">(</span>
  <span style="color: #f8f8f2;background-color: #49483e">model</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;llama3.2&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #f8f8f2;background-color: #49483e">prompt</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">prompt</span>
<span style="color: #f8f8f2;background-color: #49483e">)</span>
<span style="color: #66d9ef;font-weight: bold">print</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #66d9ef;font-weight: bold">f</span><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">{</span><span style="color: #f8f8f2;background-color: #49483e">prompt</span><span style="color: #e6db74">}</span><span style="color: #ae81ff">\n</span><span style="color: #e6db74">-----</span><span style="color: #ae81ff">\n</span><span style="color: #e6db74">{</span><span style="color: #f8f8f2;background-color: #49483e">output</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #e6db74">&#39;response&#39;</span><span style="color: #f8f8f2;background-color: #49483e">]</span><span style="color: #e6db74">}</span><span style="color: #ae81ff">\n\n</span><span style="color: #e6db74">=-=-=-=-&#34;</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>Respond to this prompt: what&#39;s the latest version of kafka?
____
As of my knowledge cutoff in December 2023, the latest version of Apache Kafka is 3.4.</code></pre>
</div>
</div>
<div class="paragraph">
<p>OKâ€”so as expected, not up-to-date, at all.
What weâ€™d like to do is help out the LLM by giving it some more context.</p>
</div>
<div class="paragraph">
<p>We canâ€™t throw our entire library of knowledge at itâ€”that wouldnâ€™t work (too many tokens, not specific enough).
Instead, weâ€™re going to work out within our library, which document <em>is most relevant <strong>to the query</strong></em>.</p>
</div>
<div class="paragraph">
<p>The first step is to generate an embedding for our query, using the same model with which we created the embeddings for the documents in the vector database (the &#34;library&#34; to which Iâ€™m figuratively referring).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">user_input</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #e6db74">&#34;what&#39;s the latest version of kafka?&#34;</span>

<span style="color: #f8f8f2;background-color: #49483e">response</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">ollama</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">embed</span><span style="color: #f8f8f2;background-color: #49483e">(</span>
  <span style="color: #f8f8f2;background-color: #49483e">model</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;mxbai-embed-large&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #f8f8f2">input</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">user_input</span>
<span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The vector looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>[[0.017346583, -0.021703502, -0.0436593, 0.045320738, -0.0005510414, -0.038553298, 0.016 [â€¦]</code></pre>
</div>
</div>
<div class="paragraph">
<p>which to you or I might not mean much, but when passed to the vector database as a <code>.query</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">results</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">collection</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">query</span><span style="color: #f8f8f2;background-color: #49483e">(</span>
  <span style="color: #f8f8f2;background-color: #49483e">query_embeddings</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">response</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #e6db74">&#34;embeddings&#34;</span><span style="color: #f8f8f2;background-color: #49483e">],</span>
  <span style="color: #f8f8f2;background-color: #49483e">n_results</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #ae81ff">1</span>
<span style="color: #f8f8f2;background-color: #49483e">)</span>
<span style="color: #f8f8f2;background-color: #49483e">data</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">results</span><span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #e6db74">&#39;documents&#39;</span><span style="color: #f8f8f2;background-color: #49483e">][</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">][</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>returns the document that is the most closely related, semantically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>4 September 2025 - We are proud to announce the release of Apache KafkaÂ® 4.1.0. This release contains many new features and improvements. [â€¦]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Weâ€™ve now <strong>retrieved</strong> the <strong>additional</strong> context with which we can now do the generation.
The prompt is the same as before, except we include the document that we retrieved from the vector database in it too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">prompt</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #66d9ef;font-weight: bold">f</span><span style="color: #e6db74">&#34;Using this data: </span><span style="color: #e6db74">{</span><span style="color: #f8f8f2;background-color: #49483e">data</span><span style="color: #e6db74">}</span><span style="color: #e6db74">. Respond to this prompt: </span><span style="color: #e6db74">{</span><span style="color: #f8f8f2;background-color: #49483e">user_input</span><span style="color: #e6db74">}</span><span style="color: #e6db74">&#34;</span>
<span style="color: #f8f8f2;background-color: #49483e">output</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">ollama</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">generate</span><span style="color: #f8f8f2;background-color: #49483e">(</span>
  <span style="color: #f8f8f2;background-color: #49483e">model</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;llama3.2&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #f8f8f2;background-color: #49483e">prompt</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2;background-color: #49483e">prompt</span>
<span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>Using this data: 4 September 2025 - We are proud to announce the release of Apache KafkaÂ® 4.1.0. This release contains many new features and improvements. This blog post will highlight some of the more prominent ones. For a full list of changes, be sure to check the release notes. Queues for Kafka (KIP-932) is now in preview. It&#39;s still not ready for production but you can start evaluating and testing it. See the preview release notes for more details. This release also introduces a new Streams Rebalance Protocol (KIP-1071) in early access. It is based on the new consumer group protocol (KIP-848). See the Upgrading to 4.1 section in the documentation for the list of notable changes and detailed upgrade steps..
Respond to this prompt: what&#39;s the latest version of kafka?
____
The latest version of Kafka mentioned in the data is Apache Kafka 4.1.0, which was released on September 4, 2025.</code></pre>
</div>
</div>
<div class="paragraph">
<p>There we goâ€“our LLM used the context from the release notes to not only tell us the latest version, but also its release date.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_and_then_the_snake_ate_its_own_tail">And then the snake ate its own tail&nbsp;<a class="headline-hash" href="#_and_then_the_snake_ate_its_own_tail">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>In writing this article I made a rookie mistake.
No surprise there; but one worth illustrating here.</p>
</div>
<div class="paragraph">
<p>I use LLMs a lot to help my writingâ€”never to <em>write</em> but to help generate code, for example.
The embeddings example on the <a href="https://ollama.com/blog/embedding-models">Ollama blog</a> had these documents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">documents</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">[</span>
  <span style="color: #e6db74">&#34;Llamas are members of the camelid family meaning they&#39;re pretty closely related to vicuÃ±as and camels&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;Llamas were first domesticated and used as pack animals 4,000 to 5,000 years ago in the Peruvian highlands&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;Llamas can grow as much as 6 feet tall though the average llama between 5 feet 6 inches and 5 feet 9 inches tall&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;Llamas weigh between 280 and 450 pounds and can carry 25 to 30 percent of their body weight&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;Llamas are vegetarians and have very efficient digestive systems&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;Llamas live to be about 20 years old, though some only live for 15 years and others live to be 30 years old&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cute, but nothing to do with my domain.
So I did as I often doâ€”chuck it over to an LLM.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/images/2025/09/8310d728162d567b92f79e2be71aebb3f6b7e66fee68d6d0d7fcee0f3a62c8c5.webp" alt="8310d728162d567b92f79e2be71aebb3f6b7e66fee68d6d0d7fcee0f3a62c8c5"/></span></p>
</div>
<div class="paragraph">
<p>Feeling smug, I copied this into my Python code and added a couple more documents (chunks) to illustrate the point about release version freshness:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="python"><span style="color: #f8f8f2;background-color: #49483e">documents</span> <span style="color: #f92672;font-weight: bold">=</span> <span style="color: #f8f8f2;background-color: #49483e">[</span>
    <span style="color: #e6db74">&#34;The latest version of Apache Kafka is 4.1&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;KIP-932 adds support for traditional message queue semantics to Kafka&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Apache Kafka is a distributed event streaming platform originally developed by LinkedIn and later open-sourced to the Apache Software Foundation&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Kafka was first released in 2011 and is written primarily in Scala and Java, designed to handle high-throughput, low-latency data streaming&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Kafka clusters can scale horizontally across multiple servers and can handle millions of messages per second with sub-millisecond latency&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Kafka uses a publish-subscribe messaging model where producers write data to topics and consumers read from those topics in real-time&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Kafka provides durability through configurable data replication and can retain messages for days, weeks, or even indefinitely depending on configuration&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;Kafka is widely used by companies like Netflix, Uber, Airbnb, and thousands of other organizations for real-time analytics, log aggregation, and event-driven architectures&#34;</span>
<span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But when it came to comparing LLM responses using RAG and this data, it didnâ€™t really make much difference in some cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>Respond to this prompt: what is Apache Kafka? Give me one sentence. <i class="conum" data-value="1"></i><b>(1)</b>
____
Apache Kafka is a distributed streaming platform that enables real-time data processing and event-driven architecture, providing fault-tolerant and scalable messaging capabilities for large-scale data ingestion, storage, and analysis.

=-=-=-=-
Using this data: Apache Kafka is a distributed event streaming platform originally developed by LinkedIn and later open-sourced to the Apache Software Foundation. Respond to this prompt: what is Apache Kafka? Give me one sentence. <i class="conum" data-value="2"></i><b>(2)</b>
____
Apache Kafka is a distributed event streaming platform that enables scalable, fault-tolerant, and secure data processing and consumption for real-time applications.

=-=-=-=-</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>No RAG</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>With RAG</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Whyâ€™s the output basically the same?
Because the LLM <em>already knows</em> what Apache Kafka is!
If it didnâ€™t, how would it have generated the <code>documents</code> array above?</p>
</div>
<div class="paragraph">
<p><em>(technically I used Claude 4 Sonnet to generate the array and Llama 3.2 in my Python scriptâ€”but basically the same principle)</em>.</p>
</div>
<div class="paragraph">
<p>One lesson, but to express in two different ways from this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RAG content only makes sense if itâ€™s not already in the LLM</p>
</li>
<li>
<p>Donâ€™t use LLMs to generate RAG content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are probably a bunch of nuances to this.
For example, could you use a more powerful LLM to distill down content for use in RAG by a smaller LLM (cheaper/faster to run)?
Tell me in the comments belowâ€”Iâ€™m here to learn :)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading">Further reading&nbsp;<a class="headline-hash" href="#_further_reading">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>ðŸŽ¥ <a href="https://www.youtube.com/watch?v=T-D1OfcDW1M">Marina Danilevsky - What is RAG</a>.</p>
</li>
<li>
<p>Tons of great content in <a href="https://www.infoq.com/presentations/llm-data-code-model-prompt/">this talk from Paul Iusztin at QCon London 2025</a>, including lots about RAG (at around 24 minutes in).</p>
</li>
</ul>
</div>
</div>
</div>
	<hr>
	<div style="background-color: rgba(204, 234, 255, 0.25); margin-bottom:50px;margin-top:50px;padding: 20px; border-width: 2px; border-style: solid; border-color: darkorange;">
	
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
		
	</div>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
			
				
					<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://bsky.app/profile/rmoff.net"><b class="fa-brands fa-bluesky"></b></a>  <em>Robin Moffatt works on the DevRel team at Confluent. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

				
			
		
		</div>
		
	</div>

		

</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
        </ul>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#_rag_basics">RAG basics</a></li>
    <li><a href="#_embeddings_and_vectors">Embeddings and Vectors</a>
      <ul>
        <li><a href="#_rag_ingestion_populating_a_vector_database_with_embeddings">RAG Ingestion: Populating a vector database with embeddings</a></li>
        <li><a href="#_rag_retrieval_using_embeddings_to_provide_context_to_an_llm">RAG Retrieval: Using embeddings to provide context to an LLM</a></li>
      </ul>
    </li>
    <li><a href="#_and_then_the_snake_ate_its_own_tail">And then the snake ate its own tail</a></li>
    <li><a href="#_further_reading">Further reading</a></li>
  </ul>
</nav>
      </div>
      
      <div class="toc-mobile-label">TABLE OF CONTENTS</div>
      
    
    </div>
  </div>
</div>


		</main>
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2026 
			</p>
		</footer>
		
	</body>
</html>
