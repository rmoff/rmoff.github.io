<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preload" as="image" href="https://rmoff.net/images/2025/03/h_IMG_6392.webp" >
		
		<title>Creating an HTTP Source connector on Confluent Cloud from the CLI</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2025/03/13/creating-an-http-source-connector-on-confluent-cloud-from-the-cli/">
		
		

		
		<meta property="og:title" content="Creating an HTTP Source connector on Confluent Cloud from the CLI" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2025/03/h_IMG_6392.webp" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2025/03/13/creating-an-http-source-connector-on-confluent-cloud-from-the-cli/" />
		<meta property="og:site_name" content="Creating an HTTP Source connector on Confluent Cloud from the CLI" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<style>
			html { background-color: #FAF8F5; color: #2D2926; }
			body { opacity: 0; transition: opacity 0.1s ease; }
			body.loaded { opacity: 1; }
			.site-header { height: 60px; background-color: #FAF8F5; border-bottom: 1px solid #E8421E; }
		</style>

		
		
		<link rel="stylesheet" href="https://rmoff.net/css/redesign.css" />
		
		<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap">
		<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
		<noscript><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet"></noscript>
		

		
		<script src="/js/copy-code.js"></script>
		

		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only'})
		</script>

		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>
	</head>
	<body class="ma0 section-post page-kind-page is-page-true ">
		<script>document.body.classList.add('loaded');</script>

		<header class="site-header hide-print">
	<div class="site-header-inner">
		<a href="https://rmoff.net/" class="site-title">rmoff's random ramblings</a>
		<nav class="site-nav">
			<a href="/categories/interesting-links/" class="nav-il"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Interesting Links</a>
			<span class="nav-sep"></span>
			<a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg> Categories</a>
			<a href="https://rmoff.net/search/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Search</a>
			<a href="https://rmoff.net/index.xml"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg> RSS</a>
			<div class="nav-social">
				<a href="https://www.linkedin.com/in/robinmoffatt/" title="linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
				<a href="https://twitter.com/rmoff/" title="twitter"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
				<a href="https://bsky.app/profile/rmoff.net" title="bluesky"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 568 501" fill="currentColor"><path d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C10.945 203.659 1 75.291 1 57.946 1-28.906 76.135-1.612 123.121 33.664z"/></svg></a>
				<a href="https://www.youtube.com/c/rmoff" title="youtube"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
				<a href="https://talks.rmoff.net" title="talks"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="0"/><line x1="12" y1="17" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/><polyline points="7 8 12 12 17 8"/></svg></a>
				<a href="https://github.com/rmoff/" title="github"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
			</div>
		</nav>
		<button class="nav-toggle" onclick="document.querySelector('.mobile-nav').classList.toggle('open')" aria-label="Menu">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
		</button>
	</div>
	<nav class="mobile-nav">
		<a href="https://rmoff.net/">Home</a>
		<a href="/categories/">Categories</a>
		<a href="/categories/interesting-links/">Interesting Links</a>
		<a href="https://rmoff.net/search/">Search</a>
		<a href="https://rmoff.net/index.xml">RSS</a>
		<a href="https://www.linkedin.com/in/robinmoffatt/">linkedin</a>
		<a href="https://twitter.com/rmoff/">twitter</a>
		<a href="https://bsky.app/profile/rmoff.net">bluesky</a>
		<a href="https://www.youtube.com/c/rmoff">youtube</a>
		<a href="https://talks.rmoff.net">talks</a>
		<a href="https://github.com/rmoff/">github</a>
	</nav>
</header>


		<main role="main">
		

<div class="article-hero" style="background-image: url('https://rmoff.net/images/2025/03/h_IMG_6392.webp');">
	<div class="article-hero-overlay">
		<div class="article-hero-content">
			<h1>Creating an HTTP Source connector on Confluent Cloud from the CLI</h1>
			<p class="article-hero-meta">
				
					<time datetime="2025-03-13T11:29:40Z">13 Mar 2025</time>
					<span class="display-print">by </span>
					 &middot; <a href="https://rmoff.net/categories/confluent-cloud">Confluent Cloud</a>, <a href="https://rmoff.net/categories/kafka-connect">Kafka Connect</a>, <a href="https://rmoff.net/categories/managed-connectors">Managed Connectors</a>, <a href="https://rmoff.net/categories/rest-api">REST API</a>, <a href="https://rmoff.net/categories/kcat-kafkacat">kcat (kafkacat)</a>
					<span class="display-print">at https://rmoff.net/2025/03/13/creating-an-http-source-connector-on-confluent-cloud-from-the-cli/</span>
				
			</p>
		</div>
	</div>
</div>


<details class="toc-mobile">
	<summary>Table of Contents</summary>
	<nav id="TableOfContents">
  <ul>
    <li><a href="#_setup">Setup</a></li>
    <li><a href="#_api_keys">API Keys</a></li>
    <li><a href="#_the_confluent_cloud_api">The Confluent Cloud API</a></li>
    <li><a href="#_create_an_http_source_connector_for_a_single_endpoint">Create an HTTP Source connector for a single endpoint</a></li>
    <li><a href="#_checking_the_status_of_a_connector">Checking the status of a connector</a></li>
    <li><a href="#_looking_at_the_data">Looking at the data</a></li>
    <li><a href="#_deleting_a_managed_connector_on_confluent_cloud">Deleting a managed connector on Confluent Cloud</a></li>
    <li><a href="#_creating_an_http_source_connector_for_multiple_api_endpoints">Creating an HTTP Source connector for multiple API endpoints</a></li>
  </ul>
</nav>
</details>

<div class="container-fluid docs">
	<div class="row">
		<main class="docs-content" role="main">

<article class="article" data-pagefind-body>
	<span data-pagefind-filter="category" style="display:none">Confluent Cloud</span><span data-pagefind-filter="category" style="display:none">Kafka Connect</span><span data-pagefind-filter="category" style="display:none">Managed Connectors</span><span data-pagefind-filter="category" style="display:none">REST API</span><span data-pagefind-filter="category" style="display:none">kcat (kafkacat)</span>
	<img data-pagefind-meta="image[src]" src="https://rmoff.net/images/2025/03/h_IMG_6392.webp" style="display:none" alt="">
	
<div class="paragraph">
<p>In this blog article Iâ€™ll show you how you can use the <a href="https://docs.confluent.io/confluent-cli/current/overview.html"><code>confluent</code> CLI</a> to set up a Kafka cluster on Confluent Cloud, the necessary API keys, and then a managed connector.
The connector Iâ€™m setting up is the <a href="https://docs.confluent.io/cloud/current/connectors/cc-http-source-v2.html">HTTP Source (v2)</a> connector.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2025/03/managed-http-connector.webp" alt="managed http connector"/>
</div>
</div>
<div class="paragraph">
<p>Itâ€™s part of a pipeline that Iâ€™m working on to pull in <a href="https://environment.data.gov.uk/flood-monitoring/doc/reference">a feed of data from the UK Environment Agency</a> for processing.
The data is spread across three endpoints, and one of the nice features of the HTTP Source (v2) connector is that one connector can pull data from more than one endpoint.</p>
</div>
<div class="paragraph">
<p>As part of learning about Confluent Cloud and its support for Kafka Connect, I wanted to understand how to configure fully-managed connectors from the CLI.
The UI is nice, but the CLI is repeatable.
Whilst there is <a href="https://registry.terraform.io/providers/confluentinc/confluent/latest/docs/resources/confluent_connector">Terraform support for resources in Confluent Cloud</a>, Iâ€™ve yet to learn Terraform so this would take me off a whole different yak-shaving path that Iâ€™m going to save for another day.</p>
</div>
<div class="sect1">
<h2 id="_setup">Setup&nbsp;<a class="headline-hash" href="#_setup">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>To start with, login to Confluent Cloud:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent login <span style="color: #f92672">--save</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To <em>actually</em> start with, you need to go and <a href="https://www.confluent.io/en-gb/get-started/">sign up for Confluent Cloud</a> (which you can even do from the CLI with <code>confluent cloud-signup</code>!). Then come back here :)
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Now weâ€™ll create an environment within our organisation and set it as the active environment for the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent environment create rmoff

<span style="color: #75715e;font-style: italic"># The above command with return an ID for the environment, which</span>
<span style="color: #75715e;font-style: italic"># is what you specify in the next command here</span>
<span style="color: #f8f8f2">$ </span>confluent environment use env-253ngy</code></pre>
</div>
</div>
<div class="paragraph">
<p>What does any environment need? A Kafka cluster!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent kafka cluster create cluster00 <span style="color: #f92672">--cloud</span> aws <span style="color: #f92672">--region</span> us-west-2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of this command tells us various things about the cluster, including its ID and broker.
Iâ€™m going to store these in local environment variables to make things easier later on when we want to use them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">+----------------------+---------------------------------------------------------+
<span style="color: #f92672;font-weight: bold">[</span>â€¦]
| ID                   | lkc-qnygo6                                              |
| Endpoint             | SASL_SSL://pkc-rgm37.us-west-2.aws.confluent.cloud:9092 |
<span style="color: #f92672;font-weight: bold">[</span>â€¦]
+----------------------+---------------------------------------------------------+

<span style="color: #f8f8f2">$ </span><span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_ENV</span><span style="color: #f92672;font-weight: bold">=</span>env-253ngy
<span style="color: #f8f8f2">$ </span><span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_KAFKA_CLUSTER</span><span style="color: #f92672;font-weight: bold">=</span>lkc-qnygo6
<span style="color: #f8f8f2">$ </span><span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_KAFKA_BROKER</span><span style="color: #f92672;font-weight: bold">=</span>pkc-rgm37.us-west-2.aws.confluent.cloud:9092</code></pre>
</div>
</div>
<div class="paragraph">
<p>Having created the cluster, weâ€™ll set it as the active one for our CLI session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent kafka cluster use <span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span>
Set Kafka cluster lkc-qnygo6 as the active cluster <span style="color: #66d9ef;font-weight: bold">for </span>environment env-253ngy.</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we created the cluster we got a Schema Registry with itâ€”we need to get the ID and endpoint details:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent schema-registry cluster describe
+----------------------+----------------------------------------------------+
| Name                 | Always On Stream Governance                        |
|                      | Package                                            |
| Cluster              | lsrc-g70zm3                                        |
| Endpoint URL         | https://psrc-13go8y7.us-west-2.aws.confluent.cloud |
<span style="color: #f92672;font-weight: bold">[</span>â€¦]
+----------------------+----------------------------------------------------+

<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_SR_HOST</span><span style="color: #f92672;font-weight: bold">=</span>psrc-13go8y7.us-west-2.aws.confluent.cloud
<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_SR_ID</span><span style="color: #f92672;font-weight: bold">=</span>lsrc-g70zm3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_keys">API Keys&nbsp;<a class="headline-hash" href="#_api_keys">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Iâ€™m <em>obviously</em> not sharing the actual API keys generated by the commands below, and have instead put placeholders.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>We need to create some API keys for the calls weâ€™re going to be making to interact with the cluster.</p>
</div>
<div class="paragraph">
<p>First, one for the Kafka cluster itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent api-key create <span style="color: #f92672">--resource</span> <span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span>
It may take a couple of minutes <span style="color: #66d9ef;font-weight: bold">for </span>the API key to be ready.
Save the API key and secret. The secret is not retrievable later.
+------------+------------------------------------------------------------------+
| API Key    | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-kafka-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>                                         |
| API Secret | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-kafka-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span>                                      |
+------------+------------------------------------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then one for the cloud resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent api-key create <span style="color: #f92672">--resource</span> cloud
It may take a couple of minutes <span style="color: #66d9ef;font-weight: bold">for </span>the API key to be ready.
Save the API key and secret. The secret is not retrievable later.
+------------+------------------------------------------------------------------+
| API Key    | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-cloud-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>                                         |
| API Secret | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-cloud-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span>                                      |
+------------+------------------------------------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, for the Schema Registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent api-key create <span style="color: #f92672">--resource</span> <span style="color: #f8f8f2">$CNFL_SR_ID</span>
It may take a couple of minutes <span style="color: #66d9ef;font-weight: bold">for </span>the API key to be ready.
Save the API key and secret. The secret is not retrievable later.
+------------+------------------------------------------------------------------+
| API Key    | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-schema-registry-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>                               |
| API Secret | <span style="color: #f92672;font-weight: bold">(</span>XXXmy-schema-registry-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span>                            |
+------------+------------------------------------------------------------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>Having done this, weâ€™ll store the API keys and secrets in local environment variables to make it easy to re-use them later on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_KC_API_KEY</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-kafka-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>
<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_KC_API_SECRET</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-kafka-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span>

<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_CLOUD_API_KEY</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-cloud-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>
<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_CLOUD_API_SECRET</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-cloud-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span>

<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_SR_API_KEY</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-schema-registry-api-keyXXX<span style="color: #f92672;font-weight: bold">)</span>
<span style="color: #f8f8f2">export </span><span style="color: #f8f8f2">CNFL_SR_API_SECRET</span><span style="color: #f92672;font-weight: bold">=(</span>XXXmy-schema-registry-api-secretXXX<span style="color: #f92672;font-weight: bold">)</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Storing API details in environment variables is a risky thing to do if anyone were to get hold of your machine, your bash history, etc etc. There are much better ways to manage secrets; Iâ€™m just taking the easy (but insecure) route here.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_confluent_cloud_api">The Confluent Cloud API&nbsp;<a class="headline-hash" href="#_the_confluent_cloud_api">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <a href="https://docs.confluent.io/confluent-cli/current/command-reference/connect/cluster/confluent_connect_cluster_create.html#confluent-connect-cluster-create"><code>confluent</code> CLI to create connectors</a>, but I ended up using a REST call directly.
If you do use the <code>confluent</code> CLI note that the terminology is to create a Connect &#34;Cluster&#34;, rather than a connector.</p>
</div>
<div class="paragraph">
<p>The <a href="https://docs.confluent.io/cloud/current/api.html">Confluent Cloud API</a> uses an API key for authentication.
For working with connectors the API key should be created for access to the <code>cloud</code> resource (see <code>confluent api-key create --resource cloud</code> above).
The docs show how to create an <code>Authorization</code> header with a base64-encoded representation of the API key.
A simpler way is to pass it as a username/password combo, separated by a colon (i.e. <code>API_KEY:API_SECRET</code>).</p>
</div>
<div class="paragraph">
<p>In <code>curl</code> you use <code>--user</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">curl <span style="color: #f92672">--request</span> GET <span style="color: #ae81ff">\</span>
      <span style="color: #f92672">--url</span> https://api.confluent.cloud/org/v2/organizations <span style="color: #ae81ff">\</span>
      <span style="color: #f92672">--user</span> <span style="color: #e6db74">&#34;(XXXmy-cloud-api-keyXXX):(XXXmy-cloud-api-secretXXX)&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <a href="https://httpie.io/">httpie</a> (my favourite tool for this kind of stuff) itâ€™s <code>--auth</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http GET https://api.confluent.cloud/org/v2/organizations <span style="color: #ae81ff">\</span>
      <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;(XXXmy-cloud-api-keyXXX):(XXXmy-cloud-api-secretXXX)&#34;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_an_http_source_connector_for_a_single_endpoint">Create an HTTP Source connector for a single endpoint&nbsp;<a class="headline-hash" href="#_create_an_http_source_connector_for_a_single_endpoint">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Weâ€™ll start simple and make sure that this thing works for a single endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http PUT <span style="color: #ae81ff">\</span>
    <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring-stations/config&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span> <span style="color: #ae81ff">\</span>
    content-type:application/json <span style="color: #ae81ff">\</span>
    connector.class<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;HttpSourceV2&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f8f8f2">name</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;&#34;</span> <span style="color: #ae81ff">\</span>
    http.api.base.url<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;https://environment.data.gov.uk/flood-monitoring&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.api.path<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;/id/stations&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.offset.mode<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;SIMPLE_INCREMENTING&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.initial.offset<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;0&#34;</span> <span style="color: #ae81ff">\</span>
    api1.request.interval.ms<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;3600000&#34;</span> <span style="color: #ae81ff">\</span>
    api1.topics<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;flood-monitoring-stations&#34;</span> <span style="color: #ae81ff">\</span>
    kafka.api.key<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #ae81ff">\</span>
    kafka.api.secret<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    output.data.format<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;AVRO&#34;</span> <span style="color: #ae81ff">\</span>
    tasks.max<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;1&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The documentation for the connector details all of <a href="https://docs.confluent.io/cloud/current/connectors/cc-http-source-v2.html#configuration-properties">the configuration options</a>.
Letâ€™s take a look at what weâ€™re going to configure:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;"/>
<col style="width: 50%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connector.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HttpSourceV2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the connector type weâ€™re going to use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This config value isnâ€™t used, but the element must be specified for the config to be valid. The name of the connector is taken from the URL path (see below).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http.api.base.url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>https://environment.data.gov.uk/flood-monitoring</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The base URL for the API endpoint.
This will make a lot of sense later when we define more than one endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api1.http.api.path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/id/stations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to the API endpoint (to be added to the base URL)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api1.http.offset.mode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SIMPLE_INCREMENTING</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Since the endpoint provides a full set of the data each time we query it, these two settings are necessary to tell the connector to expect this and not try to page through the endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api1.http.initial.offset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api1.request.interval.ms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3600000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Poll the endpoint once an hour (60 minutes / 3600 seconds / 3600000 ms)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>api1.topics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flood-monitoring-stations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Which topic to write the endpoint response to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>output.data.format</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AVRO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How to serialise the data when writing it</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kafka.api.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CNFL_KC_API_KEY</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Credentials that the connector will use to write to the Kafka cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kafka.api.secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CNFL_KC_API_SECRET</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks.max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many tasks the connector can run (less relevant for a single endpoint, but important when we add more later)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Confluent Cloud REST API endpoint that weâ€™re going to send this data to is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">https://api.confluent.cloud/connect/v1/environments/<span style="color: #f8f8f2">$CNFL_ENV</span>/clusters/<span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span>/connectors/flood-monitoring-stations/config<span style="color: #e6db74">&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The component parts are broken out like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">URL Element</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>https://api.confluent.cloud/connect/v1</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>[fixed]</em> Base URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CNFL_ENV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Confluent Cloud Environment ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CNFL_KAFKA_CLUSTER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kafka Cluster ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connectors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>[fixed]</em> Resource Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flood-monitoring-stations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name that you want to use for the connector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>[fixed]</em> The configuration endpoint</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <a href="https://docs.confluent.io/cloud/current/api.html#tag/Connectors-(connectv1)/operation/createOrUpdateConnectv1ConnectorConfig"><code>/config</code> API</a> expects a <code>PUT</code> operation, and has the advantage over the related <a href="https://docs.confluent.io/cloud/current/api.html#tag/Connectors-(connectv1)/operation/createConnectv1Connector"><code>POST</code> to <code>/connectors</code></a> in that it does an &#39;upsert&#39;â€”if the connector doesnâ€™t exist it creates it, and if it does, it updates it. That makes the REST call idempotent (a fancy way of saying you can run it repeatedly with the same result).</p>
</div>
<div class="paragraph">
<p>When we run the command we get back an HTTP status code which if all has gone well is this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_checking_the_status_of_a_connector">Checking the status of a connector&nbsp;<a class="headline-hash" href="#_checking_the_status_of_a_connector">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://docs.confluent.io/cloud/current/api.html#tag/Status-(connectv1)/operation/readConnectv1ConnectorStatus">/status</a> endpoint tells us about the connector, including its health and details of the tasks within it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http GET <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring-stations/status&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use the <code>-b</code> flag with httpie if you want to supress the response headers
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">connector</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">state</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">RUNNING</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">trace</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">worker_id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">env-agency--flood-monitoring-stations</span><span style="color: #e6db74">&#34;</span>
    <span style="color: #f8f8f2;background-color: #49483e">},</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">error_details</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #66d9ef;font-weight: bold">null</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">errors_from_trace</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">[],</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">is_csfle_error</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #66d9ef;font-weight: bold">false</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">name</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">env-agency--flood-monitoring-stations</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">override_message</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">tasks</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">[</span>
        <span style="color: #f8f8f2;background-color: #49483e">{</span>
            <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
            <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">msg</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
            <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">state</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">RUNNING</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
            <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">worker_id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">env-agency--flood-monitoring-stations</span><span style="color: #e6db74">&#34;</span>
        <span style="color: #f8f8f2;background-color: #49483e">}</span>
    <span style="color: #f8f8f2;background-color: #49483e">],</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">type</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">source</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">validation_error_category_info</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #66d9ef;font-weight: bold">null</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">validation_errors</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">[]</span>
<span style="color: #f8f8f2;background-color: #49483e">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use jq to simplify this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http GET <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring-stations/status&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span> | <span style="color: #ae81ff">\</span>
    jq <span style="color: #e6db74">&#39;.connector.state&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #e6db74">&#34;RUNNING&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer, you can use the Confluent CLI too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span><span style="color: #75715e;font-style: italic"># Get the connector ID</span>
<span style="color: #f8f8f2">$ </span>confluent connect cluster list
      ID     |                 Name                  | Status  |  Type  | Trace
<span style="color: #f92672">-------------</span>+---------------------------------------+---------+--------+--------
  lcc-r19wjk | env-agency--flood-monitoring-stations | RUNNING | <span style="color: #f8f8f2">source</span> |

<span style="color: #f8f8f2">$ </span><span style="color: #75715e;font-style: italic"># Get its details, including status</span>
<span style="color: #f8f8f2">$ </span>confluent connect cluster describe lcc-r19wjk
Connector Details
+--------+---------------------------------------+
| ID     | lcc-r19wjk                            |
| Name   | env-agency--flood-monitoring-stations |
| Status | RUNNING                               |
| Type   | <span style="color: #f8f8f2">source</span>                                |
+--------+---------------------------------------+


Task Level Details
  Task |  State
<span style="color: #f92672">-------</span>+----------
     0 | RUNNING


Configuration Details
           Config          |                          Value
<span style="color: #f92672">---------------------------</span>+----------------------------------------------------------
  api1.http.api.path       | /id/stations
  api1.http.initial.offset | 0
  api1.request.interval.ms | 3600000
  api1.topics              | flood-monitoring-stations
  cloud.environment        | prod
  cloud.provider           | aws
  connector.class          | HttpSourceV2
  http.api.base.url        | https://environment.data.gov.uk/flood-monitoring
  kafka.api.key            | <span style="color: #66d9ef;font-weight: bold">****************</span>
  kafka.api.secret         | <span style="color: #66d9ef;font-weight: bold">****************</span>
  kafka.endpoint           | SASL_SSL://pkc-rgm37.us-west-2.aws.confluent.cloud:9092
  kafka.region             | us-west-2
  name                     | env-agency--flood-monitoring-stations
  output.data.format       | AVRO
  tasks.max                | 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>For brevity, you can ask the Confluent CLI to return JSON that you then filter with jq:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">confluent connect cluster describe lcc-r19wjk <span style="color: #f92672">--output</span> json | jq <span style="color: #e6db74">&#39;.connector.status&#39;</span>
<span style="color: #e6db74">&#34;RUNNING&#34;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_looking_at_the_data">Looking at the data&nbsp;<a class="headline-hash" href="#_looking_at_the_data">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Based on the above configuration and the fact that the connector is <code>RUNNING</code>, we should hopefully see data written to the <code>flood-monitoring-stations</code> topic.</p>
</div>
<div class="paragraph">
<p>As above, you can use the Confluent CLI, or your own approach for this.
Iâ€™m a big fan of <code>kcat</code> so tend to gravitate towards it, but itâ€™s up to you.</p>
</div>
<div class="paragraph">
<p>Hereâ€™s kcat listing (<code>-L</code>) the topics on my Confluent Cloud Kafka cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-L</span>

Metadata <span style="color: #66d9ef;font-weight: bold">for </span>all topics <span style="color: #f92672;font-weight: bold">(</span>from broker <span style="color: #f92672">-1</span>: sasl_ssl://pkc-rgm37.us-west-2.aws.confluent.cloud:9092/bootstrap<span style="color: #f92672;font-weight: bold">)</span>:
 6 brokers:
  broker 0 at b0-pkc-rgm37.us-west-2.aws.confluent.cloud:9092 <span style="color: #f92672;font-weight: bold">(</span>controller<span style="color: #f92672;font-weight: bold">)</span>
  broker 1 at b1-pkc-rgm37.us-west-2.aws.confluent.cloud:9092
  broker 2 at b2-pkc-rgm37.us-west-2.aws.confluent.cloud:9092
  broker 3 at b3-pkc-rgm37.us-west-2.aws.confluent.cloud:9092
  broker 4 at b4-pkc-rgm37.us-west-2.aws.confluent.cloud:9092
  broker 5 at b5-pkc-rgm37.us-west-2.aws.confluent.cloud:9092
 2 topics:
  topic <span style="color: #e6db74">&#34;error-lcc-r19wjk&#34;</span> with 1 partitions:
    partition 0, leader 4, replicas: 4,2,0, isrs: 4,2,0
  topic <span style="color: #e6db74">&#34;flood-monitoring-stations&#34;</span> with 1 partitions:
    partition 0, leader 2, replicas: 2,4,0, isrs: 2,4,0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Doing the same with Confluent CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent kafka topic list
              Name              | Internal | Replication Factor | Partition Count
<span style="color: #f92672">--------------------------------</span>+----------+--------------------+------------------
  error-lcc-r19wjk              | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  flood-monitoring-stations     | <span style="color: #f8f8f2">false</span>    |                  3 |               1</code></pre>
</div>
</div>
<div class="paragraph">
<p>To query the topic, bearing in mind that itâ€™s serialised with Avro and so we need the Schema Registry too, Iâ€™m using kcat.
Here is how to read (<code>-C</code>) a single message (<code>-c1</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-stations <span style="color: #f92672">-c1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It turns out the payload is hugeâ€”more than will fit on a terminal to inspect.
We can use the Linux tool <code>wc</code> to see quite how big it is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-stations <span style="color: #f92672">-c1</span> | <span style="color: #f8f8f2">wc</span> <span style="color: #f92672">--bytes</span>

5002406</code></pre>
</div>
</div>
<div class="paragraph">
<p>Huhâ€”4.77 MB! Weâ€™re gonna need a bigger monitor ;)</p>
</div>
<div class="paragraph">
<p>Letâ€™s look at the payload structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-stations <span style="color: #f92672">-c1</span> | jq <span style="color: #e6db74">&#39;keys&#39;</span>

<span style="color: #f92672;font-weight: bold">[</span>
  <span style="color: #e6db74">&#34;_40context&#34;</span>,
  <span style="color: #e6db74">&#34;items&#34;</span>,
  <span style="color: #e6db74">&#34;meta&#34;</span>
<span style="color: #f92672;font-weight: bold">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the <a href="https://environment.data.gov.uk/flood-monitoring/doc/reference">source APIâ€™s documentation</a> we know <code>items</code> is an array, so letâ€™s inspect on element of it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-stations <span style="color: #f92672">-c1</span> | jq <span style="color: #e6db74">&#39;.items[1]&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">_40id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/id/stations/E2043</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">RLOIid</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">6022</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">catchmentName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Welland</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">dateOpened</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">int</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">8035</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">easting</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">528000</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">label</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Surfleet Sluice</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #960050;background-color: #1e0010">â€¦</span><span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This all looks good.
Weâ€™re going to about adding the other two endpoints into this connector.
But firstâ€”letâ€™s tidy up after ourselves and remove this version of the connector.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deleting_a_managed_connector_on_confluent_cloud">Deleting a managed connector on Confluent Cloud&nbsp;<a class="headline-hash" href="#_deleting_a_managed_connector_on_confluent_cloud">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>My brain likes working with well-designed APIs and the HTTP vocabulary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You <code>PUT</code> a <code>/config</code></p>
</li>
<li>
<p>You <code>GET</code> a <code>/status</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To list the connectors that have been created? Itâ€™s a <a href="https://docs.confluent.io/cloud/current/api.html#tag/Connectors-(connectv1)/operation/listConnectv1Connectors"><code>GET</code> against <code>/connectors</code></a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>http GET <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span> <span style="color: #f92672">-b</span>

<span style="color: #f92672;font-weight: bold">[</span>
    <span style="color: #e6db74">&#34;foo&#34;</span>,
    <span style="color: #e6db74">&#34;env-agency--flood-monitoring-stations&#34;</span>,
    <span style="color: #e6db74">&#34;flood-monitoring&#34;</span>,
    <span style="color: #e6db74">&#34;test&#34;</span>
<span style="color: #f92672;font-weight: bold">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>So you can pretty much guess the Confluent Cloud REST API for deleting a connectorâ€”you <a href="https://docs.confluent.io/cloud/current/api.html#tag/Connectors-(connectv1)/operation/deleteConnectv1Connector"><code>DELETE</code> a <code>$connector-name</code></a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>http DELETE <span style="color: #ae81ff">\</span>
    <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring-stations&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span>

HTTP/1.1 200 OK</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As discussed above, we could <code>PUT</code> the new config to this connector instead of deleting and recreating it, but I want to use a new nameâ€”plus this gives me an excuse to illustrate the <code>DELETE</code> endpoint :)
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_http_source_connector_for_multiple_api_endpoints">Creating an HTTP Source connector for multiple API endpoints&nbsp;<a class="headline-hash" href="#_creating_an_http_source_connector_for_multiple_api_endpoints">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>The HTTP source (v2) connector supports ingesting data with a single connector from <em>multiple API endpoints</em> with the same base URL.
Our endpoints here are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://environment.data.gov.uk/flood-monitoring/doc/reference#stations"><code>/id/stations</code></a> (as above)</p>
</li>
<li>
<p><a href="https://environment.data.gov.uk/flood-monitoring/doc/reference#measures"><code>/id/measures</code></a></p>
</li>
<li>
<p><a href="https://environment.data.gov.uk/flood-monitoring/doc/reference#readings"><code>/data/readings?latest</code></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The core parts of configuration stay as they were, but we now add in <code>api2</code> and <code>api3</code> configuration.
We also need to define <code>apis.num</code> since itâ€™s now greater than the default of one.
In the example below Iâ€™ve added in additional line breaks so that you can see the relevant groupings of the configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http PUT <span style="color: #ae81ff">\</span>
    <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring/config&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span> <span style="color: #ae81ff">\</span>
    content-type:application/json <span style="color: #ae81ff">\</span>
    connector.class<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;HttpSourceV2&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f8f8f2">name</span><span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #ae81ff">\</span>
    http.api.base.url<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;https://environment.data.gov.uk/flood-monitoring&#34;</span> <span style="color: #ae81ff">\</span>
    apis.num<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;3&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.api.path<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;/id/stations&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.offset.mode<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;SIMPLE_INCREMENTING&#34;</span> <span style="color: #ae81ff">\</span>
    api1.http.initial.offset<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;0&#34;</span> <span style="color: #ae81ff">\</span>
    api1.request.interval.ms<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;3600000&#34;</span> <span style="color: #ae81ff">\</span>
    api1.topics<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;flood-monitoring-stations&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #ae81ff">\</span>
    api2.http.api.path<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;/id/measures&#34;</span> <span style="color: #ae81ff">\</span>
    api2.http.offset.mode<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;SIMPLE_INCREMENTING&#34;</span> <span style="color: #ae81ff">\</span>
    api2.http.initial.offset<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;0&#34;</span> <span style="color: #ae81ff">\</span>
    api2.request.interval.ms<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;3600000&#34;</span> <span style="color: #ae81ff">\</span>
    api2.topics<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;flood-monitoring-measures&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #ae81ff">\</span>
    api3.http.api.path<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;/data/readings?latest&#34;</span> <span style="color: #ae81ff">\</span>
    api3.http.offset.mode<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;SIMPLE_INCREMENTING&#34;</span> <span style="color: #ae81ff">\</span>
    api3.http.initial.offset<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;0&#34;</span> <span style="color: #ae81ff">\</span>
    api3.request.interval.ms<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;900000&#34;</span> <span style="color: #ae81ff">\</span>
    api3.topics<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;flood-monitoring-readings&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #ae81ff">\</span>
    kafka.api.key<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #ae81ff">\</span>
    kafka.api.secret<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    output.data.format<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;AVRO&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #ae81ff">\</span>
    tasks.max<span style="color: #f92672;font-weight: bold">=</span><span style="color: #e6db74">&#34;3&#34;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to run your connector with more than one task (<code>tasks.max</code>), your <a href="https://docs.confluent.io/cloud/current/clusters/cluster-types.html#cluster-types">Confluent Cloud cluster type</a> needs to be bigger than basic.
If itâ€™s not, youâ€™ll get this message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>Failed to Claim the tasks requested: Failed to claim the task requested:
Max 1 task(s) allowed per connector with basic cluster type.
To use more than 1 task(s), please upgrade your cluster type from basic to standard.</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Letâ€™s check the status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">http GET <span style="color: #e6db74">&#34;https://api.confluent.cloud/connect/v1/environments/</span><span style="color: #f8f8f2">$CNFL_ENV</span><span style="color: #e6db74">/clusters/</span><span style="color: #f8f8f2">$CNFL_KAFKA_CLUSTER</span><span style="color: #e6db74">/connectors/env-agency--flood-monitoring/status&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--auth</span> <span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_KEY</span><span style="color: #e6db74">:</span><span style="color: #f8f8f2">$CNFL_CLOUD_API_SECRET</span><span style="color: #e6db74">&#34;</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">--print</span> b | jq <span style="color: #e6db74">&#39;.tasks[]&#39;</span>
<span style="color: #f92672;font-weight: bold">{</span>
  <span style="color: #e6db74">&#34;id&#34;</span>: 0,
  <span style="color: #e6db74">&#34;state&#34;</span>: <span style="color: #e6db74">&#34;RUNNING&#34;</span>,
  <span style="color: #e6db74">&#34;worker_id&#34;</span>: <span style="color: #e6db74">&#34;env-agency--flood-monitoring&#34;</span>,
  <span style="color: #e6db74">&#34;msg&#34;</span>: <span style="color: #e6db74">&#34;&#34;</span>
<span style="color: #f92672;font-weight: bold">}</span>
<span style="color: #f92672;font-weight: bold">{</span>
  <span style="color: #e6db74">&#34;id&#34;</span>: 1,
  <span style="color: #e6db74">&#34;state&#34;</span>: <span style="color: #e6db74">&#34;RUNNING&#34;</span>,
  <span style="color: #e6db74">&#34;worker_id&#34;</span>: <span style="color: #e6db74">&#34;env-agency--flood-monitoring&#34;</span>,
  <span style="color: #e6db74">&#34;msg&#34;</span>: <span style="color: #e6db74">&#34;&#34;</span>
<span style="color: #f92672;font-weight: bold">}</span>
<span style="color: #f92672;font-weight: bold">{</span>
  <span style="color: #e6db74">&#34;id&#34;</span>: 2,
  <span style="color: #e6db74">&#34;state&#34;</span>: <span style="color: #e6db74">&#34;RUNNING&#34;</span>,
  <span style="color: #e6db74">&#34;worker_id&#34;</span>: <span style="color: #e6db74">&#34;env-agency--flood-monitoring&#34;</span>,
  <span style="color: #e6db74">&#34;msg&#34;</span>: <span style="color: #e6db74">&#34;&#34;</span>
<span style="color: #f92672;font-weight: bold">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Three tasks, all up and running :)</p>
</div>
<div class="paragraph">
<p>What about the data?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>confluent kafka topic list
            Name            | Internal | Replication Factor | Partition Count
<span style="color: #f92672">----------------------------</span>+----------+--------------------+------------------
  error-lcc-3mpv1j          | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  error-lcc-5nx9on          | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  error-lcc-5nxknn          | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  flood-monitoring-measures | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  flood-monitoring-readings | <span style="color: #f8f8f2">false</span>    |                  3 |               1
  flood-monitoring-stations | <span style="color: #f8f8f2">false</span>    |                  3 |               1</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Measures:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-measures <span style="color: #f92672">-c1</span> | jq <span style="color: #e6db74">&#39;.items[1]&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">_40id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/id/measures/1029TH-level-stage-i-15_min-mASD</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">datumType</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/def/core/datumASD</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">label</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">RIVER DIKLER AT BOURTON ON THE WATER - level-stage-i-15_min-mASD</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #960050;background-color: #1e0010">â€¦</span><span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
</li>
<li>
<p>Stations:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-stations <span style="color: #f92672">-c1</span> | jq <span style="color: #e6db74">&#39;.items[1]&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">_40id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/id/stations/E2043</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">RLOIid</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">6022</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">catchmentName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Welland</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">dateOpened</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">int</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">8035</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">easting</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">528000</span><span style="color: #e6db74">&#34;</span>
  <span style="color: #f8f8f2;background-color: #49483e">},</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">label</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Surfleet Sluice</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #960050;background-color: #1e0010">â€¦</span><span style="color: #f8f8f2;background-color: #49483e">]</span></code></pre>
</div>
</div>
</li>
<li>
<p>Readings:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>kcat <span style="color: #f92672">-q</span> <span style="color: #f92672">-b</span> <span style="color: #f8f8f2">$CNFL_KAFKA_BROKER</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> security.protocol<span style="color: #f92672;font-weight: bold">=</span>sasl_ssl <span style="color: #f92672">-X</span> sasl.mechanisms<span style="color: #f92672;font-weight: bold">=</span>PLAIN <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-X</span> sasl.username<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_KEY</span> <span style="color: #f92672">-X</span> sasl.password<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f8f8f2">$CNFL_KC_API_SECRET</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-s</span> avro <span style="color: #f92672">-r</span> https://<span style="color: #f8f8f2">$CNFL_SR_API_KEY</span>:<span style="color: #f8f8f2">$CNFL_SR_API_SECRET</span>@<span style="color: #f8f8f2">$CNFL_SR_HOST</span> <span style="color: #ae81ff">\</span>
    <span style="color: #f92672">-C</span> <span style="color: #f92672">-t</span> flood-monitoring-readings <span style="color: #f92672">-c1</span> | jq <span style="color: #e6db74">&#39;.items[1]&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">_40id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/data/readings/5312TH-level-stage-i-15_min-mASD/2025-02-21T13-45-00Z</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">dateTime</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">1740145500000</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">measure</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">http://environment.data.gov.uk/flood-monitoring/id/measures/5312TH-level-stage-i-15_min-mASD</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">value</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">22.664999999999999</span>
<span style="color: #f8f8f2;background-color: #49483e">}</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>

	<hr>
	<div class="giscus-container">
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
	</div>
</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">On this page</a></li>
        </ul>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#_setup">Setup</a></li>
    <li><a href="#_api_keys">API Keys</a></li>
    <li><a href="#_the_confluent_cloud_api">The Confluent Cloud API</a></li>
    <li><a href="#_create_an_http_source_connector_for_a_single_endpoint">Create an HTTP Source connector for a single endpoint</a></li>
    <li><a href="#_checking_the_status_of_a_connector">Checking the status of a connector</a></li>
    <li><a href="#_looking_at_the_data">Looking at the data</a></li>
    <li><a href="#_deleting_a_managed_connector_on_confluent_cloud">Deleting a managed connector on Confluent Cloud</a></li>
    <li><a href="#_creating_an_http_source_connector_for_multiple_api_endpoints">Creating an HTTP Source connector for multiple API endpoints</a></li>
  </ul>
</nav>
      </div>
      
    
    </div>
  </div>
</div>


		</main>

		

		
		<footer class="site-footer hide-print" role="contentinfo">
			<span>&copy; 2026 </span>
		</footer>
		

		
	</body>
</html>
