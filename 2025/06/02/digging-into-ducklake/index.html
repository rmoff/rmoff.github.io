<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Digging into Ducklake</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2025/06/02/digging-into-ducklake/">
		
		<script src="/js/copy-code.js"></script>
		
		
		
		

		
		<meta property="og:title" content="Digging into Ducklake" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2025/06/h_IMG_0273.webp" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2025/06/02/digging-into-ducklake/" />
		<meta property="og:site_name" content="Digging into Ducklake" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		
		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only' 
                })
		</script>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-post page-kind-page is-page-true ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/images/2025/06/h_IMG_0273.webp'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net" title="Home">
						<img src="https://rmoff.net/img/logo.jpg" class="w2 h2 br-100" alt="rmoff&#39;s random ramblings" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://bsky.app/profile/rmoff.net"><i class="fa-brands fa-bluesky"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">Digging into Ducklake</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
								Published
								<time datetime="2025-06-02T14:26:15Z">Jun 2, 2025</time>
								<span class="display-print">by </span>
								 in <a href="https://rmoff.net/categories/duckdb" class="no-underline category near-white dim">DuckDB</a>, <a href="https://rmoff.net/categories/ducklake" class="no-underline category near-white dim">Ducklake</a>
								<span class="display-print">at https://rmoff.net/2025/06/02/digging-into-ducklake/</span>
							
						
					</h2>
				</div>

				
				
				
				<div class="w-100 cf hide-print">
					<a class="fr f6 ma0 pa2 link white-50 dim fas fa-camera" href="https://bsky.app/profile/rmoff.net" title="Photo Credit"></a>
				</div>
				
				

			</div>
		</header>
		
		<main role="main">
		
<article class="center bg-white br-3 pv1 ph4 lh-copy f5 nested-links mw8">
	<div class="paragraph">
<p>After a week’s holiday (&#34;vacation&#34;, for y’all in the US) without a glance at anything work-related, what joy to return and find that the DuckDB folk have been busy, not only with <a href="https://duckdb.org/2025/05/21/announcing-duckdb-130.html">the recent 1.3.0 DuckDB release</a>, but also a brand new project called <a href="https://github.com/duckdb/ducklake">DuckLake</a>.</p>
</div>
<div class="paragraph">
<p>Here are my brief notes on DuckLake.</p>
</div>
<div class="sect1">
<h2 id="_getting_our_ducks_in_a_row">Getting our ducks in a row&nbsp;<a class="headline-hash" href="#_getting_our_ducks_in_a_row">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s be clear: Naming things is hard.
Even so, the DuckLake name is confusing because it implies a tight-coupling to DuckDB where there is none (other than the ownership of the project).</p>
</div>
<div class="paragraph">
<p><strong>DuckLake in its most abstract form is a <a href="https://ducklake.select/docs/stable/specification/introduction.html"><em>specification</em></a> for a way to store and catalog data.</strong></p>
</div>
<div class="paragraph">
<p>An implementation of that specification is available in <a href="https://ducklake.select/docs/stable/duckdb/introduction">a DuckDB extension</a>, but in theory any engine could support it.</p>
</div>
<div class="paragraph">
<p>In this blog post, unless I say otherwise I’m going to be talking about DuckLake the specification.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ok_so_what_is_ducklake">OK, so what <em>is</em> DuckLake?&nbsp;<a class="headline-hash" href="#_ok_so_what_is_ducklake">🔗</a> </h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Where does this fit in my data engineering toolbox?</div>
<div class="paragraph">
<p>Conceptually, <strong>DuckLake is an open table format (OTF) <em>plus</em> a catalog</strong>.</p>
</div>
<div class="paragraph">
<p>So it’s (<strong>Iceberg + Polaris</strong>), it’s (<strong>Delta Lake + Unity</strong>), etc.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Physically, DuckLake is data stored as parquet files on object storage, and metadata about those files held in a SQL database.
Storing the metadata in a SQL database is a core design decision.
It means that you don’t need a catalog (because the metadata store <em>becomes</em> the catalog), as well as resulting in various performance improvements and the removal of metadata file compaction requirements.</p>
</div>
<div class="paragraph">
<p>👉 <a href="https://ducklake.select/manifesto/">The DuckLake manifesto</a> does a good job of outlining the current state of OTFs and challenges, and positioning DuckLake within that.</p>
</div>
<div class="paragraph">
<p>One bit that caught my eye was the nascent support for <a href="https://ducklake.select/docs/stable/duckdb/advanced_features/data_inlining.html">inlined data updates</a>, in which the SQL database (currently only DuckDB itself) is also used to hold small bits of data (imagine that! in a database!) instead of directly writing individual changes to a parquet file.</p>
</div>
<div class="sect2">
<h3 id="_dlf_vs_otfwtf">DLF vs OTF—WTF?&nbsp;<a class="headline-hash" href="#_dlf_vs_otfwtf">🔗</a> </h3>
<div class="paragraph">
<p>The last few years in data engineering have been marked by numerous explainers on Open Table Formats (OTF), such that we’re fairly comfortable with what they are now.</p>
</div>
<div class="paragraph">
<p>DuckLake rips this back open, by introducing the &#34;Data Lakehouse Format&#34; (DLF) term.</p>
</div>
<div class="paragraph">
<p>It makes sense because DuckLake isn’t [just] a open table format, because it bundles the catalog too.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sounds_complicated_isnt_this_just_more_moving_parts">Sounds complicated. Isn’t this just more moving parts?&nbsp;<a class="headline-hash" href="#_sounds_complicated_isnt_this_just_more_moving_parts">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Yes, but no.</p>
</div>
<div class="paragraph">
<p>If you’re using an OTF (Iceberg/Delta Lake/Hudi) for any kind of task beyond a local sandbox and a single user, you’ll need a catalog.
DuckLake just wraps these two things together.</p>
</div>
<div class="paragraph">
<p>Instead of managing object storage + catalog, you manage object storage + SQL database.</p>
</div>
<div class="paragraph">
<p>Looking at it this way, it’s actually a better option from an operations point of view; catalogs are relatively new technology, whilst DBAs have been feeding and watering SQL databases for decades.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relationship_to_motherduck">Relationship to Motherduck&nbsp;<a class="headline-hash" href="#_relationship_to_motherduck">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Motherduck wrote <a href="https://motherduck.com/blog/ducklake-motherduck/">a blog post about DuckLake</a> with their own take on the manifesto and positioning of DuckLake.
They’re offering to provide the SQL catalog for DuckLake along with the data storage too, optionally.
They’ll also do the housekeeping on the data files—remember, even if the <em>metadata</em> files are now in a SQL catalog, there could still be potentially the problem of small <em>data</em> files that need compacting in order for optimal performance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_about_iceberg">What about Iceberg?&nbsp;<a class="headline-hash" href="#_what_about_iceberg">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>DuckDB’s lack of comprehensive support for Iceberg has been notable for a while, and DuckLake doesn’t do anything to fix that unfortunately.</p>
</div>
<div class="paragraph">
<p>DuckLake and Iceberg are completely unrelated in terms of interaction.
If you use Iceberg, you use Iceberg.
DuckLake would replace Iceberg (plus its catalog).</p>
</div>
<div class="paragraph">
<p>In the above blog post, Motherduck position DuckLake as <a href="https://motherduck.com/blog/ducklake-motherduck/#the-iceberg-hedge">a &#34;hedge&#34; against problems with Iceberg</a>, saying that DuckLake has planned support for import and export to Iceberg.
To me this is pretty ironic; why would you adopt a technology that’s entirely unproven and states that it’s not production ready, over one which is being widely adopted and successfully used in scale at production for several years?
That’s not to say Iceberg doesn’t have its challenges and maybe one day will be a distant memory as DuckLake takes over the world—but the &#39;hedge&#39; argument today is somewhat flawed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_governance">Governance&nbsp;<a class="headline-hash" href="#_governance">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>All the OTFs, and the &#34;DLF&#34; DuckLake are open source licenced.
Licensing is just one element of &#34;open&#34; to consider though; the other is how the project is <em>governed</em>.
This can impact how easy it is to submit bug fixes, add new features, or even make breaking changes.</p>
</div>
<div class="paragraph">
<p>Apache Iceberg and Apache Hudi are governed by the Apache Software Foundation.
Changes and developments are managed by the PMC, made up of contributors from different companies.</p>
</div>
<div class="paragraph">
<p>Delta Lake is owned by the Linux Foundation, but in practice is a Databricks project.</p>
</div>
<div class="paragraph">
<p>DuckLake is owned by the <a href="https://duckdb.org/foundation/">DuckDB Foundation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sounds_fun_lets_try_it">Sounds fun, let’s try it!&nbsp;<a class="headline-hash" href="#_sounds_fun_lets_try_it">🔗</a> </h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be aware that DuckLake’s <a href="https://ducklake.select/faq#ducklake-in-operation">not recommended for production use yet</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>At the moment the only implementation of DuckLake is in the form of an extension for DuckDB.
There are some good examples at the end of <a href="https://duckdb.org/2025/05/27/ducklake.html">the DuckLake announcement blog</a> of its use.</p>
</div>
<div class="paragraph">
<p>I put together <a href="https://github.com/rmoff/examples/blob/main/ducklake/docker-compose.yml">a Docker Compose</a> to run DuckDB (DuckLake engine) and Postgres (metadata catalog) together, using local file system for data.</p>
</div>
<div class="paragraph">
<p>First off, install the DuckLake and Postgres extensions in DuckDB:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">INSTALL</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake</span><span style="color: #f8f8f2;background-color: #49483e">;</span>
<span style="color: #f8f8f2;background-color: #49483e">INSTALL</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span><span style="color: #f8f8f2;background-color: #49483e">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then create a DuckLake database using Postgres for metadata and local filesystem (<code>/data</code>) for the data files.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">ATTACH</span> <span style="color: #e6db74">&#39;ducklake:postgres:dbname=postgres host=postgres user=postgres password=Welcome123&#39;</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">my_ducklake</span>
    <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">DATA_PATH</span> <span style="color: #e6db74">&#39;/data/&#39;</span><span style="color: #f8f8f2;background-color: #49483e">);</span>

<span style="color: #f8f8f2;background-color: #49483e">USE</span> <span style="color: #f8f8f2;background-color: #49483e">my_ducklake</span><span style="color: #f8f8f2;background-color: #49483e">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now create a table and add some data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #960050;background-color: #1e0010">🟡◗</span> <span style="color: #66d9ef;font-weight: bold">CREATE</span> <span style="color: #66d9ef;font-weight: bold">TABLE</span> <span style="color: #f8f8f2;background-color: #49483e">test_data</span> <span style="color: #f8f8f2;background-color: #49483e">(</span>
      <span style="color: #f8f8f2;background-color: #49483e">id</span> <span style="color: #f8f8f2">INTEGER</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">name</span> <span style="color: #f8f8f2">VARCHAR</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">email</span> <span style="color: #f8f8f2">VARCHAR</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">age</span> <span style="color: #f8f8f2">INTEGER</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">registration_date</span> <span style="color: #f8f8f2">DATE</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">score</span> <span style="color: #f8f8f2">DOUBLE</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
      <span style="color: #f8f8f2;background-color: #49483e">is_active</span> <span style="color: #f8f8f2">BOOLEAN</span>
  <span style="color: #f8f8f2;background-color: #49483e">);</span>

<span style="color: #960050;background-color: #1e0010">🟡◗</span> <span style="color: #66d9ef;font-weight: bold">INSERT</span> <span style="color: #66d9ef;font-weight: bold">INTO</span> <span style="color: #f8f8f2;background-color: #49483e">test_data</span>
  <span style="color: #66d9ef;font-weight: bold">WITH</span> <span style="color: #f8f8f2;background-color: #49483e">generated_data</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">(</span>
      <span style="color: #66d9ef;font-weight: bold">SELECT</span>
          <span style="color: #f8f8f2;background-color: #49483e">row_number</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f8f8f2;background-color: #49483e">OVER</span> <span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">id</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #e6db74">&#39;User_&#39;</span> <span style="color: #f92672;font-weight: bold">||</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">row_number</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f8f8f2;background-color: #49483e">OVER</span> <span style="color: #f8f8f2;background-color: #49483e">())::</span><span style="color: #f8f8f2">VARCHAR</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">name</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #e6db74">&#39;user&#39;</span> <span style="color: #f92672;font-weight: bold">||</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">row_number</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f8f8f2;background-color: #49483e">OVER</span> <span style="color: #f8f8f2;background-color: #49483e">())::</span><span style="color: #f8f8f2">VARCHAR</span> <span style="color: #f92672;font-weight: bold">||</span> <span style="color: #e6db74">&#39;@example.com&#39;</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">email</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #ae81ff">18</span> <span style="color: #f92672;font-weight: bold">+</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">random</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #ae81ff">50</span><span style="color: #f8f8f2;background-color: #49483e">)::</span><span style="color: #f8f8f2">INTEGER</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">age</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #f8f8f2">DATE</span> <span style="color: #e6db74">&#39;2024-01-01&#39;</span> <span style="color: #f92672;font-weight: bold">+</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">random</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #ae81ff">365</span><span style="color: #f8f8f2;background-color: #49483e">)::</span><span style="color: #f8f8f2">INTEGER</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">registration_date</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #f8f8f2;background-color: #49483e">round</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #f8f8f2;background-color: #49483e">random</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #ae81ff">100</span><span style="color: #f8f8f2;background-color: #49483e">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2;background-color: #49483e">)</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">score</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
          <span style="color: #f8f8f2;background-color: #49483e">random</span><span style="color: #f8f8f2;background-color: #49483e">()</span> <span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #ae81ff">3</span> <span style="color: #66d9ef;font-weight: bold">AS</span> <span style="color: #f8f8f2;background-color: #49483e">is_active</span>
      <span style="color: #66d9ef;font-weight: bold">FROM</span> <span style="color: #66d9ef;font-weight: bold">range</span><span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">1000</span><span style="color: #f8f8f2;background-color: #49483e">)</span>
  <span style="color: #f8f8f2;background-color: #49483e">)</span>
  <span style="color: #66d9ef;font-weight: bold">SELECT</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #66d9ef;font-weight: bold">FROM</span> <span style="color: #f8f8f2;background-color: #49483e">generated_data</span><span style="color: #f8f8f2;background-color: #49483e">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code>🟡◗ SELECT COUNT(*) FROM test_data;
┌──────────────┐
│ count_star() │
│    int64     │
├──────────────┤
│     1000     │
└──────────────┘

🟡◗ SELECT * FROM test_data LIMIT 1;
┌───────┬─────────┬────────────────────┬───────┬───────────────────┬────────┬───────────┐
│  id   │  name   │       email        │  age  │ registration_date │ score  │ is_active │
│ int32 │ varchar │      varchar       │ int32 │       date        │ double │  boolean  │
├───────┼─────────┼────────────────────┼───────┼───────────────────┼────────┼───────────┤
│     1 │ User_1  │ user1@example.com  │    64 │ 2024-09-10        │   4.29 │ false     │
├───────┴─────────┴────────────────────┴───────┴───────────────────┴────────┴───────────┤
│ 1 row                                                                       7 columns │
└───────────────────────────────────────────────────────────────────────────────────────┘</code></pre>
</div>
</div>
<div class="paragraph">
<p>Over in Postgres is the metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">postgres</span><span style="color: #f92672;font-weight: bold">=#</span> <span style="color: #960050;background-color: #1e0010">\</span><span style="color: #f8f8f2;background-color: #49483e">dt</span>
                         <span style="color: #f8f8f2;background-color: #49483e">List</span> <span style="color: #66d9ef;font-weight: bold">of</span> <span style="color: #f8f8f2;background-color: #49483e">relations</span>
 <span style="color: #66d9ef;font-weight: bold">Schema</span> <span style="color: #f92672;font-weight: bold">|</span>                 <span style="color: #f8f8f2;background-color: #49483e">Name</span>                  <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">Type</span>  <span style="color: #f92672;font-weight: bold">|</span>  <span style="color: #66d9ef;font-weight: bold">Owner</span>
<span style="color: #75715e;font-style: italic">--------+---------------------------------------+-------+----------</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_column</span>                       <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_column_tag</span>                   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_data_file</span>                    <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_delete_file</span>                  <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_file_column_statistics</span>       <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_file_partition_value</span>         <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_files_scheduled_for_deletion</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_inlined_data_tables</span>          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_metadata</span>                     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_partition_column</span>             <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_partition_info</span>               <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_schema</span>                       <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_snapshot</span>                     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_snapshot_changes</span>             <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_table</span>                        <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_table_column_stats</span>           <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_table_stats</span>                  <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_tag</span>                          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
 <span style="color: #66d9ef;font-weight: bold">public</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_view</span>                         <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">postgres</span>
<span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">19</span> <span style="color: #66d9ef;font-weight: bold">rows</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Including the table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">postgres</span><span style="color: #f92672;font-weight: bold">=#</span> <span style="color: #66d9ef;font-weight: bold">select</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #66d9ef;font-weight: bold">from</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_table</span><span style="color: #f8f8f2;background-color: #49483e">;</span>
 <span style="color: #f8f8f2;background-color: #49483e">table_id</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #f8f8f2;background-color: #49483e">table_uuid</span>              <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">begin_snapshot</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">end_snapshot</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">schema_id</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">table_name</span>
<span style="color: #75715e;font-style: italic">----------+--------------------------------------+----------------+--------------+-----------+------------</span>
        <span style="color: #ae81ff">1</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #ae81ff">0197314</span><span style="color: #f8f8f2;background-color: #49483e">e</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">9389</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">7111</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">a705</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2;background-color: #49483e">f8341df299c</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #ae81ff">1</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #f92672;font-weight: bold">|</span>         <span style="color: #ae81ff">0</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">test_data</span>
<span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">1</span> <span style="color: #66d9ef;font-weight: bold">row</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and information about the data file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">postgres</span><span style="color: #f92672;font-weight: bold">=#</span> <span style="color: #66d9ef;font-weight: bold">select</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #66d9ef;font-weight: bold">from</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake_data_file</span><span style="color: #f8f8f2;background-color: #49483e">;</span>
 <span style="color: #f8f8f2;background-color: #49483e">data_file_id</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">table_id</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">begin_snapshot</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">end_snapshot</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">file_order</span> <span style="color: #f92672;font-weight: bold">|</span>                         <span style="color: #f8f8f2;background-color: #49483e">path</span>                          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">path_is_relative</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">file_format</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">record_count</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">file_size_bytes</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">footer_size</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">row_id_start</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">partition_id</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">encryption_key</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">partial_file_info</span>
<span style="color: #75715e;font-style: italic">--------------+----------+----------------+--------------+------------+-------------------------------------------------------+------------------+-------------+--------------+-----------------+-------------+--------------+--------------+----------------+-------------------</span>
            <span style="color: #ae81ff">0</span> <span style="color: #f92672;font-weight: bold">|</span>        <span style="color: #ae81ff">1</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #ae81ff">2</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #f92672;font-weight: bold">|</span>            <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">ducklake</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">0197314</span><span style="color: #f8f8f2;background-color: #49483e">e</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">c237</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">7</span><span style="color: #f8f8f2;background-color: #49483e">e2d</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">9</span><span style="color: #f8f8f2;background-color: #49483e">aee</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2;background-color: #49483e">a954d82401e</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #f8f8f2;background-color: #49483e">parquet</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">t</span>                <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">parquet</span>     <span style="color: #f92672;font-weight: bold">|</span>         <span style="color: #ae81ff">1000</span> <span style="color: #f92672;font-weight: bold">|</span>           <span style="color: #ae81ff">36279</span> <span style="color: #f92672;font-weight: bold">|</span>         <span style="color: #ae81ff">809</span> <span style="color: #f92672;font-weight: bold">|</span>            <span style="color: #ae81ff">0</span> <span style="color: #f92672;font-weight: bold">|</span>              <span style="color: #f92672;font-weight: bold">|</span>                <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">1</span> <span style="color: #66d9ef;font-weight: bold">row</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This corresponds to the data file on disk on the DuckDB container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">docker compose <span style="color: #f8f8f2">exec</span> <span style="color: #f92672">-it</span> duckdb <span style="color: #f8f8f2">ls</span> <span style="color: #f92672">-l</span> /data
total 36
<span style="color: #f92672">-rw-r--r--</span> 1 root root 36279 Jun  2 15:42 ducklake-0197314e-c237-7e2d-9aee-6a954d82401e.parquet</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_watch_this_space">Watch this space&nbsp;<a class="headline-hash" href="#_watch_this_space">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>I can see three posibilities for DuckLake:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It thrives, but only really in the DuckDB world.
Having a way to store data with multi-user access is a pretty nice idea, and I can see folk building some good data platforms around DuckDB and DuckLake.</p>
</li>
<li>
<p>It finds limited adoption, perhaps amongst Motherduck customers who want a fully-hosted service.</p>
</li>
<li>
<p>It gains broader adoption outside of the DuckDB ecosystem.
For this there’d need to be some serious implementations of it in popular engines so that it’s not just the DuckDB fan club who use it.
For example, with JDBC support in DuckDB there are some <a href="https://github.com/duckdb/ducklake/issues/78">workarounds to access DuckLake from Spark</a>, but it needs to be first-class support in Spark, Trino, etc.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_reading">More reading&nbsp;<a class="headline-hash" href="#_more_reading">🔗</a> </h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://ducklake.select/faq">DuckLake FAQ</a></p>
</li>
<li>
<p>Running <a href="https://tobilg.com/the-age-of-10-dollar-a-month-lakehouses">DuckLake on Cloudflare</a></p>
</li>
<li>
<p>Join the <code>#ducklake</code> channel on the <a href="https://discord.duckdb.org/">DuckDB Discord server</a></p>
</li>
<li>
<p>ElReg</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.theregister.com/2025/05/28/duckdb_flips_lakehouse_model_with/">DuckDB flips lakehouse model with bring-your-own compute and metadata RDBMS</a></p>
</li>
<li>
<p><a href="https://www.theregister.com/2025/06/05/ducklake_db_industry_reacts/">Industry reacts to DuckDB’s radical rethink of Lakehouse architecture</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
			
				
					<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://bsky.app/profile/rmoff.net"><b class="fa-brands fa-bluesky"></b></a>  <em>Robin Moffatt works on the DevRel team at Confluent. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

				
			
		
		</div>
		
	</div>

		
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2025 
			</p>
		</footer>
		
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75492960-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	</body>
</html>
