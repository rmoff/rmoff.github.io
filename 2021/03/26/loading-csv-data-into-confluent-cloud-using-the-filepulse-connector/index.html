<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preload" as="image" href="https://rmoff.net/images/2021/03/IMG_9313.jpeg" >
		
		<title>Loading CSV data into Confluent Cloud using the FilePulse connector</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2021/03/26/loading-csv-data-into-confluent-cloud-using-the-filepulse-connector/">
		
		

		
		<meta property="og:title" content="Loading CSV data into Confluent Cloud using the FilePulse connector" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2021/03/IMG_9313.jpeg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2021/03/26/loading-csv-data-into-confluent-cloud-using-the-filepulse-connector/" />
		<meta property="og:site_name" content="Loading CSV data into Confluent Cloud using the FilePulse connector" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<style>
			html { background-color: #FAF8F5; color: #2D2926; }
			body { opacity: 0; transition: opacity 0.1s ease; }
			body.loaded { opacity: 1; }
			.site-header { height: 60px; background-color: #FAF8F5; border-bottom: 1px solid #E8421E; }
		</style>

		
		
		<link rel="stylesheet" href="https://rmoff.net/css/redesign.css" />
		
		<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap">
		<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
		<noscript><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet"></noscript>
		

		
		<script src="/js/copy-code.js"></script>
		

		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only'})
		</script>

		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>
	</head>
	<body class="ma0 section-post page-kind-page is-page-true ">
		<script>document.body.classList.add('loaded');</script>

		<header class="site-header hide-print">
	<div class="site-header-inner">
		<a href="https://rmoff.net/" class="site-title">rmoff's random ramblings</a>
		<nav class="site-nav">
			<a href="/categories/interesting-links/" class="nav-il"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Interesting Links</a>
			<span class="nav-sep"></span>
			<a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg> Categories</a>
			<a href="https://rmoff.net/search/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Search</a>
			<a href="https://rmoff.net/index.xml"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg> RSS</a>
			<div class="nav-social">
				<a href="https://www.linkedin.com/in/robinmoffatt/" title="linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
				<a href="https://twitter.com/rmoff/" title="twitter"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
				<a href="https://bsky.app/profile/rmoff.net" title="bluesky"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 568 501" fill="currentColor"><path d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C10.945 203.659 1 75.291 1 57.946 1-28.906 76.135-1.612 123.121 33.664z"/></svg></a>
				<a href="https://www.youtube.com/c/rmoff" title="youtube"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
				<a href="https://talks.rmoff.net" title="talks"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="0"/><line x1="12" y1="17" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/><polyline points="7 8 12 12 17 8"/></svg></a>
				<a href="https://github.com/rmoff/" title="github"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
			</div>
		</nav>
		<button class="nav-toggle" onclick="document.querySelector('.mobile-nav').classList.toggle('open')" aria-label="Menu">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
		</button>
	</div>
	<nav class="mobile-nav">
		<a href="https://rmoff.net/">Home</a>
		<a href="/categories/">Categories</a>
		<a href="/categories/interesting-links/">Interesting Links</a>
		<a href="https://rmoff.net/search/">Search</a>
		<a href="https://rmoff.net/index.xml">RSS</a>
		<a href="https://www.linkedin.com/in/robinmoffatt/">linkedin</a>
		<a href="https://twitter.com/rmoff/">twitter</a>
		<a href="https://bsky.app/profile/rmoff.net">bluesky</a>
		<a href="https://www.youtube.com/c/rmoff">youtube</a>
		<a href="https://talks.rmoff.net">talks</a>
		<a href="https://github.com/rmoff/">github</a>
	</nav>
</header>


		<main role="main">
		

<div class="article-hero" style="background-image: url('https://rmoff.net/images/2021/03/IMG_9313.jpeg');">
	<div class="article-hero-overlay">
		<div class="article-hero-content">
			<h1>Loading CSV data into Confluent Cloud using the FilePulse connector</h1>
			<p class="article-hero-meta">
				
					<time datetime="2021-03-26T17:25:22Z">26 Mar 2021</time>
					<span class="display-print">by </span>
					 &middot; <a href="https://rmoff.net/categories/confluent-cloud">Confluent Cloud</a>, <a href="https://rmoff.net/categories/kafka-connect">Kafka Connect</a>, <a href="https://rmoff.net/categories/filepulse">FilePulse</a>, <a href="https://rmoff.net/categories/csv">CSV</a>
					<span class="display-print">at https://rmoff.net/2021/03/26/loading-csv-data-into-confluent-cloud-using-the-filepulse-connector/</span>
				
			</p>
		</div>
	</div>
</div>


<details class="toc-mobile">
	<summary>Table of Contents</summary>
	
</details>

<div class="container-fluid docs">
	<div class="row">
		<main class="docs-content" role="main">

<article class="article" data-pagefind-body>
	<span data-pagefind-filter="category" style="display:none">Confluent Cloud</span><span data-pagefind-filter="category" style="display:none">Kafka Connect</span><span data-pagefind-filter="category" style="display:none">FilePulse</span><span data-pagefind-filter="category" style="display:none">CSV</span>
	<img data-pagefind-meta="image[src]" src="https://rmoff.net/images/2021/03/IMG_9313.jpeg" style="display:none" alt="">
	<div class="paragraph">
<p>The <a href="https://www.confluent.io/hub/streamthoughts/kafka-connect-file-pulse?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">FilePulse connector</a> from <a href="https://twitter.com/fhussonnois">Florian Hussonnois</a> is a really useful connector for Kafka Connect which enables you to ingest flat files including CSV, JSON, XML, etc into Kafka. You can read more it in <a href="https://streamthoughts.github.io/kafka-connect-file-pulse/docs/overview/filepulse/">its overview here</a>. Other connectors for ingested CSV data include <a href="https://www.confluent.io/hub/jcustenborder/kafka-connect-spooldir?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">kafka-connect-spooldir</a> (which I <a href="/2020/06/17/loading-csv-data-into-kafka/">wrote about previously</a>), and <a href="https://www.confluent.io/hub/mmolimar/kafka-connect-fs?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">kafka-connect-fs</a>.</p>
</div>
<div class="paragraph">
<p>Here Iâ€™ll show how to use it to stream CSV data into a topic in <a href="https://www.confluent.io/confluent-cloud/tryfree?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">Confluent Cloud</a>. You can apply the same config pattern to any other secured Kafka cluster.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run your Kafka Connect worker. Whilst <a href="https://www.confluent.io/confluent-cloud/tryfree?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">Confluent Cloud</a> offers many different <a href="https://docs.confluent.io/cloud/current/connectors/index.html?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">managed connectors</a> FilePulse isnâ€™t yet available on it so youâ€™ll need to <a href="/2021/01/11/running-a-self-managed-kafka-connect-worker-for-confluent-cloud/">run your own Kafka Connect worker connecting to Confluent Cloud</a> which is what I did here</p>
</li>
<li>
<p>You need to <a href="https://docs.confluent.io/cloud/current/client-apps/topics/manage.html#create-a-topic?utm_source=rmoff&amp;utm_medium=blog&amp;utm_campaign=tm.devx_ch.rmoff_csv-to-ccloud.adoc&amp;utm_term=rmoff-devx">pre-create the topic(s)</a> to which the connector is going to write, <strong>and also</strong> the internal reporting topic that the connector uses.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">ccloud kafka topic create <span style="color: #f92672">--config</span> cleanup.policy<span style="color: #f92672;font-weight: bold">=</span>compact,retention.ms<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f92672">-1</span>,retention.bytes<span style="color: #f92672;font-weight: bold">=</span><span style="color: #f92672">-1</span> connect-file-pulse-status
ccloud kafka topic create target_csv_topic</code></pre>
</div>
</div>
</li>
<li>
<p>Create the connector. This has several points which are worth explaining.</p>
<div class="ulist">
<ul>
<li>
<p>This is what I used to specify a given CSV filename in a given folder:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">fs.scan.filters</span><span style="color: #e6db74">&#34;</span>           <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">io.streamthoughts.kafka.connect.filepulse.scanner.local.filter.RegexFileListFilter</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">fs.scan.directory.path</span><span style="color: #e6db74">&#34;</span>    <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">/data/ingest/locations/</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">fs.scan.interval.ms</span><span style="color: #e6db74">&#34;</span>       <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">10000</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">file.filter.regex.pattern</span><span style="color: #e6db74">&#34;</span> <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">openraildata-talk-carl-partridge-ukrail_locations.csv</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span></code></pre>
</div>
</div>
</li>
<li>
<p>The broker security config needs specifying <strong>in the connector</strong> (not just the worker). The FilePulse connector uses its own topics to hold information about the file ingest (these are different from the topics that the Kafka Connect distributed workers use) and it needs some configuration for the producer and consumer to connect to the Kafka broker. This is prefixed with <code>internal.kafka.reporter</code>. The two standard configuration items are easy enough and apply regardless of whether your Kafka cluster is secured:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.bootstrap.servers</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.topic</span><span style="color: #e6db74">&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But you also need to specify the security config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.producer.security.protocol</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.producer.ssl.endpoint.identification.algorithm</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.producer.sasl.mechanism</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.producer.sasl.jaas.config</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.consumer.security.protocol</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.consumer.ssl.endpoint.identification.algorithm</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.consumer.sasl.mechanism</span><span style="color: #e6db74">&#34;</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">internal.kafka.reporter.consumer.sasl.jaas.config</span><span style="color: #e6db74">&#34;</span></code></pre>
</div>
</div>
</li>
<li>
<p>The connector can infer the schema of the CSV file which is neat. Do this by setting</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.ParseLine.type</span><span style="color: #e6db74">&#34;</span>             <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">io.streamthoughts.kafka.connect.filepulse.filter.DelimitedRowFilter</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.ParseLine.extractColumnName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">headers</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.ParseLine.trimColumn</span><span style="color: #e6db74">&#34;</span>       <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">true</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.ParseLine.separator</span><span style="color: #e6db74">&#34;</span>        <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">,</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span></code></pre>
</div>
</div>
</li>
<li>
<p>You can specify a value from the payload to set as the message key, which is very useful. Here Iâ€™m using the field called <code>location_id</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.setKey.type</span><span style="color: #e6db74">&#34;</span>                <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">io.streamthoughts.kafka.connect.filepulse.filter.AppendFilter</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.setKey.field</span><span style="color: #e6db74">&#34;</span>               <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">$key</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">filters.setKey.value</span><span style="color: #e6db74">&#34;</span>               <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">$value.location_id</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span></code></pre>
</div>
</div>
</li>
<li>
<p>Hereâ€™s the full connector configuration REST call. Substitute the CSV details and broker config (<code>CCLOUD_HOST</code>, <code>CCLOUD_API_KEY</code>, <code>CCLOUD_API_SECRET</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">curl</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">i</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">X</span> <span style="color: #f8f8f2;background-color: #49483e">PUT</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">H</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Accept:application/json</span><span style="color: #e6db74">&#34;</span> <span style="color: #f92672;font-weight: bold">\</span>
<span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">H</span>  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Content-Type:application/json</span><span style="color: #e6db74">&#34;</span> <span style="color: #f8f8f2;background-color: #49483e">http</span><span style="color: #f8f8f2;background-color: #49483e">:</span><span style="color: #75715e;font-style: italic">//localhost:8083/connectors/source-csv-01/config \</span>
<span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">d</span> <span style="color: #e6db74">&#39;</span><span style="color: #e6db74">{
  &#34;connector.class&#34;                    : &#34;io.streamthoughts.kafka.connect.filepulse.source.FilePulseSourceConnector&#34;,
  &#34;task.reader.class&#34;                  : &#34;io.streamthoughts.kafka.connect.filepulse.reader.RowFileInputReader&#34;,
  &#34;fs.scan.filters&#34;                    : &#34;io.streamthoughts.kafka.connect.filepulse.scanner.local.filter.RegexFileListFilter&#34;,
  &#34;fs.scan.directory.path&#34;             : &#34;/data/ingest/locations/&#34;,
  &#34;fs.scan.interval.ms&#34;                : &#34;10000&#34;,
  &#34;file.filter.regex.pattern&#34;          : &#34;openraildata-talk-carl-partridge-ukrail_locations.csv&#34;,
  &#34;offset.strategy&#34;                    : &#34;name&#34;,
  &#34;skip.headers&#34;                       : &#34;1&#34;,
  &#34;topic&#34;                              : &#34;ukrail-locations&#34;,
  &#34;fs.cleanup.policy.class&#34;            : &#34;io.streamthoughts.kafka.connect.filepulse.clean.LogCleanupPolicy&#34;,
  &#34;tasks.max&#34;                          : 1,
  &#34;filters&#34;                            : &#34;ParseLine,setKey&#34;,
  &#34;filters.ParseLine.type&#34;             : &#34;io.streamthoughts.kafka.connect.filepulse.filter.DelimitedRowFilter&#34;,
  &#34;filters.ParseLine.extractColumnName&#34;: &#34;headers&#34;,
  &#34;filters.ParseLine.trimColumn&#34;       : &#34;true&#34;,
  &#34;filters.ParseLine.separator&#34;        : &#34;,&#34;,
  &#34;filters.setKey.type&#34;                : &#34;io.streamthoughts.kafka.connect.filepulse.filter.AppendFilter&#34;,
  &#34;filters.setKey.field&#34;               : &#34;$key&#34;,
  &#34;filters.setKey.value&#34;               : &#34;$value.location_id&#34;,
  &#34;internal.kafka.reporter.bootstrap.servers&#34;                             : &#34;CCLOUD_HOST:9092&#34;,
  &#34;internal.kafka.reporter.topic&#34;                                         : &#34;connect-file-pulse-status&#34;,
  &#34;internal.kafka.reporter.producer.security.protocol&#34;                    : &#34;SASL_SSL&#34;,
  &#34;internal.kafka.reporter.producer.ssl.endpoint.identification.algorithm&#34;: &#34;https&#34;,
  &#34;internal.kafka.reporter.producer.sasl.mechanism&#34;                       : &#34;PLAIN&#34;,
  &#34;internal.kafka.reporter.producer.sasl.jaas.config&#34;                     : &#34;org.apache.kafka.common.security.plain.PlainLoginModule required username=</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;CCLOUD_API_KEY</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34; password=</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;CCLOUD_API_SECRET</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;;&#34;,
  &#34;internal.kafka.reporter.producer.request.timeout.ms&#34;                   : &#34;20000&#34;,
  &#34;internal.kafka.reporter.producer.retry.backoff.ms&#34;                     : &#34;500&#34;,
  &#34;internal.kafka.reporter.consumer.security.protocol&#34;                    : &#34;SASL_SSL&#34;,
  &#34;internal.kafka.reporter.consumer.ssl.endpoint.identification.algorithm&#34;: &#34;https&#34;,
  &#34;internal.kafka.reporter.consumer.sasl.mechanism&#34;                       : &#34;PLAIN&#34;,
  &#34;internal.kafka.reporter.consumer.sasl.jaas.config&#34;                     : &#34;org.apache.kafka.common.security.plain.PlainLoginModule required username=</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;CCLOUD_API_KEY</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34; password=</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;CCLOUD_API_SECRET</span><span style="color: #ae81ff">\</span><span style="color: #e6db74">&#34;;&#34;,
  &#34;internal.kafka.reporter.consumer.request.timeout.ms&#34;                   : &#34;20000&#34;,
  &#34;internal.kafka.reporter.consumer.retry.backoff.ms&#34;                     : &#34;500&#34;
}</span><span style="color: #e6db74">&#39;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The connector is really powerful, and all the options can make it a bit daunting to get started with - but itâ€™s worth persevering ðŸ˜„ (and <a href="https://streamthoughts.github.io/kafka-connect-file-pulse/docs/developer-guide/">the documentation</a> is comprehensive).</p>
</div>
	<hr>
	<div class="giscus-container">
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
	</div>
</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">On this page</a></li>
        </ul>
        
      </div>
      
    
    </div>
  </div>
</div>


		</main>

		

		
		<footer class="site-footer hide-print" role="contentinfo">
			<span>&copy; 2026 </span>
		</footer>
		

		
	</body>
</html>
