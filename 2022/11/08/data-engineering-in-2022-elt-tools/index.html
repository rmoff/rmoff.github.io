<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Data Engineering in 2022: ELT tools</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2022/11/08/data-engineering-in-2022-elt-tools/">
		
		
		
		
		
		<meta property="og:title" content="Data Engineering in 2022: ELT tools" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2022/11/h_IMG_8786.jpeg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2022/11/08/data-engineering-in-2022-elt-tools/" />
		<meta property="og:site_name" content="Data Engineering in 2022: ELT tools" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-post page-kind-page is-page-true ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/images/2022/11/h_IMG_8786.jpeg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net" title="Home">
						<img src="https://rmoff.net/img/logo.jpg" class="w2 h2 br-100" alt="rmoff&#39;s random ramblings" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://data-folks.masto.host/@rmoff"><i class="fab fa-mastodon"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://twitter.com/rmoff/"><i class="fab fa-twitter-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">Data Engineering in 2022: ELT tools</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
								Published
								<time datetime="2022-11-08T19:46:39Z">Nov 8, 2022</time>
								<span class="display-print">by </span>
								 in <a href="https://rmoff.net/categories/elt" class="no-underline category near-white dim">ELT</a>, <a href="https://rmoff.net/categories/dbt" class="no-underline category near-white dim">Dbt</a>, <a href="https://rmoff.net/categories/fivetran" class="no-underline category near-white dim">Fivetran</a>, <a href="https://rmoff.net/categories/airbyte" class="no-underline category near-white dim">AirByte</a>, <a href="https://rmoff.net/categories/data-engineering" class="no-underline category near-white dim">Data Engineering</a>
								<span class="display-print">at https://rmoff.net/2022/11/08/data-engineering-in-2022-elt-tools/</span>
							
						
					</h2>
				</div>

				
				
				
				<div class="w-100 cf hide-print">
					<a class="fr f6 ma0 pa2 link white-50 dim fas fa-camera" href="https://twitter.com/rmoff/" title="Photo Credit"></a>
				</div>
				
				

			</div>
		</header>
		
		<main role="main">
		
<article class="center bg-white br-3 pv1 ph4 lh-copy f5 nested-links mw8">
	<div class="paragraph">
<p>In <a href="/2022/09/14/stretching-my-legs-in-the-data-engineering-ecosystem-in-2022/">my quest</a> to bring myself up to date with where the data &amp; analytics engineering world is at nowadays, I’m going to build on my exploration of the <a href="/2022/09/14/data-engineering-in-2022-storage-and-access/">storage and access</a> technologies and look at the tools we use for loading and transforming data.</p>
</div>
<div class="paragraph">
<p>The approach that many people use now is one of <strong>EL-T</strong>. That is, get the [raw] data in, and <em>then</em> transform it. I <a href="/2022/10/02/data-engineering-in-2022-architectures-terminology/">wrote about this in more detail elsewhere</a> including the difference between ETL and ELT, and the difference between ELT now and in the past. In this article I’m going to look more at the tools themselves. That said, it’s worth recapping why the shift has come about. From my perspective it’s driven by a few things.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One is the <strong>technology</strong>. It’s <em>cheaper</em> to store more data when storage is <em>decoupled from compute</em> (HDFS, S3, etc). It’s also possible to <em>process bigger volumes of data</em>, with the prevalence of distributed systems (such as Apache Spark) whether on-premises or the ubiquitous <em>Cloud datawarehouses</em> (BigQuery, Snowflake, et al).</p>
<div class="paragraph">
<p>The result of it being cheaper, and possible, to handle larger volumes of data means that we don’t have to over-optimise the front of the pipeline. In the past we <em>had</em> to transform the data before loading simply to keep it at a manageable size.</p>
</div>
<div class="paragraph">
<p>Working with the raw data has lots of benefits, since at the point of ingest you don’t know all of the possible uses for the data. If you rationalise that data down to just the set of fields and/or aggregate it up to fit just a specific use case then you lose the fidelity of the data that could be useful elsewhere. This is one of the premises and benefits of a data lake done well.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><em>Of course, despite what the &#34;data is the new oil&#34; vendors told you back in the day, you can’t</em> just <em>chuck raw data in and assume that magic will happen on it, but that’s a rant for another day ;-)</em></p>
</div>
</blockquote>
</div>
</li>
<li>
<p>The second shift—which is quite possibly related to the one above—that I see is the <strong>broadening of scope in teams and roles that are involved in handling data</strong>. If you only have a single central data team they can require and enforce tight control of the data and the processing. This has changed in recent years and now it’s much more likely you’ll have multiple teams working with data, perhaps one sourcing the raw data, and another (or several others) processing it. That processing isn’t just aggregating it for a weekly printout for the board meeting, but quite possibly for multiple different analytical uses across teams, as well as fun stuff like <a href="https://www.linkedin.com/posts/gwenshapira_reverse-etl-why-is-it-a-big-deal-activity-6929868882778222592-FnZs/?trk=public_profile_like_view">Reverse ETL</a> and training ML models.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So what are the kind of tools we’re talking about here, and what are they like to use?</p>
</div>
<div class="sect1">
<h2 id="_transformation_dbt">Transformation - dbt&nbsp;<a class="headline-hash" href="#_transformation_dbt">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s cut to the chase on this one because it’s the easiest. Once your data is loaded (and we’ll get to <em>how</em> we load it after this), the transformation work that is done on it will quite likely be done by <a href="https://www.getdbt.com/">dbt</a>. And if it’s not, you’ll invariably encounter dbt on your journey of tool selection.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/09/dbt.jpeg" alt="dbt is everywhere"/>
</div>
</div>
<div class="paragraph">
<p>Everywhere I look, it’s dbt. People writing about data &amp; analytics engineering are using dbt. Companies in the space with products to sell are cosying up to dbt and jumping on their bandwagon. It’s possible <a href="https://benn.substack.com/p/how-dbt-fails">it could fail</a>…but not for now.</p>
</div>
<div class="paragraph">
<p>It took me a while to grok where dbt comes in the stack but now that I (<em>think</em>) I have it, it makes a lot of sense. I can also see why, with my background, I had trouble doing so. Just as Apache Kafka isn’t easily explained as simply another database, another message queue, etc, dbt isn’t just another Informatica, another Oracle Data Integrator. <strong>It’s not about ETL or ELT - it’s about T alone</strong>. With that understood, things slot into place. This isn’t just my take on it either - dbt themselves call it out <a href="https://www.getdbt.com/blog/what-exactly-is-dbt/">on their blog</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>dbt is the T in ELT</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="imageblock">
<div class="content">
<img src="https://www.getdbt.com/ui/img/blog/what-exactly-is-dbt/1-BogoeTTK1OXFU1hPfUyCFw.png" alt="dbt high-level view"/>
</div>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>What dbt does is use SQL with <a href="https://docs.getdbt.com/docs/build/jinja-macros#overview">templating</a> (and <a href="https://docs.getdbt.com/docs/building-a-dbt-project/building-models/python-models">recently added support for Python</a>) to express data transformations, build dependency graphs between those, and executes them. It does a bunch of things around this including testing, incremental loading, documentation, handling environments, and so on—but at its heart that’s all its doing. <em>This raw table of website clicks here, let’s rename these fields, un-nest this one, mask that one, and aggregate that other one. Use the result of that to join to order data to produce a unified view of website/order metrics</em>.</p>
</div>
<div class="paragraph">
<p>Here’s a simple example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/sql01.png" alt="Extract of SQL from https://github.com/rmoff/current-dbt/blob/main/models/staging/stg_session.sql"/>
</div>
</div>
<div class="paragraph">
<p>In this the only difference from straight-up regular SQL is <code>{{ ref(&#39;stg_scans&#39;) }}</code> which refers to another SQL definition (known as a &#39;model&#39;), and which gives dbt the smarts to know to build that one before this.</p>
</div>
<div class="paragraph">
<p>A more complex example looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/sql02.png" alt="Extract of SQL from https://github.com/rmoff/current-dbt/blob/main/models/staging/stg_ratings.sql"/>
</div>
</div>
<div class="paragraph">
<p>Here we’ve got some <a href="https://docs.getdbt.com/docs/build/jinja-macros">Jinja</a> (<em>which technically the</em> <code>ref()</code> <em>is above but let’s not nit-pick</em>) to iterate over three different values of an entity (<code>rating_type</code>) in order to generate some denormalised SQL.</p>
</div>
<div class="paragraph">
<p>That, in a nutshell, is what dbt does. You can read more about <a href="/2022/10/24/data-engineering-in-2022-wrangling-the-feedback-data-from-current-22-with-dbt/">my experiments</a> with it as well as check out their super-friendly and helpful <a href="https://community.getdbt.com/">community</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_so_weve_figured_out_transformationwhat_about_extract_and_load">So we’ve figured out Transformation…what about Extract and Load?&nbsp;<a class="headline-hash" href="#_so_weve_figured_out_transformationwhat_about_extract_and_load">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whilst dbt seems to be dominant in the Transform space, the ingest of data prior to transformation (a.k.a. &#34;Extract &amp; Load&#34;) is offered by numerous providers. Almost all are &#34;no-code&#34; or &#34;low-code&#34;, and an interesting shift from times of yore is that the sources from which data is extracted is often not an in-house RDBMS but a SaaS provider - less Oracle EBS in your local data center and more Salesforce in the Cloud.</p>
</div>
<div class="paragraph">
<p><a href="https://www.fivetran.com/">Fivetran</a> is an established name here, along with many others including <a href="https://www.stitchdata.com/">Stitch</a> (now owned by Talend), <a href="https://airbyte.com/">Airbyte</a>, <a href="https://azure.microsoft.com/en-gb/products/data-factory/">Azure Data Factory</a>, <a href="https://segment.com/">Segment</a>, <a href="https://www.matillion.com/">Matillion</a>, and more. Many of these also offer some light transformation of data along the way (such as masking or dropping sensitive fields, or massaging the schema of the data).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_checking_out_fivetran_and_airbyte">Checking out Fivetran and Airbyte&nbsp;<a class="headline-hash" href="#_checking_out_fivetran_and_airbyte">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>I’ve taken a look at a couple of SaaS E/L providers side-by-side to understand what they do, what it’s like to use them, and any particular differences. I picked <strong>Fivetran</strong> and <strong>Airbyte</strong>, the former because it’s so commonly mentioned, the latter because they were at <a href="https://2022.currentevent.io/website/39543/sponsors/">Current 2022</a> and had nice swag :D</p>
</div>
<div class="paragraph">
<p>Airbyte offer a comparison <a href="https://airbyte.com/etl-tools/fivetran-alternative-airbyte">between themselves and Fivetran</a> - taken with a pinch of salt it’s probably a useful starting point if you want to get into the differences between them. Airbyte is <a href="https://github.com/airbytehq/airbyte">open-source and available to run yourself</a>, and also as a cloud service (which is what I’m going to use).</p>
</div>
<div class="sect2">
<h3 id="_signup">Signup&nbsp;<a class="headline-hash" href="#_signup">🔗</a> </h3>
<div class="paragraph">
<p>Both services offer a 14-day free trial, with fairly painless signup forms</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab01.png" alt="Fivetran and Airbyte - signup forms pt 1"/>
</div>
</div>
<div class="paragraph">
<p>Fivetran wants more data from me and makes me validate my email before letting me in whilst Airbyte wants to validate my email but lets me straight into the dashboard which is nice. Fivetran also sends annoying SDR nurture emails after signup which Airbyte doesn’t.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab02.png" alt="Fivetran and Airbyte - signup forms pt 2"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started">Getting started&nbsp;<a class="headline-hash" href="#_getting_started">🔗</a> </h3>
<div class="paragraph">
<p>The first screen that I land on after signup for Airbyte feels nicer - a big &#34;Set up your first connection&#34; button, which resonates more than Fivetran’s &#34;Add destination&#34;. For me that’s back-to-front since I want to tell it where to get data from and then I’ll explain where to put it. But perhaps that’s just me.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab03.png" alt="Fivetran and Airbyte - initial dashboard after signup"/>
</div>
</div>
<div class="paragraph">
<p>For both services I’m going to use GitHub as a source, and BigQuery as my target, with the theoretical idea of creating an analysis of my blog updates (it’s <a href="/categories/github/">hosted on GitHub</a>). To this I could add in the future other data sources such as Google Analytics.</p>
</div>
<div class="paragraph">
<p>I click the big &#34;Add destination&#34; button in Fivetran and get asked what destination I want to create. This is a bit confusing, and I can see listed already one destination called &#34;Warehouse&#34;. I cancel that dialog, and click on the &#34;Edit&#34; button next to the existing destination. This just renames it, so I cancel that. Third time lucky—I click on the &#34;Warehouse&#34; destination name itself and now I’ve launched a 🧙🪄wizard! I click &#34;Skip question&#34;.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab04.png" alt="Fivetran can be confusing"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selecting_the_source">Selecting the source&nbsp;<a class="headline-hash" href="#_selecting_the_source">🔗</a> </h3>
<div class="paragraph">
<p>Several clicks in Fivetran and some confusion later, I’ve caught up with where Airbyte was after the single obvious &#34;Set up your first connection&#34; click - selecting my source.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab05.png" alt="Fivetran and Airbyte - selecting a source"/>
</div>
</div>
<div class="paragraph">
<p>Airbyte lists the connectors alphabetically, and you can also search. Fivetran lists its connectors…randomly?? and its search seem to return odd partial match results</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab06.png" alt="Fivetran and Airbyte - searching for a connector"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_source">Configuring the source&nbsp;<a class="headline-hash" href="#_configuring_the_source">🔗</a> </h3>
<div class="paragraph">
<p>With the GitHub connector selected on both, I can now configure it. Both have a nice easy &#34;Authenticate&#34; button which triggers the authentication with my GitHub account. Once done I can select for which repository I want to pull data. Airbyte lets me type it freeform (which is faster but error-prone and relies on me knowing the exact name and owner), whilst Fivetran insists that I only pick from an available list that it has to fetch (mildly annoying if you know the exact name already)</p>
</div>
<div class="paragraph">
<p>Airbyte slightly annoyingly insists that I enter a &#34;Start date&#34; which I would definitely want the <em>option</em> to do but not mandatory. By default I’d assume I want all data (which is presumably the assumption that Fivetran made because I didn’t have to enter it). I have to freeform enter an ISO timestamp, for which the tooltip helpfully shows the format but is still an extra step nonetheless.</p>
</div>
<div class="paragraph">
<p>Both connectors run a connection test after the configuration is complete</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab07.png" alt="Fivetran and Airbyte - testing a connector"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_target">Configuring the target&nbsp;<a class="headline-hash" href="#_configuring_the_target">🔗</a> </h3>
<div class="paragraph">
<p>Now we specify the target for the data. The BigQuery connector is easy to find on the list of destinations that each provide. As a side note, one thing I’ve noticed with the Fivetran UI is that it’s the more old-school &#34;select, click next, select, click next&#34; vs Airbyte’s which tends to just move on between screens once you select the option.</p>
</div>
<div class="paragraph">
<p>For my BigQuery account I’ve created and exported a private key for a service account (under <code>IAM &amp; Admin</code> → <code>Service Accounts</code>, then select the service account and <code>Keys</code> tab, and <code>Create new key</code>). Both Fivetran and Airbyte just have a password field into which to paste the multi-line JSON. It seems odd but it works.</p>
</div>
<div class="paragraph">
<p>Other than the authentication key, Fivetran just needs the Project ID and it’s ready to go. Airbyte also needs a default Dataset location and ID. On the click-click-click done stakes, Fivetran is simpler in this respect (few options that <em>have</em> to be set).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab08.png" alt="Fivetran and Airbyte - setting up BigQuery destination"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_extract">Configuring the extract&nbsp;<a class="headline-hash" href="#_configuring_the_extract">🔗</a> </h3>
<div class="paragraph">
<p>Once the connection has been validated, Fivetran and Airbyte move on to what data is to be synced, and how. The screens diverge a bit here so I’ll discuss them one at a time.</p>
</div>
<div class="paragraph">
<p>Fivetran keeps things simple with an option to just <code>Sync all data</code> (default), or <code>Choose columns to block or hash</code>. If I select the latter than Fivetran goes off the get the schema and then somewhat jarringly does a &#34;don’t call us, we’ll call you&#34; screen, promising to email me when things are ready…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab09.png" alt="Fivetran - masking sensitive data"/>
</div>
</div>
<div class="paragraph">
<p>…after which <code>Continue</code> dumps you on a dashboard from which it’s kinda unclear what I do now. Did I create my connector? Is it syncing everything (there’s a spinning action icon next to <code>Status</code> so perhaps?).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab10.png" alt="Fivetran - I’m confused."/>
</div>
</div>
<div class="paragraph">
<p>Clicking on the pipeline provides the clarity that was missing previously:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab11.png" alt="Fivetran - I’m less confused."/>
</div>
</div>
<div class="paragraph">
<p>Whilst I sit tight, barely able to control my anticipation at getting the promised email from Fivetran about the schema, I head over to Airbyte. The last thing I did here was confirm my BigQuery connection details, which were successfully tested. If we remember what Fivetran did—a simple screen with two simple buttons &#34;Let’s go&#34; or &#34;Let’s mask some fields&#34;, Airbyte’s is somewhat different. You could say bewildering; you could say powerful - 🍅tomato/🍅tomato, 🥔potato/🥔potato.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab12.png" alt="Airbyte - Connection configuration screen"/>
</div>
</div>
<div class="paragraph">
<p>It starts off simple - how often do we want to sync, what do we call it. Then what is our <code>Destination Namespace</code>? Here’s the abstraction coming through, because as a bit of a n00b to all this I’d rather it be asking with the specific term relevant to my destination. What <code>Dataset</code> do I want to write to in BigQuery? But OK, we’ve wrapped our heads around that. But now… now…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab13.png" alt="Airbyte - Stream activation"/>
</div>
</div>
<a name="airbyte-ui"></a>
<div class="paragraph">
<p>My two big issues with this are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>I’m thrown in hard and deep to the world of <strong>Sync mode</strong>, <strong>Cursor field</strong>, and more. These things exist, and are important, but I’m just a humble n00b trying to find my way in the world. Do I <em>need</em> to know this stuff now? If Fivetran can abstract it, hide it, or set some suitable defaults, why can’t Airbyte? Sure, give me an &#34;advanced options&#34; button to display this, but I’m pretty daunted now. This brings me to my next issue:</p>
</li>
<li>
<p>The user interface (UI) is <em>not clear</em>.</p>
<div class="ulist">
<ul>
<li>
<p>First, do I <em>need</em> to change any of these options, or can I just proceed? If I scroll all the way down there’s actually a <code>Set up connection</code> button that’s not greyed out, so perhaps I can just click on that?</p>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab14.png" alt="Airbyte - Stream activation again"/>
</div>
</div>
</li>
<li>
<p>Second, assuming I want to change the stream sync config, this UI is even more confusing. I click on one or more checkboxes next to a stream, and something appears at the top? Why does Sync toggle but not change the toggles below? And is <code>Apply</code> going to <code>Apply</code> all the connector changes or just the streams that are checked? These are rhetorical questions and I can probably guess - but I shouldn’t have to.</p>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab15.gif" alt="Airbyte - Stream activation UI is not so nice"/>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Perhaps GitHub is an unfortunate source to have started with, because the list of objects to sync is so long. For now, I ignore all the scary stuff and just click on <code>Set up connection</code>. Now I’m back to the nice-and-easy workflow, and the synchronization has started</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab16.png" alt="Airbyte - Synchronisation"/>
</div>
</div>
<div class="paragraph">
<p>Back in Fivetran world I’ve still not received the promised email so I head to <code>Setup</code> and <code>Edit connection details</code> to see if I can tell it to forget the bit about masking fields (because I just want to set up a pipeline, any pipeline) and just start synchronising.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab17.png" alt="Fivetran - Connection details"/>
</div>
</div>
<div class="paragraph">
<p>Strangely it’s not under Setup (but I only find this out after waiting for it to test the connection again), but <code>Schema</code>. Which kinda makes sense, except the wizard workflow was as one, so in my defence I expected it all under <code>Setup</code> 🤷</p>
</div>
<div class="paragraph">
<p>Looking at the schema, I can select which objects and fields within them to sync. If I didn’t want to include the author of a commit, for example, I could drop that here.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab18.png" alt="Fivetran - Select data to sync"/>
</div>
</div>
<div class="paragraph">
<p>After hitting <code>Save and Continue</code> I get an error which is a shame</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab19.png" alt="Fivetran - computer says No"/>
</div>
</div>
<div class="paragraph">
<p>Ignoring the error I’m then prompted for how I’d like to handle schema changes, with a helpful description under each - and after that, a nice big button to click on to start the initial sync 😅</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab20.png" alt="Fivetran - handling schema changes"/>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab21.png" alt="Fivetran - LFG!"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sync_status_and_details">Sync status and details&nbsp;<a class="headline-hash" href="#_sync_status_and_details">🔗</a> </h3>
<div class="paragraph">
<p>I’m now at the point at which both tools are successfully pulling data from GitHub to load into BigQuery. Each has a status screen and a view with logs and more details. If I’m being fussy (which I am) the Airbyte UI is more responsive to the window width, whilst the Fivetran one I have to keep resizing because of a left-hand nav which seems intent on grabbing a fair proportion of the available space for not much purpose…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab22.png" alt="Fivetran and AirByte - Connector status view"/>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab23.png" alt="Fivetran and AirByte - Connector logs"/>
</div>
</div>
<div class="paragraph">
<p>The two connectors are either pulling different data or implemented differently because whilst the Fivetran connector finishes within a few minutes, the Airbyte one is still going after more than 20 minutes and shows that it’s also been rate-limited and so paused itself for a further ~40 minutes</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab24.png" alt="Fivetran and AirByte - Timings"/>
</div>
</div>
<div class="paragraph">
<p>Airbyte eventually completed after over an hour - but also with 72MB of data vs 2MB from Fivetran.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab25.png" alt="AirByte - eventually finished"/>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_data_models_in_bigquery">The data models in BigQuery&nbsp;<a class="headline-hash" href="#_the_data_models_in_bigquery">🔗</a> </h3>
<div class="paragraph">
<p>Fivetran and Airbyte load the data from the GitHub API into quite different tables in the destination. Whilst Fivetran uses a separate <code>staging</code> dataset Airbyte uses a whole bunch of underscore-prefixed tables within the same target dataset as the resulting tables.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab26.png" alt="Fivetran and AirByte - Data loaded into BigQuery"/>
</div>
</div>
<div class="paragraph">
<p>Fivetran have published an <a href="https://docs.google.com/presentation/d/1lx6ez7-x-s-n2JCnCi3SjG4XMmx9ysNUvaNCaWc3I_I/edit">Entity Relationship Diagram (ERD) for their GitHub model</a> (<em>proving that data modelling never died and is actually remarkably useful</em>) as well as <a href="https://fivetran.com/docs/applications/github#features">general documentation</a> about how the connector handles deletes etc. It also ships a <a href="https://fivetran.com/docs/transformations/data-models/github-data-model/github-source-model">dbt model of this ingested data</a> as well as <a href="https://fivetran.com/docs/transformations/data-models/github-data-model/github-transform-model">enrichment transformations for dbt</a> for the data in this format.</p>
</div>
<div class="paragraph">
<p>Airbyte’s documentation and model palls in comparison to Fivetran’s. Their docs cover the <a href="https://docs.airbyte.com/integrations/sources/github/#supported-sync-modes">connector’s characteristics</a> but nothing about the model itself. From what I can tell in the docs the objects written to BigQuery are basically a literal representation of what the GitHub API returns (and these are what are linked to in the docs, such as the <a href="https://docs.github.com/en/rest/commits/commits#list-commits"><code>commits</code></a> object). As we’ll see in the next section, this makes the data much harder to work with.</p>
</div>
</div>
<div class="sect2">
<h3 id="_analysing_the_data">Analysing the data&nbsp;<a class="headline-hash" href="#_analysing_the_data">🔗</a> </h3>
<div class="paragraph">
<p>Going back to the idea of this exercise, I’ve got GitHub data so now I’ll try and analyse it. The Fivetran model is easy to work with, and just needs a single join out to another table which is easily identified to pull in the repository name and show a list of individual commits by author:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="sql"><span style="color: #000000;font-weight: bold">SELECT</span>    <span style="background-color: #f8f8f8">author_date</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">author_name</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">message</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">name</span>        <span style="color: #000000;font-weight: bold">AS</span> <span style="background-color: #f8f8f8">repo_name</span>
<span style="color: #000000;font-weight: bold">FROM</span>      <span style="color: #008080">`devx-testing.github.commit`</span> <span style="color: #000000;font-weight: bold">c</span>
<span style="color: #000000;font-weight: bold">LEFT</span> <span style="color: #000000;font-weight: bold">JOIN</span> <span style="color: #008080">`devx-testing.github.repository`</span> <span style="background-color: #f8f8f8">r</span>
          <span style="color: #000000;font-weight: bold">ON</span> <span style="color: #000000;font-weight: bold">c</span><span style="background-color: #f8f8f8">.</span><span style="background-color: #f8f8f8">repository_id</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">r</span><span style="background-color: #f8f8f8">.</span><span style="background-color: #f8f8f8">id</span>
<span style="color: #000000;font-weight: bold">ORDER</span> <span style="color: #000000;font-weight: bold">BY</span>  <span style="background-color: #f8f8f8">author_date</span> <span style="color: #000000;font-weight: bold">DESC</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab27.png" alt="Fivetran - Querying the loaded data"/>
</div>
</div>
<div class="paragraph">
<p>I can also aggregate based on <code>DATE(author_date)</code> and <code>author</code> and dump the resulting dataset into Data Studio/Looker to produce some nice charts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="sql"><span style="color: #000000;font-weight: bold">SELECT</span>    <span style="color: #0086B3">DATE</span> <span style="background-color: #f8f8f8">(</span><span style="background-color: #f8f8f8">author_date</span><span style="background-color: #f8f8f8">)</span> <span style="color: #000000;font-weight: bold">AS</span> <span style="background-color: #f8f8f8">commit_date</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">author_name</span><span style="background-color: #f8f8f8">,</span>
          <span style="color: #000000;font-weight: bold">COUNT</span><span style="background-color: #f8f8f8">(</span><span style="color: #000000;font-weight: bold">*</span><span style="background-color: #f8f8f8">)</span>           <span style="color: #000000;font-weight: bold">AS</span> <span style="background-color: #f8f8f8">commit_count</span>
<span style="color: #000000;font-weight: bold">FROM</span>      <span style="color: #008080">`devx-testing.github.commit`</span> <span style="color: #000000;font-weight: bold">c</span>
<span style="color: #000000;font-weight: bold">GROUP</span> <span style="color: #000000;font-weight: bold">BY</span>  <span style="background-color: #f8f8f8">commit_date</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">author_name</span>
<span style="color: #000000;font-weight: bold">ORDER</span> <span style="color: #000000;font-weight: bold">BY</span>  <span style="color: #009999">1</span> <span style="color: #000000;font-weight: bold">ASC</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab28.png" alt="Charting rmoff-blog commit history using Fivetran and BigQuery"/>
</div>
</div>
<div class="paragraph">
<p>Let’s take a look at the Airbyte data. There are 16 <code>commit</code>-prefixed tables. If we start with the obvious <code>commits</code> neither the schema nor preview immediately calls out where to start.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab29.png" alt="Airbyte’s GitHub data model"/>
</div>
</div>
<div class="paragraph">
<p>We need the date of commit, the name of the committer, the commit message, and the name of the repo. After poking around <code>commits_commit</code> looks useful and gets us part-way there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="sql"><span style="color: #000000;font-weight: bold">SELECT</span>    <span style="background-color: #f8f8f8">JSON_EXTRACT</span> <span style="background-color: #f8f8f8">(</span><span style="background-color: #f8f8f8">author</span><span style="background-color: #f8f8f8">,</span> <span style="color: #008080">&#34;$.date&#34;</span><span style="background-color: #f8f8f8">)</span> <span style="color: #000000;font-weight: bold">AS</span> <span style="background-color: #f8f8f8">author_date</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">JSON_EXTRACT</span> <span style="background-color: #f8f8f8">(</span><span style="background-color: #f8f8f8">author</span><span style="background-color: #f8f8f8">,</span> <span style="color: #008080">&#34;$.name&#34;</span><span style="background-color: #f8f8f8">)</span> <span style="color: #000000;font-weight: bold">AS</span> <span style="background-color: #f8f8f8">author_name</span><span style="background-color: #f8f8f8">,</span>
          <span style="background-color: #f8f8f8">message</span>
<span style="color: #000000;font-weight: bold">FROM</span>      <span style="color: #008080">`devx-testing.airbyte.commits_commit`</span>
<span style="color: #000000;font-weight: bold">ORDER</span> <span style="color: #000000;font-weight: bold">BY</span>  <span style="background-color: #f8f8f8">author_date</span> <span style="color: #000000;font-weight: bold">DESC</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/2022/11/ftab30.png" alt="Querying Airbyte’s GitHub data model"/>
</div>
</div>
<div class="paragraph">
<p>But we’re missing the repository name. Now since we specified in the Airbyte extract to <em>only pull data for the</em> <code>rmoff-blog</code> <em>repo</em> then we could brush this under the carpet. Otherwise we need to work out how to relate <code>commits_commit</code> to other tables and find one with the repo name in too…which for now I’m going to punt into the <code>TODO</code> realm :D</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fivetran_and_airbyte_summary">Fivetran and Airbyte - Summary&nbsp;<a class="headline-hash" href="#_fivetran_and_airbyte_summary">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Both tools work well for easily ingesting data from GitHub into BigQuery. My assumption is that the experience is similar for all of the other sources and destinations that they support. Select the connector, configure it, and hit the big &#34;Start Sync&#34; button. Some connectors especially <a href="https://fivetran.com/docs/databases/oracle/setup-guide">in the RDBMS world</a> are probably going to be more fiddly to configure. Of the two tools, Fivetran definitely leans more nicely into the approach of using sensible defaults and only insisting on user input where necessary when compared to Airbyte.</p>
</div>
<div class="paragraph">
<p>Each have their own UI quirks, especially Airbyte’s &#34;Stream activation&#34; section that I <a href="#airbyte-ui">grumbled about above</a>.</p>
</div>
<div class="paragraph">
<p>The resulting data is more nicely modelled by Fivetran whereas Airbyte just gives you the raw API output (from what I can tell). The ERD that Fivetran publishes is a very nice touch, as are the <a href="https://fivetran.com/docs/transformations/data-models">dbt data models</a> since it’s a fair assumption folk will be interested in using these to speed up the &#34;time to delivery&#34; further.</p>
</div>
<div class="paragraph">
<p>I had the privilege of ignoring one of the big real-world evaluation criteria for tool selection: cost. Both tools had a 14-day free trial, and selective browsing on Reddit suggests that the costs can quickly mount up with these tools (as with many SaaS offerings) if not used carefully.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_going_off_on_a_tangent_bespoke_api_ingest">Going off on a tangent - Bespoke API Ingest&nbsp;<a class="headline-hash" href="#_going_off_on_a_tangent_bespoke_api_ingest">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Something that I’d not spotted yet on my travels was a canonical pattern for ingesting data from a bespoke [REST] API. All the SaaS E/L tools have the usual list of cloud-and-on-premises data sources, but there are innumerable other sources of data that expose an API. This could be an in-house system for which the backend database isn’t made available (and the API provided as the only interface from which to fetch data), or it could be a third-party system that only offers a API.</p>
</div>
<div class="paragraph">
<p>Some examples of public third-party APIs would be the kind of data sources I’ve used for <a href="https://github.com/confluentinc/demo-scene/">projects in the past</a>, including <a href="http://environment.data.gov.uk/flood-monitoring/doc/reference#api-summary">flood monitoring data</a> from a REST API, or the position of <a href="https://www.kystverket.no/en/navigation-and-monitoring/ais/access-to-ais-data/">ships near Norway</a> using an AIS endpoint.</p>
</div>
<div class="paragraph">
<p>I asked this question on <a href="https://www.reddit.com/r/dataengineering/comments/ykznde/what_tooltechnique_do_you_use_for_polling_data/"><code>r/dataengineering</code></a> and <a href="https://www.linkedin.com/posts/robinmoffatt_dataengineering-datapipelines-analyticsengineering-activity-6993956725842178048-egI1?utm_source=share&amp;utm_medium=member_desktop">LinkedIn</a> and got a good set of replies, which I’ll summarise here. One of the things that I learnt from this is that there’s not a single answer or pattern here—it’s definitely much more of an area in which you’ll have to roll up your sleeves, whether to write some code or evaluate a bunch of tools with no clear leader in the field. A lot of the solutions drop back into either writing some code, and/or self-managing something. I thought there might be an obvious Fivetran equivalent, but it doesn’t seem so.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go write some code and run it with an orchestrator</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://airflow.apache.org/">Apache Airflow</a>, and the <a href="https://airflow.apache.org/docs/apache-airflow-providers-http/stable/operators.html">HttpOperator</a></p>
</li>
<li>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:6993956725842178048?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6993956725842178048%2C6994006307997413378%29">Azure Data Factory</a></p>
</li>
<li>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:6993956725842178048?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6993956725842178048%2C6993960606080897024%29">Dagster</a></p>
</li>
<li>
<p><a href="https://www.reddit.com/r/dataengineering/comments/ykznde/comment/iuwi2zp/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3">Meltano / Singer</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://stitch-docs.netlify.app/docs/integrations/import-api">The Stitch Data / Singer.io ‘import api’</a> - <em>&#34;It’s sort of a best-kept secret of the platform and can be used for arbitrary data&#34;</em> (thanks <code>fraser</code> on dbt Slack for suggesting this)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>No/low-code</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://portable.io/">Portable.io</a> — Gold star ⭐️ to <a href="https://www.reddit.com/r/dataengineering/comments/ykznde/comment/iv2bov8/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3"><code>ethan-aaron</code></a> who actually filmed a video example of this in action in response to my question</p>
</li>
<li>
<p><a href="https://nifi.apache.org/">Apache NiFi</a></p>
</li>
<li>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:6993956725842178048?commentUrn=urn%3Ali%3Acomment%3A%28activity%3A6993956725842178048%2C6994025171967778816%29">Google Cloud Workflows or AWS Step functions</a></p>
</li>
<li>
<p><a href="https://airbytehq.github.io/connector-development/config-based/low-code-cdk-overview/">Airbyte</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>I definitely want to try out some of these - perhaps the Airbyte one since that’s what I’ve already been using here. Stay tuned for another instalment :)</p>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_data_engineering_in_2022">Data Engineering in 2022&nbsp;<a class="headline-hash" href="#_data_engineering_in_2022">🔗</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Check out my other articles in this series of explorations of the world of data engineering in 2022.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/2022/09/14/stretching-my-legs-in-the-data-engineering-ecosystem-in-2022/">Stretching my Legs</a></p>
</li>
<li>
<p><a href="/2022/09/14/data-engineering-in-2022-storage-and-access/">Storage and Access</a></p>
</li>
<li>
<p><a href="/2022/09/16/data-engineering-in-2022-exploring-lakefs-with-jupyter-and-pyspark/">Exploring LakeFS with Jupyter and PySpark</a></p>
</li>
<li>
<p><a href="/2022/10/02/data-engineering-in-2022-architectures-terminology/">Architectures &amp; Terminology</a></p>
</li>
<li>
<p><a href="/2022/10/20/data-engineering-in-2022-exploring-dbt-with-duckdb/">Exploring dbt with DuckDB</a></p>
</li>
<li>
<p><a href="/2022/10/24/data-engineering-in-2022-wrangling-the-feedback-data-from-current-22-with-dbt">Wrangling the feedback data from Current 22 with dbt</a></p>
</li>
<li>
<p>Query &amp; Transformation Engines [TODO]</p>
</li>
<li>
<p><a href="/2022/09/14/data-engineering-resources/">Resources</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
			
				
					<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://www.youtube.com/c/rmoff"><b class="fab fa-youtube-square"></b></a> <a href="https://www.linkedin.com/in/robinmoffatt/"><b class="fab fa-linkedin"></b></a> <em><a rel="me" href="https://data-folks.masto.host/@rmoff">Robin Moffatt</a> is a Principal DevEx Engineer at <a href="https://decodable.co">Decodable</a>. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

				
			
		
		</div>
		
	</div>

		
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2024 
			</p>
		</footer>
		
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75492960-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	</body>
</html>
