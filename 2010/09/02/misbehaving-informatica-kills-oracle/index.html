<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Misbehaving Informatica kills Oracle</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2010/09/02/misbehaving-informatica-kills-oracle/">
		
		
		
		
		
		<meta property="og:title" content="Misbehaving Informatica kills Oracle" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/img/default-header-img.jpg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2010/09/02/misbehaving-informatica-kills-oracle/" />
		<meta property="og:site_name" content="Misbehaving Informatica kills Oracle" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-post page-kind-page is-page-true ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/img/default-header-img.jpg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net" title="Home">
						<img src="https://rmoff.net/img/logo.jpg" class="w2 h2 br-100" alt="rmoff&#39;s random ramblings" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://bsky.app/profile/rmoff.net"><i class="fa-brands fa-bluesky"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://data-folks.masto.host/@rmoff"><i class="fab fa-mastodon"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://twitter.com/rmoff/"><i class="fab fa-twitter-square"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">Misbehaving Informatica kills Oracle</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
								Published
								<time datetime="2010-09-02T00:00:00Z">Sep 2, 2010</time>
								<span class="display-print">by </span>
								 in <a href="https://rmoff.net/categories/bug" class="no-underline category near-white dim">Bug</a>, <a href="https://rmoff.net/categories/informatica" class="no-underline category near-white dim">Informatica</a>, <a href="https://rmoff.net/categories/obia" class="no-underline category near-white dim">Obia</a>, <a href="https://rmoff.net/categories/ora-28001" class="no-underline category near-white dim">Ora-28001</a>, <a href="https://rmoff.net/categories/oracle" class="no-underline category near-white dim">Oracle</a>, <a href="https://rmoff.net/categories/security" class="no-underline category near-white dim">Security</a>
								<span class="display-print">at https://rmoff.net/2010/09/02/misbehaving-informatica-kills-oracle/</span>
							
						
					</h2>
				</div>

				
				
				
				

			</div>
		</header>
		
		<main role="main">
		
<article class="center bg-white br-3 pv1 ph4 lh-copy f5 nested-links mw8">
	<p>This problem, which in essence is bad behaviour from Informatica bringing down Oracle, is a good illustration of unintended consequences of an apparently innocuous security setting. Per our company&rsquo;s security standards, database passwords expire every 90 days. When this happens users are prompted to change their password before they can continue logging into Oracle. This applies to application user IDs too. It appears that Informatica 8.6.1 HF6 (part of OBIA 7.9.6.1) doesn&rsquo;t handle an expired password well, spawning multiple connections to the database, eventually bringing Oracle down through memory SWAP space exhaustion.</p>
<p>As a side note, one of our DBAs has been investigating how to prevent a client connection accidentally (through bad coding) or maliciously (DoS) bringing down Oracle in this way, his findings are <a href="http://jhdba.wordpress.com/2010/09/02/using-the-connection_rate-parameter-to-stop-dos-attacks/">documented here</a>.</p>
<h2 id="investigation">Investigation&nbsp;<a class="headline-hash" href="#investigation">ðŸ”—</a> </h2>
<p>As the introduction to any good IT horror story goes &hellip; &ldquo;Everything was running fine; nothing had changed&rdquo;.</p>
<p>Then our monitoring showed swap space usage on our Oracle 11g database server increasing, and soon after Oracle crashed. The DBAs restarted Oracle, but shortly after the swap space usage was on its way up. The unix tool Glance showed a lot of Oracle processes on the box.</p>
<h3 id="database">Database&nbsp;<a class="headline-hash" href="#database">ðŸ”—</a> </h3>
<p>Our Informatica repository user expired on the day on which this happened (Aug 27th):</p>
<p>[sourcecode] select username, account_status, expiry_date from dba_users</p>
<p>USERNAME ACCOUNT_STATUS EXPIRY_DATE &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash; &mdash;&mdash;&mdash; INF_REPO EXPIRED 27-AUG-10 [/sourcecode]</p>
<p>When a user ID expires an ORA-28001 is given at login:</p>
<p>[sourcecode] sqlplus INF_REPO/password</p>
<p>SQL*Plus: Release 11.1.0.7.0 - Production on Thu Sep 2 08:40:17 2010</p>
<p>Copyright (c) 1982, 2008, Oracle. All rights reserved.</p>
<p>ERROR: ORA-28001: the password has expired</p>
<p>Changing password for INF_REPO New password: [/sourcecode]</p>
<p>This is the throughput figures for Oracle from Enterprise Manager, note the Logons rate starting to increase at c.13:30 (The rate at 03:00AM is representative of the usual logon load on the database): <img src="http://rnm1978.files.wordpress.com/2010/09/inf_repo_exp_03.png?w=1024" alt="" title="inf_repo_exp_03"></p>
<h3 id="server">Server&nbsp;<a class="headline-hash" href="#server">ðŸ”—</a> </h3>
<p>Note SWAP space increase (dark blue line) at c. midday (nb GMT/BST mean not all the graphs will align):</p>
<p><img src="/images/rnm1978/inf_repo_exp_011.png" alt="Database server metrics" title="inf_repo_exp_01"></p>
<p>Note number of Alive Oracle processes (faint yellow line!):</p>
<p><img src="/images/rnm1978/inf_repo_exp_021.png" alt="Database server metrics - Oracle application only" title="inf_repo_exp_02"></p>
<h3 id="informatica">Informatica&nbsp;<a class="headline-hash" href="#informatica">ðŸ”—</a> </h3>
<p>In the Informatica exceptions.log and node.log are the initial errors:</p>
<p>[sourcecode] ERROR [Master Elect Data Writer] [DOM_10162] An exception occurred while updating the master election row. java.sql.SQLException: [informatica][Oracle JDBC Driver]No more data available to read.</p>
<p>ERROR [Master Elect Data Writer] [DOM_10162] An exception occurred while updating the master election row. java.sql.SQLException: [informatica][Oracle JDBC Driver][Oracle]ORA-01034: ORACLE not available ORA-27101: shared memory realm does not exist HPUX-ia64 Error: 2: No such file or directory</p>
<p>ERROR [Master Elect Data Writer] [DOM_10162] An exception occurred while updating the master election row. java.sql.SQLException: [informatica][Oracle JDBC Driver][Oracle]ORA-28001: the password has expired [/sourcecode]</p>
<p>Followed by the repeated error approximately every ten seconds:</p>
<p>[sourcecode] ERROR [Master Elect Data Writer] [DOM_10162] An exception occurred while updating the master election row. java.sql.SQLException: [informatica][Oracle JDBC Driver][Oracle]ORA-28001: the password has expired [/sourcecode]</p>
<p>There are also final errors in the log, occuring once only just after midnight:</p>
<p>[sourcecode] FATAL [Domain Monitor] [PCSF_10374] Failed to persist [CpuUsageSummary] with error [[informatica][Oracle JDBC Driver]No more data available to read.]. FATAL [Domain Monitor] [PCSF_10374] Failed to persist [RepoUsageSummary] with error [[informatica][Oracle JDBC Driver]No more data available to read.]. [/sourcecode]</p>
<p>After these Informatica shut down.</p>
<h2 id="theory">Theory&nbsp;<a class="headline-hash" href="#theory">ðŸ”—</a> </h2>
<p>This is what I think is happening:</p>
<ul>
<li>Informatica has a polling component (&quot;[Master Elect Data Writer]&quot;) that updates a database table (part of the Informatica repository) every minute</li>
<li>Once the user has expired, Informatica gets <strong>ORA-28001: the password has expired</strong> when it tries to connect</li>
<li>Informatica does not handle ORA-28001 correctly</li>
<li>It appears that it leaves the connection open</li>
<li>It then retries a few seconds later</li>
<li>The connections stack up, each taking swap space allocated to the Oracle process that the connection spawns</li>
<li>Eventually the server runs out of resource and Oracle crashes</li>
<li>At midnight another Informatica component (&quot;[Domain Monitor]&quot;) tries to update a database table (part of the Informatica repository), and gets the ORA-28001 error.</li>
<li>This second component (&quot;[Domain Monitor]&quot;) correctly takes the error as fatal and aborts the Informatica server process</li>
</ul>
<h2 id="resolution">Resolution&nbsp;<a class="headline-hash" href="#resolution">ðŸ”—</a> </h2>
<p>In my opinion, Informatica should consistently treat ORA-28001 as fatal.</p>
<p>At the very least, if Informatica isn&rsquo;t treating ORA-28001 as fatal it should close the connection to the database correctly.</p>
<hr>
<p><a href="/2010/10/18/when-is-a-bug-not-a-bug-when-its-a-design-decision/">An update from Informatica here</a></p>

</article>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
			
				
					<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://www.youtube.com/c/rmoff"><b class="fab fa-youtube-square"></b></a> <a href="https://www.linkedin.com/in/robinmoffatt/"><b class="fab fa-linkedin"></b></a> <em><a rel="me" href="https://data-folks.masto.host/@rmoff">Robin Moffatt</a> is a Principal DevEx Engineer at <a href="https://decodable.co">Decodable</a>. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

				
			
		
		</div>
		
	</div>

		
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2025 
			</p>
		</footer>
		
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75492960-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	</body>
</html>
