<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Categories &bullet; rmoff&#39;s random ramblings</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/categories/kafkacat/">
		
		
		
		<meta name="generator" content="Hugo 0.75.1" />

		
		

		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-categories page-kind-term is-page-false ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/img/default-header-img.jpg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net" title="Home">
						<img src="https://rmoff.net/img/logo.jpg" class="w2 h2 br-100" alt="rmoff&#39;s random ramblings" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://twitter.com/rmoff/"><i class="fab fa-twitter-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">kafkacat</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
						
					</h2>
				</div>

				
				
				
				

			</div>
		</header>
		
		<main role="main">
		
<div class="pa3 pa4-ns w-100 w-70-ns center">
  <section class="w-100 mw8">
  
  
  
  
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/09/IMG_6861.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/10/01/ingesting-xml-data-into-kafka-option-1-the-dirty-hack/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Oct 1, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/10/01/ingesting-xml-data-into-kafka-option-1-the-dirty-hack/" class="color-inherit dim link">Ingesting XML data into Kafka - Option 1: The Dirty Hack</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p><em>üëâ <a href="/2020/10/01/ingesting-xml-data-into-kafka-introduction/">Ingesting XML data into Kafka - Introduction</a></em></p>
</div>
<div class="paragraph">
<p><strong>What would a blog post on <code>rmoff.net</code> be if it didn‚Äôt include the dirty hack option? üòÅ</strong></p>
</div>
<div class="paragraph">
<p><em>The secret to dirty hacks is that they are often rather effective and when needs must, they can suffice. If you‚Äôre prototyping and need to <a href="https://www.urbandictionary.com/define.php?term=JFDI"><strong>JFDI</strong></a>, a dirty hack is just fine. If you‚Äôre looking for code to run in Production, then a dirty hack probably is not fine.</em></p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/10/01/ingesting-xml-data-into-kafka-option-1-the-dirty-hack/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/09/IMG_6880.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/09/30/setting-key-value-when-piping-from-jq-to-kafkacat/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Sep 30, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/09/30/setting-key-value-when-piping-from-jq-to-kafkacat/" class="color-inherit dim link">Setting key value when piping from <code>jq</code> to <code>kafkacat</code></a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>One of my favourite hacks for getting data into Kafka is using kafkacat and <code>stdin</code>, often from <code>jq</code>. You can see this in action with <a href="/2020/03/11/streaming-wi-fi-trace-data-from-raspberry-pi-to-apache-kafka-with-confluent-cloud/">Wi-Fi data</a>, <a href="/2020/01/21/monitoring-sonos-with-ksqldb-influxdb-and-grafana/">IoT data</a>, and data from a <a href="/2018/05/10/quick-n-easy-population-of-realistic-test-data-into-kafka/">REST endpoint</a>. This is fine for getting values into a Kafka message - but Kafka messages are <strong>key</strong>/value, and being able to specify a key is can often be important.</p>
</div>
<div class="paragraph">
<p>Here‚Äôs a way to do that, using a separator and some <code>jq</code> magic. Note that at the moment <a href="https://github.com/edenhill/kafkacat/issues/140">kafkacat only supports single byte separator characters</a>, so you need to choose carefully. If you pick a separator that also appears in your data, it‚Äôs possibly going to have unintended consequences.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/09/30/setting-key-value-when-piping-from-jq-to-kafkacat/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/08/IMG_6248.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/09/08/counting-the-number-of-messages-in-a-kafka-topic/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Sep 8, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/09/08/counting-the-number-of-messages-in-a-kafka-topic/" class="color-inherit dim link">Counting the number of messages in a Kafka topic</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>There‚Äôs ways, and then there‚Äôs ways, to count the number of records/events/messages in a Kafka topic. Most of them are potentially inaccurate, or inefficient, or both. Here‚Äôs one that falls into the <em>potentially inefficient</em> category, using <code>kafkacat</code> to read all the messages and pipe to <code>wc</code> which with the <code>-l</code> will tell you how many lines there are, and since each message is a line, how many messages you have in the Kafka topic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="bash"><span style="color: #008080">$ </span>kafkacat <span style="color: #000080">-b</span> broker:29092 <span style="color: #000080">-t</span> mytestopic <span style="color: #000080">-C</span> <span style="color: #000080">-e</span> <span style="color: #000080">-q</span>| <span style="color: #0086B3">wc</span> <span style="color: #000080">-l</span>
       3</code></pre>
</div>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/09/08/counting-the-number-of-messages-in-a-kafka-topic/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/05/IMG_4466.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/07/03/why-json-isnt-the-same-as-json-schema-in-kafka-connect-converters-viewing-kafka-messages-bytes-as-hex/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Jul 3, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/07/03/why-json-isnt-the-same-as-json-schema-in-kafka-connect-converters-viewing-kafka-messages-bytes-as-hex/" class="color-inherit dim link">Why JSON isn&rsquo;t the same as JSON Schema in Kafka Connect converters (Viewing Kafka messages bytes as hex)</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>I‚Äôve been playing around with the new SerDes (serialisers/deserialisers) that shipped with Confluent Platform 5.5 - <a href="https://docs.confluent.io/current/schema-registry/serdes-develop/index.html">Protobuf, and JSON Schema</a> (these were added to the existing support for Avro). The serialisers (and associated <a href="https://docs.confluent.io/current/schema-registry/connect.html">Kafka Connect converters</a>) take a payload and serialise it into bytes for sending to Kafka, and I was interested in what those bytes look like. For that I used my favourite Kafka swiss-army knife: kafkacat.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/07/03/why-json-isnt-the-same-as-json-schema-in-kafka-connect-converters-viewing-kafka-messages-bytes-as-hex/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/04/IMG_3969.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/04/20/how-to-install-kafkacat-on-fedora/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Apr 20, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/04/20/how-to-install-kafkacat-on-fedora/" class="color-inherit dim link">How to install kafkacat on Fedora</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							kafkacat is one of my go-to tools when working with Kafka. It‚Äôs a producer and consumer, but also a swiss-army knife of debugging and troubleshooting capabilities. So when I built a new Fedora server recently, I needed to get it installed. Unfortunately there‚Äôs no pre-packed install available on yum, so here‚Äôs how to do it manually.
 Pre-requisite installs We‚Äôll need some packages from the Confluent repo so set this up for yum first by creating /etc/yum.
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/04/20/how-to-install-kafkacat-on-fedora/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/04/IMG_3756.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/04/16/a-quick-and-dirty-way-to-monitor-data-arriving-on-kafka/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Apr 16, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/04/16/a-quick-and-dirty-way-to-monitor-data-arriving-on-kafka/" class="color-inherit dim link">A quick and dirty way to monitor data arriving on Kafka</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>I‚Äôve been poking around recently with <a href="https://rmoff.net/2020/03/11/streaming-wi-fi-trace-data-from-raspberry-pi-to-apache-kafka-with-confluent-cloud/">capturing Wi-Fi packet data</a> and streaming it into Apache Kafka, from where I‚Äôm processing and analysing it. Kafka itself is rock-solid - because I‚Äôm using <a href="https://confluent.cloud/signup">‚òÅÔ∏èConfluent Cloud</a> and someone else worries about provisioning it, scaling it, and keeping it running for me. But whilst Kafka works just great, my side of the setup‚Äî<code>tshark</code> running on a Raspberry Pi‚Äîis less than stable. For whatever reason it sometimes stalls and I have to restart the Raspberry Pi and restart the capture process.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/04/16/a-quick-and-dirty-way-to-monitor-data-arriving-on-kafka/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/03/IMG_3332.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/03/11/streaming-wi-fi-trace-data-from-raspberry-pi-to-apache-kafka-with-confluent-cloud/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Mar 11, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/03/11/streaming-wi-fi-trace-data-from-raspberry-pi-to-apache-kafka-with-confluent-cloud/" class="color-inherit dim link">Streaming Wi-Fi trace data from Raspberry Pi to Apache Kafka with Confluent Cloud</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							Wi-fi is now ubiquitous in most populated areas, and the way the devices communicate leaves a lot of &#39;digital exhaust&#39;. Usually a computer will have a Wi-Fi device that‚Äôs configured to connect to a given network, but often these devices can be configured instead to pick up the background Wi-Fi chatter of surrounding devices.
 There are good reasons‚Äîand bad‚Äîfor doing this. Just like taking apart equipment to understand how it works teaches us things, so being able to dissect and examine protocol traffic lets us learn about this.
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/03/11/streaming-wi-fi-trace-data-from-raspberry-pi-to-apache-kafka-with-confluent-cloud/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/02/IMG_2326.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/02/07/primitive-keys-in-ksqldb/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Feb 7, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/02/07/primitive-keys-in-ksqldb/" class="color-inherit dim link">Primitive Keys in ksqlDB</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>ksqlDB 0.7 will add support for message keys as primitive data types beyond just <code>STRING</code> (which is all we‚Äôve had to date). That means that Kafka messages are going to be much easier to work with, and require less wrangling to get into the form in which you need them. Take an example of a database table that you‚Äôve ingested into a Kafka topic, and want to join to a stream of events. Previously you‚Äôd have had to take the Kafka topic into which the table had been ingested and run a ksqlDB processor to re-key the messages such that ksqlDB could join on them. <em>Friends, I am here to tell you that this is no longer needed!</em></p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/02/07/primitive-keys-in-ksqldb/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/01/IMG_2254.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/01/23/notes-on-getting-data-into-influxdb-from-kafka-with-kafka-connect/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Jan 23, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/01/23/notes-on-getting-data-into-influxdb-from-kafka-with-kafka-connect/" class="color-inherit dim link">Notes on getting data into InfluxDB from Kafka with Kafka Connect</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>You can download the InfluxDB connector for Kafka Connect <a href="https://www.confluent.io/hub/confluentinc/kafka-connect-influxdb">here</a>. Documentation for it is <a href="https://docs.confluent.io/current/connect/kafka-connect-influxdb/influx-db-sink-connector/">here</a>.</p>
</div>
<div class="paragraph">
<p>When a message from your source Kafka topic is written to InfluxDB the InfluxDB values are set thus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Timestamp</strong> is taken from the Kafka message timestamp (which is either set by your producer, or the time at which it was received by the broker)</p>
</li>
<li>
<p><strong>Tag(s)</strong> are taken from the <code>tags</code> field in the message. This field must be a <code>map</code> type - see below</p>
</li>
<li>
<p><strong>Value</strong> fields are taken from the rest of the message, and must be numeric or boolean</p>
</li>
<li>
<p><strong>Measurement name</strong> can be specified as a field of the message, or hardcoded in the connector config.</p>
</li>
</ul>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/01/23/notes-on-getting-data-into-influxdb-from-kafka-with-kafka-connect/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2020/01/IMG_2259.jpeg'); background-position: center;">
					<a href="https://rmoff.net/2020/01/21/monitoring-sonos-with-ksqldb-influxdb-and-grafana/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Jan 21, 2020
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2020/01/21/monitoring-sonos-with-ksqldb-influxdb-and-grafana/" class="color-inherit dim link">Monitoring Sonos with ksqlDB, InfluxDB, and Grafana</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							I‚Äôm quite a fan of Sonos audio equipment but recently had some trouble with some of the devices glitching and even cutting out whilst playing. Under the covers Sonos stuff is running Linux (of course) and exposes some diagnostics through a rudimentary frontend that you can access at http://&lt;sonos player IP&gt;:1400/support/review:
   Whilst this gives you the current state, you can‚Äôt get historical data on it. It felt like the problems were happening &#34;all the time&#34;, but were they actually?
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2020/01/21/monitoring-sonos-with-ksqldb-influxdb-and-grafana/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/10/IMG_2849.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/10/16/using-kafka-connect-and-debezium-with-confluent-cloud/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Oct 16, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/10/16/using-kafka-connect-and-debezium-with-confluent-cloud/" class="color-inherit dim link">Using Kafka Connect and Debezium with Confluent Cloud</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>This is based on using <a href="https://confluent.cloud">Confluent Cloud</a> to provide your managed Kafka and Schema Registry. All that you run yourself is the Kafka Connect worker.</p>
</div>
<div class="paragraph">
<p>Optionally, you can use this <a href="https://github.com/rmoff/debezium-ccloud/blob/master/docker-compose.yml">Docker Compose</a> to run the worker and a sample MySQL database.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/10/16/using-kafka-connect-and-debezium-with-confluent-cloud/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/10/IMG_0170.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Oct 15, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/" class="color-inherit dim link">Skipping bad records with the Kafka Connect JDBC sink connector</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Kafka Connect framework provides generic <a href="https://www.confluent.io/blog/kafka-connect-deep-dive-error-handling-dead-letter-queues">error handling and dead-letter queue capabilities</a> which are available for problems with [de]serialisation and Single Message Transforms. When it comes to errors that a connector may encounter doing the actual <code>pull</code> or <code>put</code> of data from the source/target system, it‚Äôs down to the connector itself to implement logic around that. For example, the Elasticsearch sink connector provides configuration (<code>behavior.on.malformed.documents</code>) that can be set so that a single bad record won‚Äôt halt the pipeline. Others, such as the JDBC Sink connector, don‚Äôt provide this <a href="https://github.com/confluentinc/kafka-connect-jdbc/issues/721">yet</a>. That means that if you hit this problem, you need to manually unblock it yourself. One way is to manually move the offset of the consumer on past the bad message.</p>
</div>
<div class="paragraph">
<p><strong>TL;DR</strong> : You can use <code>kafka-consumer-groups --reset-offsets --to-offset &lt;x&gt;</code> to manually move the connector past a bad message</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/09/IMG_2657.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/09/29/copying-data-between-kafka-clusters-with-kafkacat/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Sep 29, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/09/29/copying-data-between-kafka-clusters-with-kafkacat/" class="color-inherit dim link">Copying data between Kafka clusters with Kafkacat</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="sect1">
<h2 id="_kafkacat_gives_you_kafka_super_powers">kafkacat gives you Kafka super powers üòé</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I‚Äôve <a href="https://rmoff.net/categories/kafkacat/">written before</a> about <a href="https://github.com/edenhill/kafkacat">kafkacat</a> and what a great tool it is for doing lots of useful things as a developer with Kafka. I used it too in <a href="https://talks.rmoff.net/8Oruwt/on-track-with-apache-kafka-building-a-streaming-etl-solution-with-rail-data#s9tMEWG">a recent demo</a> that I built in which data needed manipulating in a way that I couldn‚Äôt easily elsewhere. Today I want share a very simple but powerful use for kafkacat as both a consumer and producer: copying data from one Kafka cluster to another. In this instance it‚Äôs getting data from <a href="https://confluent.cloud/">Confluent Cloud</a> down to a local cluster.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/09/29/copying-data-between-kafka-clusters-with-kafkacat/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/08/IMG_9079.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/08/15/reset-kafka-connect-source-connector-offsets/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Aug 15, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/08/15/reset-kafka-connect-source-connector-offsets/" class="color-inherit dim link">Reset Kafka Connect Source Connector Offsets</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							Kafka Connect in distributed mode uses Kafka itself to persist the offsets of any source connectors. This is a great way to do things as it means that you can easily add more workers, rebuild existing ones, etc without having to worry about where the state is persisted. I personally always recommend using distributed mode, even if just for a single worker instance - it just makes things easier, and more standard.
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/08/15/reset-kafka-connect-source-connector-offsets/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/06/IMG_0644.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/06/23/manually-delete-a-connector-from-kafka-connect/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Jun 23, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/06/23/manually-delete-a-connector-from-kafka-connect/" class="color-inherit dim link">Manually delete a connector from Kafka Connect</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>Kafka Connect has as <a href="https://docs.confluent.io/current/connect/references/restapi.html">REST API</a> through which all config should be done, including removing connectors that have been created. Sometimes though, you might have reason to want to manually do this‚Äîand since Kafka Connect running in distributed mode uses Kafka as its persistent data store, you can achieve this by manually writing to the topic yourself.</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/06/23/manually-delete-a-connector-from-kafka-connect/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2019/05/IMG_9954.jpg'); background-position: center;">
					<a href="https://rmoff.net/2019/05/22/deleting-a-connector-in-kafka-connect-without-the-rest-api/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> May 22, 2019
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2019/05/22/deleting-a-connector-in-kafka-connect-without-the-rest-api/" class="color-inherit dim link">Deleting a Connector in Kafka Connect without the REST API</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<div class="paragraph">
<p>Kafka Connect exposes a <a href="https://docs.confluent.io/current/connect/references/restapi.html">REST interface</a> through which all config and monitoring operations can be done. You can create connectors, delete them, restart them, check their status, and so on. But, I found a situation recently in which I needed to delete a connector and couldn‚Äôt do so with the REST API. Here‚Äôs another way to do it, by amending the configuration Kafka topic that Kafka Connect in distributed mode uses to persist configuration information for connectors. Note that this is not a recommended way of working with Kafka Connect‚Äîthe REST API is there for a good reason :)</p>
</div>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2019/05/22/deleting-a-connector-in-kafka-connect-without-the-rest-api/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2018/09/2018-09-04_10-25-48-1.png'); background-position: center;">
					<a href="https://rmoff.net/2018/09/04/sending-multiline-messages-to-kafka/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> Sep 4, 2018
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2018/09/04/sending-multiline-messages-to-kafka/" class="color-inherit dim link">Sending multiline messages to Kafka</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							(SO answer repost)
You can use kafkacat to send messages to Kafka that include line breaks. To do this, use its -D operator to specify a custom message delimiter (in this example /):
kafkacat -b kafka:29092 \ -t test_topic_01 \ -D/ \ -P &lt;&lt;EOF this is a string message with a line break/this is another message with two line breaks! EOF  Note that the delimiter must be a single byte - multi-byte chars will end up getting included in the resulting message See issue #140
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2018/09/04/sending-multiline-messages-to-kafka/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
      <div class="relative w-100">
	<article>
		<div class="db pv4 ph3 ph0-l no-underline dark-gray">
			<div class="flex flex-column flex-row-ns">
				
				<div class="mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2018/05/IMG_2304.jpg'); background-position: center;">
					<a href="https://rmoff.net/2018/05/10/quick-n-easy-population-of-realistic-test-data-into-kafka/" class="sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
						<i class="mt3 mt5-l child far fa-calendar-alt"></i> May 10, 2018
					</a>
				</div>
				
				<div class="w-100 w6-ns pl3-ns">
					<h1 class="f3 fw1 mt0 lh-title"><a href="https://rmoff.net/2018/05/10/quick-n-easy-population-of-realistic-test-data-into-kafka/" class="color-inherit dim link">Quick &lsquo;n Easy Population of Realistic Test Data into Kafka</a></h1>
					<div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
						
							<p><strong>tl;dr</strong> Use <code>curl</code> to pull data from the Mockaroo REST endpoint, and pipe it into <code>kafkacat</code>, thus:</p>
<pre><code>curl -s &quot;https://api.mockaroo.com/api/d5a195e0?count=2&amp;key=ff7856d0&quot;| \
kafkacat -b localhost:9092 -t purchases -P
</code></pre>
							<p class="pa0 sans-serif f7"><a class="ba br3 pa2 link" href="https://rmoff.net/2018/05/10/quick-n-easy-population-of-realistic-test-data-into-kafka/">Continue Reading <i class="fas fa-chevron-circle-right"></i></a></p>
						
					</div>
				</div>
			</div>
		</div>
	</article>
</div>

    
  
  </section>
</div>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
				<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --> <em>Robin Moffatt is a Senior Developer Advocate at Confluent, and an Oracle ACE Director (Alumnus). He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

			
		
		</div>
		
	</div>

		
		
<footer class="w-100 sans-serif" role="contentinfo">
	<nav class="w-third-l pb3 f6 center db" role="navigation">

</nav>
</footer>

		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2020 
			</p>
		</footer>
		
	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75492960-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	
	</body>
</html>
