<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kibana on rmoff&#39;s random ramblings</title>
    <link>https://rmoff.net/categories/kibana/</link>
    <description>Recent content in Kibana on rmoff&#39;s random ramblings</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 04 Mar 2021 09:23:05 +0000</lastBuildDate>
    <atom:link href="https://rmoff.net/categories/kibana/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Using Open Sea Map data in Kibana maps</title>
      <link>https://rmoff.net/2021/03/04/using-open-sea-map-data-in-kibana-maps/</link>
      <pubDate>Thu, 04 Mar 2021 09:23:05 +0000</pubDate>
      <guid>https://rmoff.net/2021/03/04/using-open-sea-map-data-in-kibana-maps/</guid>
      <description>&lt;div class=&#34;paragraph&#34;&gt;&#xA;&lt;p&gt;Kibana’s map functionality is a powerful way to visualise data that has a location element in it. I was recently working with data about ships at sea, and whilst the built in &lt;code&gt;Road map&lt;/code&gt; is very good it doesn’t show much maritime detail.&lt;/p&gt;&#xA;&lt;/div&gt;&#xA;&lt;div class=&#34;imageblock&#34;&gt;&#xA;&lt;div class=&#34;content&#34;&gt;&#xA;&lt;img src=&#34;https://rmoff.net/images/2021/03/maps01.png&#34; alt=&#34;maps01&#34;/&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&lt;div class=&#34;paragraph&#34;&gt;&#xA;&lt;p&gt;Kibana’s map visualisation has the option to pull in additional visual information from other places (known as tile servers). I found &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/Tile_servers&#34;&gt;a list of Tile servers&lt;/a&gt;, which had details of &lt;a href=&#34;https://wiki.openstreetmap.org/wiki/OpenSeaMap&#34;&gt;OpenSeaMap&lt;/a&gt; which includes:&lt;/p&gt;&#xA;&lt;/div&gt;</description>
    </item>
    <item>
      <title>Window Timestamps in KSQL / Integration with Elasticsearch</title>
      <link>https://rmoff.net/2018/09/03/window-timestamps-in-ksql-/-integration-with-elasticsearch/</link>
      <pubDate>Mon, 03 Sep 2018 16:16:30 +0000</pubDate>
      <guid>https://rmoff.net/2018/09/03/window-timestamps-in-ksql-/-integration-with-elasticsearch/</guid>
      <description>&lt;p&gt;KSQL provides the ability to create windowed aggregations. For example,&#xA;count the number of messages in a 1 minute window, grouped by a&#xA;particular column:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;CREATE TABLE RATINGS_BY_CLUB_STATUS AS \&#xA;SELECT CLUB_STATUS, COUNT(*) AS RATING_COUNT \&#xA;FROM RATINGS_WITH_CUSTOMER_DATA \&#xA;     WINDOW TUMBLING (SIZE 1 MINUTES) \&#xA;GROUP BY CLUB_STATUS;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;How KSQL, and Kafka Streams, stores the window timestamp associated with&#xA;an aggregate, has recently changed. &lt;a href=&#34;https://github.com/confluentinc/ksql/issues/1497&#34;&gt;See #1497 for&#xA;details&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Whereas previously the &lt;em&gt;Kafka message timestamp&lt;/em&gt; (accessible through the&#xA;KSQL &lt;code&gt;ROWTIME&lt;/code&gt; system column) stored the start of the window for which&#xA;the aggregate had been calculated, this changed in July 2018 to instead&#xA;be the timestamp of the latest message to update that aggregate value.&#xA;This was in Apache Kafka 2.0 and Confluent Platform 5.0, and back-ported&#xA;to previous versions.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Kibana Timelion - Anomaly Detection</title>
      <link>https://rmoff.net/2017/01/18/kibana-timelion-anomaly-detection/</link>
      <pubDate>Wed, 18 Jan 2017 19:53:10 +0000</pubDate>
      <guid>https://rmoff.net/2017/01/18/kibana-timelion-anomaly-detection/</guid>
      <description>&lt;p&gt;Using the &lt;code&gt;holt&lt;/code&gt; function in Timelion to do anomaly detection on Metricbeat data in Kibana:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://rmoff.net/images/2017/01/holt_-_Timelion_-_Kibana.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;Expression:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$thres=0.02, .es(index=&#39;metricbeat*&#39;,metric=&#39;max:system.cpu.user.pct&#39;).lines(1).if(eq, 0, null).holt(0.9, 0.1, 0.9, 0.5h).color(#eee).lines(10).label(&#39;Prediction&#39;), .es(index=&#39;metricbeat*&#39;,metric=&#39;max:system.cpu.user.pct&#39;).color(#666).lines(1).label(Actual), .es(index=&#39;metricbeat*&#39;,metric=&#39;max:system.cpu.user.pct&#39;).lines(1).if(eq, 0, null).holt(0.9, 0.1, 0.9, 0.5h).subtract(.es(index=&#39;metricbeat*&#39;,metric=&#39;max:system.cpu.user.pct&#39;)).abs().if(lt, $thres, null, .es(index=&#39;metricbeat*&#39;,metric=&#39;max:system.cpu.user.pct&#39;)).points(10,3,0).color(#c66).label(&#39;Anomaly&#39;).title(&#39;max:system.cpu.user.pct / @rmoff&#39;)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;References:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://twitter.com/rashidkpc/status/762754396111327232&#34;&gt;https://twitter.com/rashidkpc/status/762754396111327232&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/elastic/timelion/issues/87&#34;&gt;https://github.com/elastic/timelion/issues/87&lt;/a&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://github.com/elastic/timelion/blob/master/FUNCTIONS.md&#34;&gt;https://github.com/elastic/timelion/blob/master/FUNCTIONS.md&lt;/a&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>Kibana Timelion - Series Calculations - Difference from One Week Ago</title>
      <link>https://rmoff.net/2016/05/23/kibana-timelion-series-calculations-difference-from-one-week-ago/</link>
      <pubDate>Mon, 23 May 2016 09:46:28 +0000</pubDate>
      <guid>https://rmoff.net/2016/05/23/kibana-timelion-series-calculations-difference-from-one-week-ago/</guid>
      <description>&lt;p&gt;I wrote recently about &lt;a href=&#34;https://rmoff.net/2016/03/29/experiments-with-kibana-timelion/&#34;&gt;Kibana&amp;rsquo;s excellent Timelion feature&lt;/a&gt;, which brings time-series visualisations to Kibana. In the comments Ben Huang asked:&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;do you know how to show whats the difference between this Friday and last Friday by Timelion?&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;So I thought I&amp;rsquo;d answer properly here.&lt;/p&gt;&#xA;&lt;p&gt;Timelion includes mathematical functions including &lt;code&gt;add&lt;/code&gt; and &lt;code&gt;subtract&lt;/code&gt;, as well as the ability to show data &lt;code&gt;offset&lt;/code&gt; by an amount of time. So to answer Ben&amp;rsquo;s query, we combine the two.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Monitoring Logstash Ingest Rates with Elasticsearch, Kibana, and Timelion</title>
      <link>https://rmoff.net/2016/05/13/monitoring-logstash-ingest-rates-with-elasticsearch-kibana-and-timelion/</link>
      <pubDate>Fri, 13 May 2016 05:45:19 +0000</pubDate>
      <guid>https://rmoff.net/2016/05/13/monitoring-logstash-ingest-rates-with-elasticsearch-kibana-and-timelion/</guid>
      <description>&lt;p&gt;Yesterday I wrote about &lt;a href=&#34;https://rmoff.net/2016/05/12/monitoring-logstash-ingest-rates-with-influxdb-and-grafana/&#34;&gt;Monitoring Logstash Ingest Rates with InfluxDB and Grafana&lt;/a&gt;, in which InfluxDB provided the data store for the ingest rate data, and Grafana the frontend.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://twitter.com/warkolm/&#34;&gt;Mark Walkom&lt;/a&gt; reminded me on twitter that the next release of Logstash will add more functionality in this area - and that it&amp;rsquo;ll integrate back into the Elastic stack:&lt;/p&gt;&#xA;&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;&lt;a href=&#34;https://twitter.com/rmoff&#34;&gt;@rmoff&lt;/a&gt; nice, LS 5.0 will have APIs exposing metrics too. they’ll be integrated back into Marvel/Monitoring! :)&lt;/p&gt;</description>
    </item>
    <item>
      <title>Using R to Denormalise Data for Analysis in Kibana</title>
      <link>https://rmoff.net/2016/04/24/using-r-to-denormalise-data-for-analysis-in-kibana/</link>
      <pubDate>Sun, 24 Apr 2016 12:22:12 +0000</pubDate>
      <guid>https://rmoff.net/2016/04/24/using-r-to-denormalise-data-for-analysis-in-kibana/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.elastic.co/products/kibana&#34;&gt;Kibana&lt;/a&gt; is a tool from &lt;a href=&#34;https://www.elastic.co/&#34;&gt;Elastic&lt;/a&gt; that makes analysis of data held in &lt;a href=&#34;https://www.elastic.co/products/elasticsearch&#34;&gt;Elasticsearch&lt;/a&gt; really easy and very powerful. Because Elasticsearch has very loose schema that can evolve on demand it makes it very quick to get up and running with some cool visualisations and analysis on any set of data. I demonstrated this in a &lt;a href=&#34;http://www.rittmanmead.com/2015/04/using-the-elk-stack-to-analyse-donors-choose-data/&#34;&gt;blog post last year&lt;/a&gt;, taking a CSV file and loading it into Elasticsearch via Logstash.&lt;/p&gt;&#xA;&lt;p&gt;This is all great, but the one real sticking point with analytics in Elasticsearch/Kibana is that it needs the data to be &lt;strong&gt;denormalised&lt;/strong&gt;. That is, you can&amp;rsquo;t give it a bunch of sources of data and it perform the joins for you in Kibana - it just doesn&amp;rsquo;t work like that. If you&amp;rsquo;re using Elasticsearch alone for analytics, maybe with a bespoke application, &lt;a href=&#34;https://www.elastic.co/guide/en/elasticsearch/guide/current/relations.html&#34;&gt;there are ways of approaching it&lt;/a&gt;, but not through Kibana. Now, depending on where the data is coming from, this may not be a problem. For example, if you use the &lt;a href=&#34;https://www.elastic.co/guide/en/logstash/current/plugins-inputs-jdbc.html&#34;&gt;JDBC Logstash input&lt;/a&gt; to pull from an RDBMS source you can specify a complex SQL query going across multiple tables, so that the data when it hits Elasticsearch is nice and denormalised and ready for fun in Kibana. But, source data doesn&amp;rsquo;t always come this way, and it&amp;rsquo;s useful to have a way to work with the data still when it is like this.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Decoupling the Data Pipeline with Kafka - A (Very) Simple Real Life Example</title>
      <link>https://rmoff.net/2016/04/12/decoupling-the-data-pipeline-with-kafka-a-very-simple-real-life-example/</link>
      <pubDate>Tue, 12 Apr 2016 21:50:46 +0000</pubDate>
      <guid>https://rmoff.net/2016/04/12/decoupling-the-data-pipeline-with-kafka-a-very-simple-real-life-example/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve recently been playing around with the ELK stack (&lt;a href=&#34;https://www.elastic.co/blog/heya-elastic-stack-and-x-pack&#34;&gt;now officially known as the Elastic stack&lt;/a&gt;) collecting data from &lt;a href=&#34;https://rmoff.net/2016/03/03/obihackers-irc-channel/&#34;&gt;an IRC channel&lt;/a&gt; with Elastic&amp;rsquo;s Logstash, storing it in Elasticsearch and &lt;a href=&#34;https://rmoff.net/2016/03/24/my-latest-irc-client-kibana/&#34;&gt;analysing it with Kibana&lt;/a&gt;. But, this isn&amp;rsquo;t an &amp;ldquo;ELK&amp;rdquo; post - this is a Kafka post! ELK is just some example data manipulation tooling that helps demonstrate the principles.&lt;/p&gt;&#xA;&lt;p&gt;As I &lt;a href=&#34;http://www.rittmanmead.com/2015/10/forays-into-kafka-enabling-flexible-data-pipelines/&#34;&gt;wrote about last year&lt;/a&gt;, Apache Kafka provides a handy way to build flexible &amp;ldquo;pipelines&amp;rdquo;. Today I&amp;rsquo;m writing up a short real-world example of this in practice. There are three elements to the flexibility that I really want to highlight:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Experiments with Kibana Timelion</title>
      <link>https://rmoff.net/2016/03/29/experiments-with-kibana-timelion/</link>
      <pubDate>Tue, 29 Mar 2016 21:07:00 +0000</pubDate>
      <guid>https://rmoff.net/2016/03/29/experiments-with-kibana-timelion/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.elastic.co/blog/timelion-timeline&#34;&gt;Timelion&lt;/a&gt; was released in November 2015 and with the 4.4.2 release of &lt;a href=&#34;https://www.elastic.co/products/kibana&#34;&gt;Kibana&lt;/a&gt; is available as a native visualisation once installed. It adds some powerful capabilities to Kibana as an timeseries analysis tool, using its own data manipulation language.&lt;/p&gt;&#xA;&lt;p&gt;Installing Timelion is a piece of cake:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;./bin/kibana plugin -i kibana/timelion&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;After restarting Kibana, you&amp;rsquo;ll see it as an option from the application picker&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://rmoff.net/images/2016/03/2016-03-29_23-13-49.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;There&amp;rsquo;s a bit of a learning curve with Timelion, but it&amp;rsquo;s worth it. &lt;a href=&#34;https://www.elastic.co/blog/timelion-timeline&#34;&gt;The blog&lt;/a&gt; gives some basics, and the built-in help is really good too:&lt;/p&gt;</description>
    </item>
    <item>
      <title>My latest IRC client : Kibana</title>
      <link>https://rmoff.net/2016/03/24/my-latest-irc-client-kibana/</link>
      <pubDate>Thu, 24 Mar 2016 21:38:02 +0000</pubDate>
      <guid>https://rmoff.net/2016/03/24/my-latest-irc-client-kibana/</guid>
      <description>&lt;p&gt;OK, maybe that&amp;rsquo;s not entirely true. But my &lt;em&gt;read-only&lt;/em&gt; client, certainly.&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://rmoff.net/images/2016/03/2016-03-24_21-15-30.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;I was perusing the &lt;a href=&#34;https://www.elastic.co/guide/en/logstash/current/input-plugins.html&#34;&gt;Logstash input plugins&lt;/a&gt; recently when I noticed that there was one for &lt;a href=&#34;https://www.elastic.co/guide/en/logstash/current/plugins-inputs-irc.html&#34;&gt;IRC&lt;/a&gt;. Being a fan of IRC and a regular on the &lt;a href=&#34;https://rmoff.net/2016/03/03/obihackers-irc-channel/&#34;&gt;#obihackers&lt;/a&gt; channel, I thought this could be fun and yet another great example of how easy &lt;a href=&#34;http://elastic.co&#34;&gt;the Elastic stack&lt;/a&gt; is to work with.&lt;/p&gt;&#xA;&lt;p&gt;Installation is a piece of cake:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/zip/elasticsearch/2.2.1/elasticsearch-2.2.1.zip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://download.elastic.co/logstash/logstash/logstash-2.2.2.zip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://download.elastic.co/kibana/kibana/kibana-4.4.2-linux-x64.tar.gz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;unzip &lt;span style=&#34;color:#b62;font-weight:bold&#34;&gt;\*&lt;/span&gt;.zip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tar -xf kibana-4.4.2-linux-x64.tar.gz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mv elasticsearch-2.2.1 logstash-2.2.2 kibana-4.4.2-linux-x64 /opt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(you&amp;rsquo;ll also need Oracle JDK installed if not already, &lt;a href=&#34;http://www.jamescoyle.net/how-to/1897-download-oracle-java-from-the-terminal-with-wget&#34;&gt;here&amp;rsquo;s a handy way to get it from the CLI&lt;/a&gt;).&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
