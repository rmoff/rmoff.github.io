<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kafka-Avro-Console-Producer on rmoff&#39;s random ramblings</title>
    <link>https://rmoff.net/categories/kafka-avro-console-producer/</link>
    <description>Recent content in Kafka-Avro-Console-Producer on rmoff&#39;s random ramblings</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 02 Dec 2016 11:35:57 +0000</lastBuildDate>
    <atom:link href="https://rmoff.net/categories/kafka-avro-console-producer/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>kafka-avro-console-producer - Error registering Avro schema / io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException</title>
      <link>https://rmoff.net/2016/12/02/kafka-avro-console-producer-error-registering-avro-schema-/-io.confluent.kafka.schemaregistry.client.rest.exceptions.restclientexception/</link>
      <pubDate>Fri, 02 Dec 2016 11:35:57 +0000</pubDate>
      <guid>https://rmoff.net/2016/12/02/kafka-avro-console-producer-error-registering-avro-schema-/-io.confluent.kafka.schemaregistry.client.rest.exceptions.restclientexception/</guid>
      <description>&lt;p&gt;By default, the &lt;code&gt;kafka-avro-console-producer&lt;/code&gt; will assume that the schema registry is on port 8081, and happily connect to it. Unfortunately, this can lead to some weird errors if another process happens to be listening on port 8081 &lt;em&gt;already&lt;/em&gt;!&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[oracle@bigdatalite tmp]$ kafka-avro-console-producer \&#xA;&amp;gt;  --broker-list localhost:9092 --topic kudu_test \&#xA;&amp;gt;  --property value.schema=&amp;#39;{&amp;#34;type&amp;#34;:&amp;#34;record&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;myrecord&amp;#34;,&amp;#34;fields&amp;#34;:[{&amp;#34;name&amp;#34;:&amp;#34;id&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;int&amp;#34;},{&amp;#34;name&amp;#34;:&amp;#34;random_field&amp;#34;, &amp;#34;type&amp;#34;: &amp;#34;string&amp;#34;}]}&amp;#39;&#xA;&#xA;{&amp;#34;id&amp;#34;: 999, &amp;#34;random_field&amp;#34;: &amp;#34;foo&amp;#34;}&#xA;&#xA;org.apache.kafka.common.errors.SerializationException: Error registering Avro schema: {&amp;#34;type&amp;#34;:&amp;#34;record&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;myrecord&amp;#34;,&amp;#34;fields&amp;#34;:[{&amp;#34;name&amp;#34;:&amp;#34;id&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;int&amp;#34;},{&amp;#34;name&amp;#34;:&amp;#34;random_field&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;string&amp;#34;}]}&#xA;Caused by: io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Unexpected character (&amp;#39;&amp;lt;&amp;#39; (code 60)): expected a valid value (number, String, array, object, &amp;#39;true&amp;#39;, &amp;#39;false&amp;#39; or &amp;#39;null&amp;#39;)&#xA; at [Source: sun.net.www.protocol.http.HttpURLConnection$HttpInputStream@4e0ae11f; line: 1, column: 2]; error code: 50005&#xA;        at io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest(RestService.java:170)&#xA;        at io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest(RestService.java:187)&#xA;        at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:238)&#xA;        at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:230)&#xA;        at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema(RestService.java:225)&#xA;        at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.registerAndGetId(CachedSchemaRegistryClient.java:59)&#xA;        at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register(CachedSchemaRegistryClient.java:91)&#xA;        at io.confluent.kafka.serializers.AbstractKafkaAvroSerializer.serializeImpl(AbstractKafkaAvroSerializer.java:72)&#xA;        at io.confluent.kafka.formatter.AvroMessageReader.readMessage(AvroMessageReader.java:158)&#xA;        at kafka.tools.ConsoleProducer$.main(ConsoleProducer.scala:55)&#xA;        at kafka.tools.ConsoleProducer.main(ConsoleProducer.scala)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Solution? Make sure you specify the schema URL when you launch the producer, using &lt;code&gt;--property schema.registry.url=http://localhost:18081&lt;/code&gt; :&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
