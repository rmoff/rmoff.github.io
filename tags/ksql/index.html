<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8" />

  
  <title>
  Tag → ksql
  
   | rmoff.net
</title>

  
  
  <link href="//cdn.jsdelivr.net" rel="dns-prefetch">
  <link href="//cdnjs.cloudflare.com" rel="dns-prefetch">
  <link href="//at.alicdn.com" rel="dns-prefetch">
  <link href="//fonts.googleapis.com" rel="dns-prefetch">
  <link href="//fonts.gstatic.com" rel="dns-prefetch">
  
  
  
  
  

  

  
  
  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@gohugoio">
  <meta name="twitter:title" content="rmoff.net">
  
  <meta name="twitter:image" content="/images/avatar.jpg">

  
  <meta property="og:type" content="website">
  <meta property="og:title" content="rmoff.net">
  
  <meta property="og:url" content="https://rmoff.github.io/tags/ksql/">
  <meta property="og:image" content="/images/avatar.jpg">




<meta name="generator" content="Hugo 0.52">


<link rel="canonical" href="https://rmoff.github.io/tags/ksql/">
<link rel="alternate" type="application/rss+xml" href="https://rmoff.github.io/tags/ksql/index.xml" title="rmoff.net">

<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no">
<meta http-equiv="Cache-Control" content="no-transform">


<meta name="robots" content="index,follow">
<meta name="referrer" content="origin-when-cross-origin">







<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="rmoff.net">
<meta name="msapplication-tooltip" content="rmoff.net">
<meta name='msapplication-navbutton-color' content="#5fbf5e">
<meta name="msapplication-TileColor" content="#5fbf5e">
<meta name="msapplication-TileImage" content="/images/tile-image-windows.png">
<link rel="icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" sizes="192x192" href="/images/touch-icon-android.png">
<link rel="apple-touch-icon" href="/images/touch-icon-apple.png">


<link rel="preload" href="/styles/main.min.css" as="style">
<link rel="preload" href="https://fonts.googleapis.com/css?family=Lobster" as="style">
<link rel="preload" href="/images/avatar.jpg" as="image">
<link rel="preload" href="/images/grey-prism.svg" as="image">


<style>
  body {
    background: rgb(244, 243, 241) url('/images/grey-prism.svg') repeat fixed;
  }
</style>
<link rel="stylesheet" href="/styles/main.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">


<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js"></script>





  
  
<!--[if lte IE 8]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js"></script>
<![endif]-->

<!--[if lte IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js"></script>
<![endif]-->


<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@14.2.1/dist/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="/images/avatar.jpg" alt="Avatar">
  
  <h2 class="title">rmoff.net</h2>
  
  <p class="subtitle"></p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list"></ul>
  </nav>
</header>

  <section class="main post-list">
    <header class="list-header offscreen">
      <h2 class="list-label">Posts List</h2>
    </header>
    
    
      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/streaming-data-from-oracle-into-kafka-december-2018/" class="post-link">Streaming data from Oracle into Kafka (December 2018)</a></h3>
    <p class="post-meta">@Robin Moffatt · Dec 12, 2018 · 15 min read</p>
  </header>
  
  <p class="post-summary">This is a short summary discussing what the options are for integrating Oracle RDBMS into Kafka, as of December 2018. For a more detailed background to why and how at a broader level for all databases (not just Oracle) see this blog and these slides.
What techniques &amp; tools are there? As of December 2018, this is what the line-up looks like:
 Query-based CDC  The JDBC Connector for Kafka Connect, polls the database for new or changed data based on an incrementing ID column and/or update timestamp  Log-based CDC</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/streaming-data-from-oracle-into-kafka-december-2018/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/flatten-cdc-records-in-ksql/" class="post-link">Flatten CDC records in KSQL</a></h3>
    <p class="post-meta">@Robin Moffatt · Oct 11, 2018 · 3 min read</p>
  </header>
  
  <p class="post-summary">The problem - nested messages in Kafka Data comes into Kafka in many shapes and sizes. Sometimes it’s from CDC tools, and may be nested like this:
{ &#34;SCN&#34;: 12206116841348, &#34;SEG_OWNER&#34;: &#34;KFKUSER&#34;, &#34;TABLE_NAME&#34;: &#34;CDCTAB2&#34;, &#34;TIMESTAMP&#34;: 1539162785000, &#34;SQL_REDO&#34;: &#34;insert into \&#34;KFKUSER\&#34;.\&#34;CDCTAB2\&#34;(\&#34;ID\&#34;,\&#34;CITY\&#34;,\&#34;NATIONALITY\&#34;) values (634789,&#39;AHMEDABAD&#39;,&#39;INDIA&#39;)&#34;, &#34;OPERATION&#34;: &#34;INSERT&#34;, &#34;data&#34;: { &#34;value&#34;: { &#34;ID&#34;: 634789, &#34;CITY&#34;: { &#34;string&#34;: &#34;AHMEDABAD&#34; }, &#34;NATIONALITY&#34;: { &#34;string&#34;: &#34;INDIA&#34; } } }, &#34;before&#34;: null }  Note that the ‘payload’ is nested under data-&gt;value.</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/flatten-cdc-records-in-ksql/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/exploring-jmx-with-jmxterm/" class="post-link">Exploring JMX with jmxterm</a></h3>
    <p class="post-meta">@Robin Moffatt · Sep 19, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">Check out the jmxterm repository / Download jmxterm from http://wiki.cyclopsgroup.org/jmxterm/
Launch:
java -jar ~/Downloads/jmxterm-1.0.0-uber.jar --url localhost:30002  You can pass the jmx host/port directly, or use the open command once jmxterm launches.
Once connected, use domains to list available domains
$&gt;domains #following domains are available JMImplementation com.sun.management io.confluent.ksql.metrics io.confluent.rest java.lang java.nio java.util.logging kafka.admin.client kafka.consumer kafka.producer kafka.streams [...]  Switch to a particular domain:
$&gt;domain io.confluent.ksql.metrics #domain is set to io.confluent.ksql.metrics  List the available MBeans in a the selected domain (you can also run this without choosing a domain first, to see every MBean, but it’s a long list):</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/exploring-jmx-with-jmxterm/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/window-timestamps-in-ksql-integration-with-elasticsearch/" class="post-link">Window Timestamps in KSQL / Integration with Elasticsearch</a></h3>
    <p class="post-meta">@Robin Moffatt · Sep 3, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">KSQL provides the ability to create windowed aggregations. For example, count the number of messages in a 1 minute window, grouped by a particular column:
CREATE TABLE RATINGS_BY_CLUB_STATUS AS \ SELECT CLUB_STATUS, COUNT(*) AS RATING_COUNT \ FROM RATINGS_WITH_CUSTOMER_DATA \ WINDOW TUMBLING (SIZE 1 MINUTES) \ GROUP BY CLUB_STATUS;  How KSQL, and Kafka Streams, stores the window timestamp associated with an aggregate, has recently changed. See #1497 for details.
Whereas previously the Kafka message timestamp (accessible through the KSQL ROWTIME system column) stored the start of the window for which the aggregate had been calculated, this changed in July 2018 to instead be the timestamp of the latest message to update that aggregate value.</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/window-timestamps-in-ksql-integration-with-elasticsearch/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/analysing-network-data-with-apache-kafka-ksql-and-elasticsearch/" class="post-link">Analysing Network Data with Apache Kafka, KSQL, and Elasticsearch</a></h3>
    <p class="post-meta">@Robin Moffatt · Jun 17, 2018 · 4 min read</p>
  </header>
  
  <p class="post-summary">In this article I demonstrated how to use KSQL to filter streams of network event data. As well as filtering, KSQL can be used to easily enrich streams. In this article we’ll see how this enriched data can be used to drive analysis in Elasticsearch and Kibana—and how KSQL again came into use for building some stream processing as a result of the discovery made.
The data came from my home Ubiquiti router, and took two forms:</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/analysing-network-data-with-apache-kafka-ksql-and-elasticsearch/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://rmoff.github.io/post/stream-table-joins-in-ksql-stream-events-must-be-timestamped-after-the-table-messages/" class="post-link">Stream-Table Joins in KSQL: Stream events must be timestamped after the Table messages</a></h3>
    <p class="post-meta">@Robin Moffatt · May 17, 2018 · 4 min read</p>
  </header>
  
  <p class="post-summary">(preserving this StackOverflow answer for posterity and future Googlers)
tl;dr When doing a stream-table join, your table messages must already exist (and must be timestamped) before the stream messages. If you re-emit your source stream messages, after the table topic is populated, the join will succeed.
Example data Use kafakcat to populate topics:
kafkacat -b localhost:9092 -P -t sessionDetails &lt;&lt;EOF {&#34;Media&#34;:&#34;Foo&#34;,&#34;SessionIdTime&#34;:&#34;2018-05-17 11:25:33 BST&#34;,&#34;SessionIdSeq&#34;:1} {&#34;Media&#34;:&#34;Foo&#34;,&#34;SessionIdTime&#34;:&#34;2018-05-17 11:26:33 BST&#34;,&#34;SessionIdSeq&#34;:2} EOF kafkacat -b localhost:9092 -P -t voipDetails &lt;&lt;EOF {&#34;SessionIdTime&#34;:&#34;2018-05-17 11:25:33 BST&#34;,&#34;SessionIdSeq&#34;:1,&#34;Details&#34;:&#34;Bar1a&#34;} {&#34;SessionIdTime&#34;:&#34;2018-05-17 11:25:33 BST&#34;,&#34;SessionIdSeq&#34;:1,&#34;Details&#34;:&#34;Bar1b&#34;} {&#34;SessionIdTime&#34;:&#34;2018-05-17 11:26:33 BST&#34;,&#34;SessionIdSeq&#34;:2,&#34;Details&#34;:&#34;Bar2&#34;} EOF  Validate topic contents:</p>
  <footer class="post-footer">
    <a class="read-more" href="https://rmoff.github.io/post/stream-table-joins-in-ksql-stream-events-must-be-timestamped-after-the-table-messages/">Read More →</a>
  </footer>
</article>

      
    
    
  </section>
  


<footer class="site-footer">
  <p>© 2017-2018 rmoff.net</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>








<script src="/scripts/index.min.js"></script>








  </body>
</html>
