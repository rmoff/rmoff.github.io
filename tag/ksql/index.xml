<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ksql on rmoff&#39;s random ramblings</title>
    <link>https://rmoff.net/tag/ksql/</link>
    <description>Recent content in Ksql on rmoff&#39;s random ramblings</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 15 Dec 2018 22:00:55 +0000</lastBuildDate>
    <atom:link href="https://rmoff.net/tag/ksql/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Docker Tips and Tricks with Kafka Connect, ksqlDB, and Kafka</title>
      <link>https://rmoff.net/2018/12/15/docker-tips-and-tricks-with-kafka-connect-ksqldb-and-kafka/</link>
      <pubDate>Sat, 15 Dec 2018 22:00:55 +0000</pubDate>
      <guid>https://rmoff.net/2018/12/15/docker-tips-and-tricks-with-kafka-connect-ksqldb-and-kafka/</guid>
      <description>&lt;p&gt;A few years ago a colleague of mine told me about this thing called Docker, and I must admit I dismissed it as a fad…how wrong was I. Docker, and Docker Compose, are one of my key tools of the trade. With them I can build self-contained environments for tutorials, demos, conference talks etc. Tear it down, run it again, without worrying that somewhere a local config changed and will break things.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Window Timestamps in KSQL / Integration with Elasticsearch</title>
      <link>https://rmoff.net/2018/09/03/window-timestamps-in-ksql-/-integration-with-elasticsearch/</link>
      <pubDate>Mon, 03 Sep 2018 16:16:30 +0000</pubDate>
      <guid>https://rmoff.net/2018/09/03/window-timestamps-in-ksql-/-integration-with-elasticsearch/</guid>
      <description>&lt;p&gt;KSQL provides the ability to create windowed aggregations. For example,&#xA;count the number of messages in a 1 minute window, grouped by a&#xA;particular column:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;CREATE TABLE RATINGS_BY_CLUB_STATUS AS \&#xA;SELECT CLUB_STATUS, COUNT(*) AS RATING_COUNT \&#xA;FROM RATINGS_WITH_CUSTOMER_DATA \&#xA;     WINDOW TUMBLING (SIZE 1 MINUTES) \&#xA;GROUP BY CLUB_STATUS;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;How KSQL, and Kafka Streams, stores the window timestamp associated with&#xA;an aggregate, has recently changed. &lt;a href=&#34;https://github.com/confluentinc/ksql/issues/1497&#34;&gt;See #1497 for&#xA;details&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Whereas previously the &lt;em&gt;Kafka message timestamp&lt;/em&gt; (accessible through the&#xA;KSQL &lt;code&gt;ROWTIME&lt;/code&gt; system column) stored the start of the window for which&#xA;the aggregate had been calculated, this changed in July 2018 to instead&#xA;be the timestamp of the latest message to update that aggregate value.&#xA;This was in Apache Kafka 2.0 and Confluent Platform 5.0, and back-ported&#xA;to previous versions.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Analysing Network Data with Apache Kafka, KSQL, and Elasticsearch</title>
      <link>https://rmoff.net/2018/06/17/analysing-network-data-with-apache-kafka-ksql-and-elasticsearch/</link>
      <pubDate>Sun, 17 Jun 2018 11:35:20 +0000</pubDate>
      <guid>https://rmoff.net/2018/06/17/analysing-network-data-with-apache-kafka-ksql-and-elasticsearch/</guid>
      <description>&lt;p&gt;In &lt;a href=&#34;http://cnfl.io/syslogs-filtering&#34;&gt;this article&lt;/a&gt; I demonstrated how to use KSQL to filter streams of network event data. As well as filtering, KSQL can be used to easily &lt;a href=&#34;https://www.confluent.io/blog/real-time-syslog-processing-apache-kafka-ksql-enriching-events-with-external-data/&#34;&gt;enrich streams&lt;/a&gt;. In this article we&amp;rsquo;ll see how this enriched data can be used to drive analysis in Elasticsearch and Kibana—and how KSQL again came into use for building some stream processing as a result of the discovery made.&lt;/p&gt;&#xA;&lt;p&gt;The data came from my home &lt;a href=&#34;https://www.ubnt.com/&#34;&gt;Ubiquiti&lt;/a&gt; router, and took two forms:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Stream-Table Joins in KSQL: Stream events must be timestamped after the Table messages</title>
      <link>https://rmoff.net/2018/05/17/stream-table-joins-in-ksql-stream-events-must-be-timestamped-after-the-table-messages/</link>
      <pubDate>Thu, 17 May 2018 10:16:43 +0000</pubDate>
      <guid>https://rmoff.net/2018/05/17/stream-table-joins-in-ksql-stream-events-must-be-timestamped-after-the-table-messages/</guid>
      <description>&lt;p&gt;(preserving &lt;a href=&#34;https://stackoverflow.com/questions/50371518/kafka-ksql-simple-join-does-not-work/50390022#50390022&#34;&gt;this StackOverflow&lt;/a&gt; answer for posterity and future Googlers)&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt; When doing a stream-table join, your &lt;em&gt;table&lt;/em&gt; messages must already exist (and must be timestamped) &lt;em&gt;before&lt;/em&gt; the stream messages. If you re-emit your source stream messages, after the table topic is populated, the join will succeed.&lt;/p&gt;&#xA;&lt;h3 id=&#34;example-data&#34;&gt;Example data&lt;/h3&gt;&#xA;&lt;p&gt;Use &lt;code&gt;kafakcat&lt;/code&gt; to populate topics:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;kafkacat -b localhost:9092 -P -t sessionDetails &amp;lt;&amp;lt;EOF&#xA;{&amp;quot;Media&amp;quot;:&amp;quot;Foo&amp;quot;,&amp;quot;SessionIdTime&amp;quot;:&amp;quot;2018-05-17 11:25:33 BST&amp;quot;,&amp;quot;SessionIdSeq&amp;quot;:1}&#xA;{&amp;quot;Media&amp;quot;:&amp;quot;Foo&amp;quot;,&amp;quot;SessionIdTime&amp;quot;:&amp;quot;2018-05-17 11:26:33 BST&amp;quot;,&amp;quot;SessionIdSeq&amp;quot;:2}&#xA;EOF&#xA;&#xA;kafkacat -b localhost:9092 -P -t voipDetails &amp;lt;&amp;lt;EOF&#xA;{&amp;quot;SessionIdTime&amp;quot;:&amp;quot;2018-05-17 11:25:33 BST&amp;quot;,&amp;quot;SessionIdSeq&amp;quot;:1,&amp;quot;Details&amp;quot;:&amp;quot;Bar1a&amp;quot;}&#xA;{&amp;quot;SessionIdTime&amp;quot;:&amp;quot;2018-05-17 11:25:33 BST&amp;quot;,&amp;quot;SessionIdSeq&amp;quot;:1,&amp;quot;Details&amp;quot;:&amp;quot;Bar1b&amp;quot;}&#xA;{&amp;quot;SessionIdTime&amp;quot;:&amp;quot;2018-05-17 11:26:33 BST&amp;quot;,&amp;quot;SessionIdSeq&amp;quot;:2,&amp;quot;Details&amp;quot;:&amp;quot;Bar2&amp;quot;}&#xA;EOF&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Validate topic contents:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
