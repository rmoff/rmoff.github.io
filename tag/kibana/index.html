<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Tag &bullet; rmoff&#39;s random ramblings</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/tag/kibana/">
		
		
		
		

		
		

		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/toc.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/retro-cards.css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		
		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only' 
                })
		</script>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>

	</head>
	<body class="ma0 bg-white section-tag page-kind-term is-page-false ">
		
		<header class="cover bg-top" style="background-image: url('https://rmoff.net/img/default-header-img.jpg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				<nav class="hide-print sans-serif  border-box pa3 ph5-l">
					<a href="https://rmoff.net" title="Home">
						<img src="https://rmoff.net/img/logo.jpg" class="w2 h2 br-100" alt="rmoff&#39;s random ramblings" />
					</a>
					<div class="fr h2 pv2 tr">
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net/bio">about</a>
						<a class="link f5 ml2 dim near-white" href="https://talks.rmoff.net">talks</a>
						<a class="link f5 ml2 dim near-white" href="https://bsky.app/profile/rmoff.net"><i class="fa-brands fa-bluesky"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
						<a class="link f5 ml2 dim near-white" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
						<a class="link f5 ml2 dim near-white fas fa-rss-square" href="https://rmoff.net/index.xml" title="RSS Feed"></a>
						<a class="link f5 ml2 dim near-white fas fa-search" href="https://rmoff.net/search/" role="search" title="Search"></a>
					</div>
				</nav>

				<div id="hdr" class="tc-l pv4-ns pv5-l pv2 ph3 ph4-ns">
					<h1 class="near-white mt1-ns f2 fw3 mb0 mt0 lh-title">
						<span class="terminal-title">kibana<span class="terminal-cursor"></span></span>
					</h1>
					<h2 class="near-white mt3-l mb4-l fw1 f6 f3-l measure-wide-l center lh-copy mt2 mb3">
						
						
							
						
					</h2>
				</div>

				
				
				
				

			</div>
		</header>
		
		<main role="main">
		
<div class="pa3 pa4-ns w-100 center" style="max-width: 1200px;">
  <section class="w-100">
  
  
  
  
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2018/09/03/window-timestamps-in-ksql-/-integration-with-elasticsearch/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2018/09/2018-09-03_17-58-49.png'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> Sep 3, 2018
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							Sep 3, 2018
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Window Timestamps in KSQL / Integration with Elasticsearch</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								KSQL provides the ability to create windowed aggregations. For example, count the number of messages in a 1 minute window, grouped by a particular column:
CREATE TABLE RATINGS_BY_CLUB_STATUS AS \ SELECT CLUB_STATUS, COUNT(*) AS RATING_COUNT \ FROM RATINGS_WITH_CUSTOMER_DATA \ WINDOW TUMBLING (SIZE 1 MINUTES) \ GROUP BY CLUB_STATUS; How KSQL, and Kafka Streams, stores the window timestamp associated with an aggregate, has recently changed. See #1497 for details.
Whereas previously the Kafka message timestamp (accessible through the KSQL ROWTIME system column) stored the start of the window for which the aggregate had been calculated, this changed in July 2018 to instead be the timestamp of the latest message to update that aggregate value.
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2017/01/18/kibana-timelion-anomaly-detection/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/img/default-header-img.tn-500x500.jpg'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> Jan 18, 2017
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							Jan 18, 2017
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Kibana Timelion - Anomaly Detection</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								Using the holt function in Timelion to do anomaly detection on Metricbeat data in Kibana:
Expression:
$thres=0.02, .es(index='metricbeat*',metric='max:system.cpu.user.pct').lines(1).if(eq, 0, null).holt(0.9, 0.1, 0.9, 0.5h).color(#eee).lines(10).label('Prediction'), .es(index='metricbeat*',metric='max:system.cpu.user.pct').color(#666).lines(1).label(Actual), .es(index='metricbeat*',metric='max:system.cpu.user.pct').lines(1).if(eq, 0, null).holt(0.9, 0.1, 0.9, 0.5h).subtract(.es(index='metricbeat*',metric='max:system.cpu.user.pct')).abs().if(lt, $thres, null, .es(index='metricbeat*',metric='max:system.cpu.user.pct')).points(10,3,0).color(#c66).label('Anomaly').title('max:system.cpu.user.pct / @rmoff') References:
https://twitter.com/rashidkpc/status/762754396111327232 https://github.com/elastic/timelion/issues/87 https://github.com/elastic/timelion/blob/master/FUNCTIONS.md 
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2016/05/23/kibana-timelion-series-calculations-difference-from-one-week-ago/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2016/05/Timelion_-_Kibana-6.png'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> May 23, 2016
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							May 23, 2016
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Kibana Timelion - Series Calculations - Difference from One Week Ago</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								I wrote recently about Kibana&rsquo;s excellent Timelion feature, which brings time-series visualisations to Kibana. In the comments Ben Huang asked:
do you know how to show whats the difference between this Friday and last Friday by Timelion?
So I thought I&rsquo;d answer properly here.
Timelion includes mathematical functions including add and subtract, as well as the ability to show data offset by an amount of time. So to answer Ben&rsquo;s query, we combine the two.
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2016/05/13/monitoring-logstash-ingest-rates-with-elasticsearch-kibana-and-timelion/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2016/05/Visualize_-_Kibana_and_untitled_and_1__screen-1.png'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> May 13, 2016
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							May 13, 2016
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Monitoring Logstash Ingest Rates with Elasticsearch, Kibana, and Timelion</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								Yesterday I wrote about Monitoring Logstash Ingest Rates with InfluxDB and Grafana, in which InfluxDB provided the data store for the ingest rate data, and Grafana the frontend.
Mark Walkom reminded me on twitter that the next release of Logstash will add more functionality in this area - and that it&rsquo;ll integrate back into the Elastic stack:
@rmoff nice, LS 5.0 will have APIs exposing metrics too. they’ll be integrated back into Marvel/Monitoring!
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2016/04/24/using-r-to-denormalise-data-for-analysis-in-kibana/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2016/04/dft02-1.jpg'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> Apr 24, 2016
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							Apr 24, 2016
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Using R to Denormalise Data for Analysis in Kibana</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								Kibana is a tool from Elastic that makes analysis of data held in Elasticsearch really easy and very powerful. Because Elasticsearch has very loose schema that can evolve on demand it makes it very quick to get up and running with some cool visualisations and analysis on any set of data. I demonstrated this in a blog post last year, taking a CSV file and loading it into Elasticsearch via Logstash.
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2016/03/29/experiments-with-kibana-timelion/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2016/03/2016-03-30_00-07-36-1.png'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> Mar 29, 2016
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							Mar 29, 2016
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">Experiments with Kibana Timelion</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								Timelion was released in November 2015 and with the 4.4.2 release of Kibana is available as a native visualisation once installed. It adds some powerful capabilities to Kibana as an timeseries analysis tool, using its own data manipulation language.
Installing Timelion is a piece of cake:
./bin/kibana plugin -i kibana/timelion After restarting Kibana, you&rsquo;ll see it as an option from the application picker
There&rsquo;s a bit of a learning curve with Timelion, but it&rsquo;s worth it.
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
      <div class="retro-card-container">
	<article class="retro-card">
		<a href="https://rmoff.net/2016/03/24/my-latest-irc-client-kibana/" class="retro-card-link">
			<div class="retro-card-inner">
				<div class="flex flex-column flex-row-ns items-start">
					
					<div class="retro-card-image mb4 mb0-ns w-100 h4 h4-m w4-m h5-ns w5-ns br3 cover hide-child" style="background-image: url('https://rmoff.net/images/2016/03/logstash-irc.png'); background-position: center;">
						<div class="retro-card-date sans-serif db child w-100 h-100 f7 lh-copy white no-underline br3 ph3 pt4 pt5-l ttu tc bg-black-60">
							<i class="mt3 mt5-l child far fa-calendar-alt"></i> Mar 24, 2016
						</div>
					</div>
					
					<div class="retro-card-content w-100 w6-ns pl3-ns">
						<div class="retro-card-meta">
							Mar 24, 2016
						</div>
						<h1 class="retro-card-title f3 fw1 mt0 lh-title">My latest IRC client : Kibana</h1>
						<div class="retro-card-summary f6 f5-l lh-copy nested-copy-line-height nested-links">
							
								OK, maybe that&rsquo;s not entirely true. But my read-only client, certainly.
I was perusing the Logstash input plugins recently when I noticed that there was one for IRC. Being a fan of IRC and a regular on the #obihackers channel, I thought this could be fun and yet another great example of how easy the Elastic stack is to work with.
Installation is a piece of cake:
wget https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/zip/elasticsearch/2.2.1/elasticsearch-2.2.1.zip wget https://download.
							
						</div>
					</div>
				</div>
			</div>
		</a>
	</article>
</div>

    
  
  </section>
</div>

		</main>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide">
		<div class="about-the-author">
		
			
				<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://bsky.app/profile/rmoff.net"><b class="fa-brands fa-bluesky"></b></a>  <em>Robin Moffatt works on the DevRel team at Confluent. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

			
		
		</div>
		
	</div>

		
		
<footer class="w-100 sans-serif" role="contentinfo">
	<nav class="w-third-l pb3 f6 center db" role="navigation"></nav>
</footer>

		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2025 
			</p>
		</footer>
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-75492960-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	</body>
</html>
