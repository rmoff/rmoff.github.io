<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>OBIEE and Load Runner - part 2</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2009/08/21/obiee-and-load-runner-part-2/">
		
		
		
		

		
		<meta property="og:title" content="OBIEE and Load Runner - part 2" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/img/default-header-img.jpg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2009/08/21/obiee-and-load-runner-part-2/" />
		<meta property="og:site_name" content="OBIEE and Load Runner - part 2" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<link rel="stylesheet" href="https://rmoff.net/css/tachyons.min.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/story.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/descartes.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/toc.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/retro-cards.css" />
		<link rel="stylesheet" href="https://rmoff.net/css/custom.css" />
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">
		
		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only' 
                })
		</script>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>

	</head>
	<body class="ma0 bg-white section-post page-kind-page is-page-true ">
		
		
		<header class="cover bg-top header-wrapper" style="background-image: url('https://rmoff.net/img/default-header-img.jpg'); background-position: center;">
			<div class="bg-black-30 bb bt">

				
				
				
				<div class="glass-nav hide-print">
					<nav class="sans-serif border-box pa3 ph5-l">
						<a href="https://rmoff.net/" title="Home">
							<img
								src="https://rmoff.net/img/logo.jpg"
								class="w2 h2 br-100"
								alt="rmoff&#39;s random ramblings"
							/>
						</a>
						<div class="fr h2 pv2 tr">
							<a class="icon-link-small" href="https://bsky.app/profile/rmoff.net"><i class="fa-brands fa-bluesky"></i></a>
							<a class="icon-link-small" href="https://twitter.com/rmoff/"><i class="fa-brands fa-x-twitter"></i></a>
							<a class="icon-link-small" href="https://github.com/rmoff/"><i class="fab fa-github-square"></i></a>
							<a class="icon-link-small" href="https://talks.rmoff.net"><i class="fa-solid fa-chalkboard"></i></a>
							<a class="icon-link-small" href="https://www.youtube.com/c/rmoff"><i class="fab fa-youtube-square"></i></a>
							<a class="icon-link-small" href="https://www.linkedin.com/in/robinmoffatt/"><i class="fab fa-linkedin"></i></a>
							<a class="icon-link-small" href="https://rmoff.net/index.xml" title="RSS Feed"><i class="fas fa-rss"></i></a>
							<a class="icon-link-small" href="https://rmoff.net/search/" title="Search"><i class="fas fa-search"></i></a>
						</div>
					</nav>
				</div>
				

				
				
				<div id="hdr" class="tc-l pv3-ns pv4-l pv2 ph3 ph4-ns">
					<div class="title-box">
						<h1 class="near-white f2 fw3 mb2 mt0 lh-title">
							<span class="terminal-title">OBIEE and Load Runner - part 2<span class="terminal-cursor"></span></span>
						</h1>
						<p class="title-subtitle">
							
								Published
								<time datetime="2009-08-21T00:00:00Z">Aug 21, 2009</time>
								<span class="display-print">by </span>
								 in <a href="https://rmoff.net/categories/loadrunner">Loadrunner</a>, <a href="https://rmoff.net/categories/obiee">Obiee</a>, <a href="https://rmoff.net/categories/performance">Performance</a>, <a href="https://rmoff.net/categories/sawserver">Sawserver</a>
								<span class="display-print">at https://rmoff.net/2009/08/21/obiee-and-load-runner-part-2/</span>
							
						</p>
					</div>
				</div>
				

				
				
				
				

			</div>
		</header>
		
		<main role="main">
		
<div class="container-fluid docs">
  <div class="row">
    <main class="docs-content" role="main">

<article class="article" data-pagefind-body>
	<img data-pagefind-meta="image[src]" src="https://rmoff.net/img/default-header-img.jpg" style="display:none" alt="">
	<p><strong>UPDATED: See a HOWTO for OBIEE and LoadRunner here: <a href="/2009/10/01/performance-testing-obiee-using-hp-performance-center-a.k.a.-loadrunner/">/2009/10/01/performance-testing-obiee-using-hp-performance-center-a.k.a.-loadrunner/</a></strong></p>
<hr>
<p>This is following on from <a href="/2009/08/19/obiee-and-load-runner-part-1/">my first post about OBIEE and LoadRunner</a>, in which I failed dismally to get a simple session replaying.</p>
<p>In a nutshell where I&rsquo;d got to was using the &ldquo;Web (Click and Script)&rdquo; function which worked fine for logging in but when running a report resulted in an error on the rendered page. Digging around showed the error was from the javascript of the OBIEE front end.</p>
<p>AJAX (Asynchronous Javascript And XML) is a combination of technologies but in essence lets a web page load once whilst refreshing its contents with calls back to the web server. In the context of OBIEE this means a dashboard page can load with placeholders for reports and as the data comes back (from the datasource via the BI Server and then parsed through sawserver) each dashboard report can update immediately, without the whole webpage reloading. I&rsquo;m sure this is where the problem lies with LoadRunner, and it&rsquo;s going to be important to get it right otherwise the numbers we get out won&rsquo;t be reliable.</p>
<p>I checked Metalink 3 for any entries and <a href="https://metalink3.oracle.com/od/faces/secure/km/DocumentDisplay.jspx?id=496417.1">Doc 496417.1</a> says that LoadRunner&rsquo;s been used with OBIEE successfully before..</p>
<p>VUGen (LoadRunner Virtual User Generator) offers several protocols. I&rsquo;d been working with &ldquo;Web (Click and Script)&rdquo; but after a fair bit of Googling tried &ldquo;AJAX (Click and Script)&rdquo; which didn&rsquo;t work any better, and then &ldquo;Web (HTTP/HTML)&rdquo;.</p>
<p>In the Options dialog prior to Recording there are some Siebel correlations defined including one called Siebel_Analytic_ViewState. Correlation is how LoadRunner deals with a data in a session that is passed back to the server in a subsequent step. For example, at login a user might get a sessionID of some sort which the web server requires in any subsequent calls back. LoadRunner can automatically detect some of these, and you have to define the rest. The correlations I picked up were:</p>
<ul>
<li>_scid</li>
<li>ViewState</li>
</ul>
<p>The replay still wasn&rsquo;t working properly, the replay screenshots showed this error: <img src="/images/rnm1978/invalidstate.png" alt="invalidstate" title="invalidstate"></p>
<p>Using Fiddler2 again to analyse the traffic showed this pattern of requests/responses:</p>
<p>saw.dll?Dashboard This is the main dashboard with placeholders for content saw.dll?DocPart&amp;_scid=3QNnUBQ3IJo&amp;StateID=943636977 this is a dashboard flash component saw.dll?DocPart&amp;_scid=3QNnUBQ3IJo&amp;StateID=943636978 this is a dashboard flash component saw.dll?DocPart&amp;_scid=3QNnUBQ3IJo&amp;StateID=943636979 this is a dashboard flash component saw.dll?DocPart&amp;_scid=3QNnUBQ3IJo&amp;StateID=943636980 this is a dashboard flash component</p>
<p>The StateID in the URL is embedded in the dashboard template, and is unique so can&rsquo;t be hardcoded in the VUser script. The script as recorded is hardcoding these numbers and thus requesting flash charts from a dashboard query long-gone, hence the very true &ldquo;invalid state identifier&rdquo;</p>
<p>LoadRunner has a feature called ContentCheck (accessed from the Run-time Settings dialog) which can be configured to halt the test if pre-defined text is found, so I added &ldquo;invalid state identifier&rdquo; and &ldquo;! Error : Response from server contained an error&rdquo; into it and clicked the Set as Default so they&rsquo;d come up for each script from now [edit] this doesn&rsquo;t fire for &ldquo;! Error : Response from server contained an error&rdquo;, maybe because it&rsquo;s inserted through ajax rather than the HTML response? [/edit] <img src="/images/rnm1978/contentcheck.png" alt="contentcheck" title="contentcheck"></p>
<p>After tinkering around a bit more I recorded another VUser, using &ldquo;Web (Click and Script)&rdquo; but on the Recording Options screen set it to URL mode instead of GUI. This captured <strong>all</strong> of the content requests (css, js, gif, etc), and gave a better replay: <img src="/images/rnm1978/replay03.png" alt="replay03" title="replay03"></p>
<p>The Help text explains:</p>
<ul>
<li>&ldquo;..GUI-based script option instructs VuGen to record HTML actions as context sensitive GUI functions such as web_text_link&hellip;&rdquo;</li>
<li>&ldquo;..URL-based script mode option instructs VuGen to record all browser requests and resources from the server that were sent due to the user&rsquo;s actions. It automatically records every HTTP resource as URL steps (web_url statements). For normal browser recordings, it is not recommended to use <em>the URL-based mode since is more prone to correlation related issues</em>&hellip;&rdquo;</li>
</ul>
<p>(my emphasis)</p>
<p>Looking at the script it&rsquo;s still got saw.dll?DocPart calls with a hardcoded StateID. This means that flash-content won&rsquo;t be being returned. To an extent this doesn&rsquo;t matter so long as it&rsquo;s still being generated (i.e. imposing the desired load on the server), but it&rsquo;s not a full simulation of user activity because there&rsquo;s less network traffic as a result.</p>
<p>So using the URL-based mode generates better results (i.e. no server error) but looks pretty much hardcoded to the specific scenario recorded. It&rsquo;s all very well getting a single dashboard working, but I want to simulate hundreds of users using tens of dashboards. In an ideal world I&rsquo;d define a login action with parametrised username/password, then a dashboard navigation / refresh action with a parametrised list of dashboard titles, and then a logout action.</p>
<p>With the caveat here that I have no training in LoadRunner, it appears to my untrained eye that the only way I&rsquo;m going to get repeatable, reusable scripts is using the GUI recording, that is, using the <strong>web_text_link</strong> function to simulate a user clicking, rather than the <strong>web_submit_data</strong> function which simulates the POST behaviour of ajax but is specific to the dashboard in question and needs some hardcore LR coding to correlate IDs embedded in the HTML with server requests to populate them.</p>
<p>Going back to the Click and Script (GUI Mode) and Fiddler2 I did a line-by-line comparison of the Fiddler-captured HTTP traffic between the recording session and replay. The login action was the same. The clicking onto the dashboard was as follows: <img src="/images/rnm1978/fiddler.png" alt="fiddler" title="fiddler"> This shows that the initial dashboard request works, and that the first &ldquo;ReloadDashboard&rdquo; ajax call correctly retrieves some of the data, but (a) this isn&rsquo;t &lsquo;rendered&rsquo; correctly, and (b) no further data is retrieved (there should be a second ReloadDashboard saw call, plus four flash charts). (<em>Fiddler&rsquo;s copy -&gt; full summary is useful for this, as is the breakpoint feature so you can pause after each response and see how it&rsquo;s rendered to determine what the content was.</em>)</p>
<p><strong>So</strong>, web_text_link is great for navigating but is the case that LR&rsquo;s replay engine doesn&rsquo;t honour the ajax sufficiently, and/or I&rsquo;m misunderstanding the principle of the tool? Using &ldquo;URL mode&rdquo; captures the ajax behaviour, eg:</p>
<p>[sourcecode language=&ldquo;html&rdquo;] web_submit_data(&ldquo;saw.dll_13&rdquo;, &ldquo;Action=http://myserver:7777/analytics/saw.dll?ReloadDashboard&amp;_scid={CSRule_1_UID2}&rdquo;, &ldquo;Method=POST&rdquo;, &ldquo;RecContentType=text/html&rdquo;, &ldquo;Referer=http://myserver:7777/analytics/saw.dll?Dashboard&amp;_scid={CSRule_1_UID2}&amp;PortalPath=/shared/Financials/_portal/General%20Ledger&amp;Page=Overview&amp;Action=RefreshAll&amp;ViewState={Siebel_Analytic_ViewState199}&amp;StateAction=samePageState&rdquo;, &ldquo;Snapshot=t96.inf&rdquo;, &ldquo;Mode=HTTP&rdquo;, ITEMDATA, &ldquo;Name=InFrameset&rdquo;, &ldquo;Value=false&rdquo;, ENDITEM, &ldquo;Name=Page&rdquo;, &ldquo;Value=Overview&rdquo;, ENDITEM, &ldquo;Name=_scid&rdquo;, &ldquo;Value={CSRule_1_UID2}&rdquo;, ENDITEM, &ldquo;Name=Embed&rdquo;, &ldquo;Value=true&rdquo;, ENDITEM, &ldquo;Name=PortalPath&rdquo;, &ldquo;Value=/shared/Financials/_portal/General Ledger&rdquo;, ENDITEM, &ldquo;Name=Caller&rdquo;, &ldquo;Value=Dashboard&rdquo;, ENDITEM, &ldquo;Name=ViewState&rdquo;, &ldquo;Value=tvr45qs2u7d1glbfaopqlvvinu&rdquo;, ENDITEM, &ldquo;Name=reloadTargets&rdquo;, &ldquo;Value=d:dashboard<del>p:d127730sp2eqcj54</del>r:ojn7k4k6te44d9ag&rdquo;, ENDITEM, &ldquo;Name=ajaxType&rdquo;, &ldquo;Value=iframe&rdquo;, ENDITEM, LAST); [/sourcecode]</p>
<p>but as you can see the POSTed data is full of IDs that I assume must correlate with the dashboard HTML. Given enough time and enough monkeys I&rsquo;m sure it would be possible to write a LR script that did this - but that would be with the net result of a <em>single</em> dashboard being replayable.</p>
<p>We can get a semblance of load testing on the database server by using web_text_link, but since the data coming back isn&rsquo;t rendered properly it&rsquo;s not possible to simulate a real user&rsquo;s session, only one-off hits of dashboards.</p>

	<hr>
	<div style="background-color: rgba(204, 234, 255, 0.25); margin-bottom:50px;margin-top:50px;padding: 20px; border-width: 2px; border-style: solid; border-color: darkorange;">
	
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
		
	</div>
		
				<div class="hide-print sans-serif f6 f5-l mt5 ph3 pb6 center nested-copy-line-height lh-copy nested-links mw-100 measure-wide" data-pagefind-ignore>
		<div class="about-the-author">
		
			
			
				
					<hr>
<p><img src="/images/2018/05/ksldn18-01.jpg" alt="Robin Moffatt"></p>
<p><a href="https://bsky.app/profile/rmoff.net"><b class="fa-brands fa-bluesky"></b></a>  <em>Robin Moffatt works on the DevRel team at Confluent. He likes writing about himself in the third person, eating good breakfasts, and drinking good beer.</em></p>

				
			
		
		</div>
		
	</div>

		

</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
        </ul>
        <nav id="TableOfContents"></nav>
      </div>
      
      <div class="toc-mobile-label">TABLE OF CONTENTS</div>
      
    
    </div>
  </div>
</div>


		</main>
		
		
		<footer class="hide-print sans-serif f6 fw1 bg-black near-white bottom-0 w-100 pa3" role="contentinfo">
			<p class="w-50 fr tr">
			<a class="no-underline near-white" href="https://github.com/xaprb/story"><img class="dib" title="Made with Hugo and Story" alt="Story logo" src="https://rmoff.net/img/story-logo-white.svg" style="width: 1.5rem; height: 1.5rem" /></a>
			</p>
			<p class="w-50 near-white">
				&copy; 2026 
			</p>
		</footer>
		
	</body>
</html>
