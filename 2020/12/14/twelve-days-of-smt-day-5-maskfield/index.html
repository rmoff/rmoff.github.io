<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preload" as="image" href="https://rmoff.net/images/2020/12/smt_day5.jpg" >
		
		<title>üéÑ Twelve Days of SMT üéÑ - Day 5: MaskField</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2020/12/14/twelve-days-of-smt-day-5-maskfield/">
		
		

		
		<meta property="og:title" content="üéÑ Twelve Days of SMT üéÑ - Day 5: MaskField" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2020/12/smt_day5.jpg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2020/12/14/twelve-days-of-smt-day-5-maskfield/" />
		<meta property="og:site_name" content="üéÑ Twelve Days of SMT üéÑ - Day 5: MaskField" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<style>
			html { background-color: #FAF8F5; color: #2D2926; }
			body { opacity: 0; transition: opacity 0.1s ease; }
			body.loaded { opacity: 1; }
			.site-header { height: 60px; background-color: #FAF8F5; border-bottom: 1px solid #E8421E; }
		</style>

		
		
		<link rel="stylesheet" href="https://rmoff.net/css/redesign.css" />
		
		<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap">
		<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
		<noscript><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet"></noscript>
		

		
		<script src="/js/copy-code.js"></script>
		

		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only'})
		</script>

		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>
	</head>
	<body class="ma0 section-post page-kind-page is-page-true ">
		<script>document.body.classList.add('loaded');</script>

		<header class="site-header hide-print">
	<div class="site-header-inner">
		<a href="https://rmoff.net/" class="site-title">rmoff's random ramblings</a>
		<nav class="site-nav">
			<a href="/categories/interesting-links/" class="nav-il"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Interesting Links</a>
			<span class="nav-sep"></span>
			<a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg> Categories</a>
			<a href="https://rmoff.net/search/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Search</a>
			<a href="https://rmoff.net/index.xml"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg> RSS</a>
			<div class="nav-social">
				<a href="https://www.linkedin.com/in/robinmoffatt/" title="linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
				<a href="https://twitter.com/rmoff/" title="twitter"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
				<a href="https://bsky.app/profile/rmoff.net" title="bluesky"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 568 501" fill="currentColor"><path d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C10.945 203.659 1 75.291 1 57.946 1-28.906 76.135-1.612 123.121 33.664z"/></svg></a>
				<a href="https://www.youtube.com/c/rmoff" title="youtube"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
				<a href="https://talks.rmoff.net" title="talks"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="0"/><line x1="12" y1="17" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/><polyline points="7 8 12 12 17 8"/></svg></a>
				<a href="https://github.com/rmoff/" title="github"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
			</div>
		</nav>
		<button class="nav-toggle" onclick="document.querySelector('.mobile-nav').classList.toggle('open')" aria-label="Menu">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
		</button>
	</div>
	<nav class="mobile-nav">
		<a href="https://rmoff.net/">Home</a>
		<a href="/categories/">Categories</a>
		<a href="/categories/interesting-links/">Interesting Links</a>
		<a href="https://rmoff.net/search/">Search</a>
		<a href="https://rmoff.net/index.xml">RSS</a>
		<a href="https://www.linkedin.com/in/robinmoffatt/">linkedin</a>
		<a href="https://twitter.com/rmoff/">twitter</a>
		<a href="https://bsky.app/profile/rmoff.net">bluesky</a>
		<a href="https://www.youtube.com/c/rmoff">youtube</a>
		<a href="https://talks.rmoff.net">talks</a>
		<a href="https://github.com/rmoff/">github</a>
	</nav>
</header>


		<main role="main">
		

<div class="article-hero" style="background-image: url('https://rmoff.net/images/2020/12/smt_day5.jpg');">
	<div class="article-hero-overlay">
		<div class="article-hero-content">
			<h1>üéÑ Twelve Days of SMT üéÑ - Day 5: MaskField</h1>
			<p class="article-hero-meta">
				
					<time datetime="2020-12-14T16:00:00Z">14 Dec 2020</time>
					<span class="display-print">by </span>
					 &middot; <a href="https://rmoff.net/categories/kafka-connect">Kafka Connect</a>, <a href="https://rmoff.net/categories/single-message-transform">Single Message Transform</a>, <a href="https://rmoff.net/categories/twelvedaysofsmt">TwelveDaysOfSMT</a>
					<span class="display-print">at https://rmoff.net/2020/12/14/twelve-days-of-smt-day-5-maskfield/</span>
				
			</p>
		</div>
	</div>
</div>


<details class="toc-mobile">
	<summary>Table of Contents</summary>
	<nav id="TableOfContents">
  <ul>
    <li><a href="#_source_data">Source data</a></li>
    <li><a href="#_masking_data_at_ingest_with_kafka_connect_source_connector">Masking data at ingest with Kafka Connect source connector</a></li>
    <li><a href="#_masking_data_at_egress_in_a_kafka_connect_sink_connector">Masking data at egress in a Kafka Connect sink connector</a></li>
    <li><a href="#_try_it_out">Try it out!</a></li>
  </ul>
</nav>
</details>

<div class="container-fluid docs">
	<div class="row">
		<main class="docs-content" role="main">

<article class="article" data-pagefind-body>
	<span data-pagefind-filter="category" style="display:none">Kafka Connect</span><span data-pagefind-filter="category" style="display:none">Single Message Transform</span><span data-pagefind-filter="category" style="display:none">TwelveDaysOfSMT</span>
	<img data-pagefind-meta="image[src]" src="https://rmoff.net/images/2020/12/smt_day5.jpg" style="display:none" alt="">
	<div class="paragraph">
<p>If you want to mask fields of data as you ingest from a source into Kafka, or write to a sink from Kafka with Kafka Connect, the <a href="https://docs.confluent.io/platform/current/connect/transforms/maskfield.html"><code>MaskField</code></a> Single Message Transform is perfect for you. It retains the fields whilst replacing its value.</p>
</div>
<div class="paragraph">
<p>To use the Single Message Transform you specify the field to mask, and its replacement value. To mask the contents of a field called <code>cc_num</code> you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #e6db74">&#34;</span><span style="color: #e6db74">transforms</span><span style="color: #e6db74">&#34;</span>                               <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">maskCC</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">transforms.maskCC.type</span><span style="color: #e6db74">&#34;</span>                   <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">org.apache.kafka.connect.transforms.MaskField$Value</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">transforms.maskCC.fields</span><span style="color: #e6db74">&#34;</span>                 <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">cc_num</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
<span style="color: #e6db74">&#34;</span><span style="color: #e6db74">transforms.maskCC.replacement</span><span style="color: #e6db74">&#34;</span>            <span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">****-****-****-****</span><span style="color: #e6db74">&#34;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/IOYrW3jyKoI?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

</div>
<div class="paragraph">
<p><a href="https://github.com/confluentinc/demo-scene/blob/master/kafka-connect-single-message-transforms/day5.adoc">üëæ Demo code</a></p>
</div>
<div class="sect1">
<h2 id="_source_data">Source data&nbsp;<a class="headline-hash" href="#_source_data">üîó</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here‚Äôs the data being written by our source connector:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>docker <span style="color: #f8f8f2">exec </span>kafkacat kafkacat <span style="color: #f92672">-b</span> broker:29092 <span style="color: #f92672">-r</span> http://schema-registry:8081 <span style="color: #f92672">-s</span> <span style="color: #f8f8f2">key</span><span style="color: #f92672;font-weight: bold">=</span>s <span style="color: #f92672">-s</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672;font-weight: bold">=</span>avro <span style="color: #f92672">-t</span> day5-00-person <span style="color: #f92672">-C</span> <span style="color: #f92672">-c1</span> <span style="color: #f92672">-o</span> beginning <span style="color: #f92672">-u</span> <span style="color: #f92672">-q</span> <span style="color: #f92672">-J</span> | jq  <span style="color: #e6db74">&#39;.&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">topic</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">day5-00-person</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">partition</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">offset</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">tstype</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">create</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">ts</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">1607595830038</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">broker</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">key</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">648e4c63-ba83-4f3b-befe-505c07d9694f</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">payload</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Gen0</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">phone_num</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">702.792.9316 x5223</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">lastName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Reinger</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">cc_exp</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">2015-11-11</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">firstName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Wayne</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">cc_num</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">1234-2121-1221-1211</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">fullAddress</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">2338 Andres Ville, North Tonymouth, OH 18398-3319</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">}</span>
    <span style="color: #f8f8f2;background-color: #49483e">}</span>
  <span style="color: #f8f8f2;background-color: #49483e">}</span>
<span style="color: #f8f8f2;background-color: #49483e">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Check out all that sensitive information! Plenty of times we don‚Äôt want to have that either stored in the Kafka topic in the first place, or we OK with that but we don‚Äôt want to stream it verbatim to a target sink.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_masking_data_at_ingest_with_kafka_connect_source_connector">Masking data at ingest with Kafka Connect source connector&nbsp;<a class="headline-hash" href="#_masking_data_at_ingest_with_kafka_connect_source_connector">üîó</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>We can mask the data from an source connector in Kafka Connect with the <a href="https://docs.confluent.io/platform/current/connect/transforms/maskfield.html"><code>MaskField</code></a> Single Message Transform. Whilst the above Kafka Connect source connector is just generating dummy data, is still a Kafka Connect source connector nonetheless, so what I‚Äôm showing here is equally applicable to other source connectors‚ÄîJDBC, Debezium, MQ, you name it‚Äîthat‚Äôs the beauty of the Kafka Connect architecture, that you can mix &amp; match connectors with transforms (with converters too, but that‚Äôs another subject for another day).</p>
</div>
<div class="paragraph">
<p>Let‚Äôs create a second version of the above Kafka Connect source connector, and this time mask out the credit card number at ingest:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">curl</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">i</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">X</span> <span style="color: #f8f8f2;background-color: #49483e">PUT</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">H</span>  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Content-Type:application/json</span><span style="color: #e6db74">&#34;</span> <span style="color: #f92672;font-weight: bold">\</span>
    <span style="color: #f8f8f2;background-color: #49483e">http</span><span style="color: #f8f8f2;background-color: #49483e">:</span><span style="color: #75715e;font-style: italic">//localhost:8083/connectors/source-voluble-datagen-day5-01/config \</span>
    <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">d</span> <span style="color: #e6db74">&#39;</span><span style="color: #e6db74">{
        &#34;connector.class&#34;                          : &#34;io.mdrogalis.voluble.VolubleSourceConnector&#34;,
        &#34;genkp.day5-01-person.with&#34;                : &#34;#{Internet.uuid}&#34;,
        &#34;genv.day5-01-person.firstName.with&#34;       : &#34;#{Address.firstName}&#34;,
        &#34;genv.day5-01-person.lastName.with&#34;        : &#34;#{Address.lastName}&#34;,
        &#34;genv.day5-01-person.fullAddress.with&#34;     : &#34;#{Address.fullAddress}&#34;,
        &#34;genv.day5-01-person.phone_num.with&#34;       : &#34;#{PhoneNumber.phoneNumber}&#34;,
        &#34;genv.day5-01-person.cc_num.with&#34;          : &#34;#{Business.creditCardNumber}&#34;,
        &#34;genv.day5-01-person.cc_exp.with&#34;          : &#34;#{Business.creditCardExpiry}&#34;,
        &#34;topic.day5-01-person.throttle.ms&#34;         : 500,
        &#34;transforms&#34;                               : &#34;maskCC&#34;,
        &#34;transforms.maskCC.type&#34;                   : &#34;org.apache.kafka.connect.transforms.MaskField$Value&#34;,
        &#34;transforms.maskCC.fields&#34;                 : &#34;cc_num,cc_exp&#34;,
        &#34;transforms.maskCC.replacement&#34;            : &#34;&lt;masked&gt;&#34;
    }</span><span style="color: #e6db74">&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here‚Äôs what it does to the data written <strong>to</strong> Kafka:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash"><span style="color: #f8f8f2">$ </span>docker <span style="color: #f8f8f2">exec </span>kafkacat kafkacat <span style="color: #f92672">-b</span> broker:29092 <span style="color: #f92672">-r</span> http://schema-registry:8081 <span style="color: #f92672">-s</span> <span style="color: #f8f8f2">key</span><span style="color: #f92672;font-weight: bold">=</span>s <span style="color: #f92672">-s</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672;font-weight: bold">=</span>avro <span style="color: #f92672">-t</span> day5-01-person <span style="color: #f92672">-C</span> <span style="color: #f92672">-c1</span> <span style="color: #f92672">-o</span> end <span style="color: #f92672">-u</span> <span style="color: #f92672">-q</span> <span style="color: #f92672">-J</span> | jq  <span style="color: #e6db74">&#39;.&#39;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">{</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">topic</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">day5-01-person</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">partition</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">offset</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">201</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">tstype</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">create</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">ts</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">1607596416414</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">broker</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">key</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">f4d038da-bcc1-40d1-8b29-08d52305e796</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">,</span>
  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">payload</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
    <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Gen0</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">fullAddress</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Apt. 801 356 Frami Canyon, East Irene, CA 15876-9608</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">phone_num</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">(910) 077-1824 x74606</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">cc_exp</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">&lt;masked&gt;</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">lastName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Thompson</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">cc_num</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">&lt;masked&gt;</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">},</span>
      <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">firstName</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #f8f8f2;background-color: #49483e">{</span>
        <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">string</span><span style="color: #e6db74">&#34;</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Wade</span><span style="color: #e6db74">&#34;</span>
      <span style="color: #f8f8f2;background-color: #49483e">}</span>
    <span style="color: #f8f8f2;background-color: #49483e">}</span>
  <span style="color: #f8f8f2;background-color: #49483e">}</span>
<span style="color: #f8f8f2;background-color: #49483e">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_masking_data_at_egress_in_a_kafka_connect_sink_connector">Masking data at egress in a Kafka Connect sink connector&nbsp;<a class="headline-hash" href="#_masking_data_at_egress_in_a_kafka_connect_sink_connector">üîó</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>üëâ <a href="https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc" class="bare">https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc</a></p>
</div>
<div class="paragraph">
<p><em>See also üé• <a href="https://rmoff.dev/kafka-jdbc-video">Kafka Connect in Action : JDBC Sink</a> (üëæ <a href="https://github.com/confluentinc/demo-scene/blob/master/kafka-to-database/README.adoc"><code>demo code</code></a>) and üé• <a href="https://rmoff.dev/ksqldb-jdbc-sink-video">ksqlDB &amp; Kafka Connect JDBC Sink in action</a> (üëæ <a href="https://github.com/confluentinc/demo-scene/blob/master/kafka-to-database/ksqldb-jdbc-sink.adoc"><code>demo code</code></a>)</em></p>
</div>
<div class="paragraph">
<p>Here we‚Äôre going to stream the data from that topic above (<code>day5-01-person</code>) to MySQL, with the assumption that whilst the owner of the Kafka topic is permitted to hold a user‚Äôs full address, the owner of the database to which we‚Äôre streaming the data is not, and thus will mask it out at egress:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="javascript"><span style="color: #f8f8f2;background-color: #49483e">curl</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">i</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">X</span> <span style="color: #f8f8f2;background-color: #49483e">PUT</span> <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">H</span> <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Accept:application/json</span><span style="color: #e6db74">&#34;</span> <span style="color: #f92672;font-weight: bold">\</span>
    <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">H</span>  <span style="color: #e6db74">&#34;</span><span style="color: #e6db74">Content-Type:application/json</span><span style="color: #e6db74">&#34;</span> <span style="color: #f8f8f2;background-color: #49483e">http</span><span style="color: #f8f8f2;background-color: #49483e">:</span><span style="color: #75715e;font-style: italic">//localhost:8083/connectors/sink-jdbc-mysql-day5-person-01/config \</span>
    <span style="color: #f92672;font-weight: bold">-</span><span style="color: #f8f8f2;background-color: #49483e">d</span> <span style="color: #e6db74">&#39;</span><span style="color: #e6db74">{
          &#34;connector.class&#34;                    : &#34;io.confluent.connect.jdbc.JdbcSinkConnector&#34;,
          &#34;connection.url&#34;                     : &#34;jdbc:mysql://mysql:3306/demo&#34;,
          &#34;connection.user&#34;                    : &#34;mysqluser&#34;,
          &#34;connection.password&#34;                : &#34;mysqlpw&#34;,
          &#34;topics&#34;                             : &#34;day5-01-person&#34;,
          &#34;tasks.max&#34;                          : &#34;4&#34;,
          &#34;auto.create&#34;                        : &#34;true&#34;,
          &#34;auto.evolve&#34;                        : &#34;true&#34;,
          &#34;transforms&#34;                         : &#34;maskAddress&#34;,
          &#34;transforms.maskAddress.type&#34;        : &#34;org.apache.kafka.connect.transforms.MaskField$Value&#34;,
          &#34;transforms.maskAddress.fields&#34;      : &#34;fullAddress&#34;,
          &#34;transforms.maskAddress.replacement&#34; : &#34;[‚ùåredacted‚ùå]&#34;
        }</span><span style="color: #e6db74">&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now if we launch MySQL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="bash">docker <span style="color: #f8f8f2">exec</span> <span style="color: #f92672">-it</span> mysql bash <span style="color: #f92672">-c</span> <span style="color: #e6db74">&#39;mysql -u root -p$MYSQL_ROOT_PASSWORD demo&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and check out the table we can see we have the full schema:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">mysql</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #66d9ef;font-weight: bold">describe</span> <span style="color: #f8f8f2">`day5-01-person`</span><span style="color: #f8f8f2;background-color: #49483e">;</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">-------------+------+------+-----+---------+-------+</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Field</span>       <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">Type</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">Null</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">Key</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">Default</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Extra</span> <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">-------------+------+------+-----+---------+-------+</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">fullAddress</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">phone_num</span>   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">cc_exp</span>      <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">lastName</span>    <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">cc_num</span>      <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">firstName</span>   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2">text</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">YES</span>  <span style="color: #f92672;font-weight: bold">|</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #66d9ef;font-weight: bold">NULL</span>    <span style="color: #f92672;font-weight: bold">|</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">-------------+------+------+-----+---------+-------+</span>
<span style="color: #ae81ff">6</span> <span style="color: #66d9ef;font-weight: bold">rows</span> <span style="color: #66d9ef;font-weight: bold">in</span> <span style="color: #66d9ef;font-weight: bold">set</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #ae81ff">00</span> <span style="color: #f8f8f2;background-color: #49483e">sec</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and the data is as it should be, with the <code>fullAddress</code> masked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="color: #f8f8f2;background-color: #49483e"><code data-lang="sql"><span style="color: #f8f8f2;background-color: #49483e">mysql</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #66d9ef;font-weight: bold">select</span> <span style="color: #f92672;font-weight: bold">*</span> <span style="color: #66d9ef;font-weight: bold">from</span> <span style="color: #f8f8f2">`day5-01-person`</span> <span style="color: #66d9ef;font-weight: bold">LIMIT</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2;background-color: #49483e">;</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">--------------+-----------------------+----------+---------------+----------+-------------+</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">fullAddress</span>  <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">phone_num</span>             <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">cc_exp</span>   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">lastName</span>      <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">cc_num</span>   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">firstName</span>   <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">--------------+-----------------------+----------+---------------+----------+-------------+</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">redacted</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">]</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #ae81ff">383</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">349</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">1787</span> <span style="color: #f8f8f2;background-color: #49483e">x792</span>     <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Koss</span>          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Courtney</span>    <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">redacted</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">]</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #ae81ff">989</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">731</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">8207</span>          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Hand</span>          <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Trudy</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">redacted</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">]</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #ae81ff">809</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #ae81ff">775</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #ae81ff">2196</span> <span style="color: #f8f8f2;background-color: #49483e">x66858</span>   <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Pollich</span>       <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Jame</span>        <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">redacted</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">]</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #ae81ff">1</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">788</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">930</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">4978</span>        <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Boyle</span>         <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Claud</span>       <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">[</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">redacted</span><span style="color: #f92672;font-weight: bold">?</span><span style="color: #f8f8f2;background-color: #49483e">]</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">599</span><span style="color: #f8f8f2;background-color: #49483e">)</span> <span style="color: #ae81ff">706</span><span style="color: #f92672;font-weight: bold">-</span><span style="color: #ae81ff">0041</span> <span style="color: #f8f8f2;background-color: #49483e">x0995</span>  <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Stark</span>         <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f92672;font-weight: bold">&lt;</span><span style="color: #f8f8f2;background-color: #49483e">masked</span><span style="color: #f92672;font-weight: bold">&gt;</span> <span style="color: #f92672;font-weight: bold">|</span> <span style="color: #f8f8f2;background-color: #49483e">Gertie</span>      <span style="color: #f92672;font-weight: bold">|</span>
<span style="color: #f92672;font-weight: bold">+</span><span style="color: #75715e;font-style: italic">--------------+-----------------------+----------+---------------+----------+-------------+</span>
<span style="color: #ae81ff">5</span> <span style="color: #66d9ef;font-weight: bold">rows</span> <span style="color: #66d9ef;font-weight: bold">in</span> <span style="color: #66d9ef;font-weight: bold">set</span> <span style="color: #f8f8f2;background-color: #49483e">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2;background-color: #49483e">.</span><span style="color: #ae81ff">00</span> <span style="color: #f8f8f2;background-color: #49483e">sec</span><span style="color: #f8f8f2;background-color: #49483e">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>(maybe the ‚ùå emojis were just a step too far <code>;)</code> )</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_try_it_out">Try it out!&nbsp;<a class="headline-hash" href="#_try_it_out">üîó</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can find the full code for trying this out‚Äîincluding a Docker Compose so you can spin it up on your local machine‚Äî <a href="https://github.com/confluentinc/demo-scene/blob/master/kafka-connect-single-message-transforms/day5.adoc">üëæ here</a></p>
</div>
</div>
</div>
	<hr>
	<div class="giscus-container">
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
	</div>
</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">On this page</a></li>
        </ul>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#_source_data">Source data</a></li>
    <li><a href="#_masking_data_at_ingest_with_kafka_connect_source_connector">Masking data at ingest with Kafka Connect source connector</a></li>
    <li><a href="#_masking_data_at_egress_in_a_kafka_connect_sink_connector">Masking data at egress in a Kafka Connect sink connector</a></li>
    <li><a href="#_try_it_out">Try it out!</a></li>
  </ul>
</nav>
      </div>
      
    
    </div>
  </div>
</div>


		</main>

		

		
		<footer class="site-footer hide-print" role="contentinfo">
			<span>&copy; 2026 </span>
		</footer>
		

		
	</body>
</html>
