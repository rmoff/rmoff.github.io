<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preload" as="image" href="https://rmoff.net/images/2019/10/IMG_0113.jpg" >
		
		<title>Skipping bad records with the Kafka Connect JDBC sink connector</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="https://rmoff.net/index.xml">
		<link rel="canonical" href="https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/">
		
		

		
		<meta property="og:title" content="Skipping bad records with the Kafka Connect JDBC sink connector" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://rmoff.net/images/2019/10/IMG_0113.jpg" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/" />
		<meta property="og:site_name" content="Skipping bad records with the Kafka Connect JDBC sink connector" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
		<style>
			html { background-color: #FAF8F5; color: #2D2926; }
			body { opacity: 0; transition: opacity 0.1s ease; }
			body.loaded { opacity: 1; }
			.site-header { height: 60px; background-color: #FAF8F5; border-bottom: 1px solid #E8421E; }
		</style>

		
		
		<link rel="stylesheet" href="https://rmoff.net/css/redesign.css" />
		
		<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap">
		<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
		<noscript><link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,600;12..96,700;12..96,800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;500;600&display=swap" rel="stylesheet"></noscript>
		

		

		
		<script>
			!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_93NEP79Ju4xqXYWXnoLbr4HMW0Iaepj1BGOVoEXYX6P',{api_host:'https://eu.i.posthog.com', person_profiles: 'identified_only'})
		</script>

		
		<script src="https://rmoff.net/js/story.js"></script>
		<script src="https://rmoff.net/js/toc.js"></script>
		<script src="https://rmoff.net/js/medium-mirror.js"></script>
	</head>
	<body class="ma0 section-post page-kind-page is-page-true ">
		<script>document.body.classList.add('loaded');</script>

		<header class="site-header hide-print">
	<div class="site-header-inner">
		<a href="https://rmoff.net/" class="site-title">rmoff's random ramblings</a>
		<nav class="site-nav">
			<a href="/categories/interesting-links/" class="nav-il"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Interesting Links</a>
			<span class="nav-sep"></span>
			<a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg> Categories</a>
			<a href="https://rmoff.net/search/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg> Search</a>
			<a href="https://rmoff.net/index.xml"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg> RSS</a>
			<div class="nav-social">
				<a href="https://www.linkedin.com/in/robinmoffatt/" title="linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
				<a href="https://twitter.com/rmoff/" title="twitter"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
				<a href="https://bsky.app/profile/rmoff.net" title="bluesky"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 568 501" fill="currentColor"><path d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C10.945 203.659 1 75.291 1 57.946 1-28.906 76.135-1.612 123.121 33.664z"/></svg></a>
				<a href="https://www.youtube.com/c/rmoff" title="youtube"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
				<a href="https://talks.rmoff.net" title="talks"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="0"/><line x1="12" y1="17" x2="12" y2="22"/><line x1="8" y1="22" x2="16" y2="22"/><polyline points="7 8 12 12 17 8"/></svg></a>
				<a href="https://github.com/rmoff/" title="github"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
			</div>
		</nav>
		<button class="nav-toggle" onclick="document.querySelector('.mobile-nav').classList.toggle('open')" aria-label="Menu">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
		</button>
	</div>
	<nav class="mobile-nav">
		<a href="https://rmoff.net/">Home</a>
		<a href="/categories/">Categories</a>
		<a href="/categories/interesting-links/">Interesting Links</a>
		<a href="https://rmoff.net/search/">Search</a>
		<a href="https://rmoff.net/index.xml">RSS</a>
		<a href="https://www.linkedin.com/in/robinmoffatt/">linkedin</a>
		<a href="https://twitter.com/rmoff/">twitter</a>
		<a href="https://bsky.app/profile/rmoff.net">bluesky</a>
		<a href="https://www.youtube.com/c/rmoff">youtube</a>
		<a href="https://talks.rmoff.net">talks</a>
		<a href="https://github.com/rmoff/">github</a>
	</nav>
</header>


		<main role="main">
		

<div class="article-hero" style="background-image: url('https://rmoff.net/images/2019/10/IMG_0113.jpg');">
	<div class="article-hero-overlay">
		<div class="article-hero-content">
			<h1>Skipping bad records with the Kafka Connect JDBC sink connector</h1>
			<p class="article-hero-meta">
				
					<time datetime="2019-10-15T09:58:38&#43;01:00">15 Oct 2019</time>
					<span class="display-print">by </span>
					 &middot; <a href="https://rmoff.net/categories/kafka-connect">Kafka Connect</a>, <a href="https://rmoff.net/categories/jdbc-sink">JDBC sink</a>, <a href="https://rmoff.net/categories/consumer-group">Consumer Group</a>, <a href="https://rmoff.net/categories/kcat-kafkacat">kcat (kafkacat)</a>
					<span class="display-print">at https://rmoff.net/2019/10/15/skipping-bad-records-with-the-kafka-connect-jdbc-sink-connector/</span>
				
			</p>
		</div>
	</div>
</div>


<details class="toc-mobile">
	<summary>Table of Contents</summary>
	<nav id="TableOfContents">
  <ul>
    <li><a href="#_try_it_out">Try it out!</a></li>
    <li><a href="#_here_comes_the_problem">Here comes the problem</a></li>
    <li><a href="#_what_to_do">What to do?</a></li>
    <li><a href="#_manually_skipping_bad_messages">Manually skipping bad messages</a></li>
  </ul>
</nav>
</details>

<div class="container-fluid docs">
	<div class="row">
		<main class="docs-content" role="main">

<article class="article" data-pagefind-body>
	<span data-pagefind-filter="category" style="display:none">Kafka Connect</span><span data-pagefind-filter="category" style="display:none">JDBC sink</span><span data-pagefind-filter="category" style="display:none">Consumer Group</span><span data-pagefind-filter="category" style="display:none">kcat (kafkacat)</span>
	<img data-pagefind-meta="image[src]" src="https://rmoff.net/images/2019/10/IMG_0113.jpg" style="display:none" alt="">
	<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Kafka Connect framework provides generic <a href="https://www.confluent.io/blog/kafka-connect-deep-dive-error-handling-dead-letter-queues">error handling and dead-letter queue capabilities</a> which are available for problems with [de]serialisation and Single Message Transforms. When it comes to errors that a connector may encounter doing the actual <code>pull</code> or <code>put</code> of data from the source/target system, itâ€™s down to the connector itself to implement logic around that. For example, the Elasticsearch sink connector provides configuration (<code>behavior.on.malformed.documents</code>) that can be set so that a single bad record wonâ€™t halt the pipeline. Others, such as the JDBC Sink connector, donâ€™t provide this <a href="https://github.com/confluentinc/kafka-connect-jdbc/issues/721">yet</a>. That means that if you hit this problem, you need to manually unblock it yourself. One way is to manually move the offset of the consumer on past the bad message.</p>
</div>
<div class="paragraph">
<p><strong>TL;DR</strong> : You can use <code>kafka-consumer-groups --reset-offsets --to-offset &lt;x&gt;</code> to manually move the connector past a bad message</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_try_it_out">Try it out!&nbsp;<a class="headline-hash" href="#_try_it_out">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create the connector</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -X PUT http://localhost:8083/connectors/sink_postgres_foo_00/config -H <span style="color:#ba2121">&#34;Content-Type: application/json&#34;</span> -d <span style="color:#ba2121">&#39;{
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;connector.class&#34;: &#34;io.confluent.connect.jdbc.JdbcSinkConnector&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;connection.url&#34;: &#34;jdbc:postgresql://postgres:5432/&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;connection.user&#34;: &#34;postgres&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;connection.password&#34;: &#34;postgres&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;value.converter&#34;: &#34;org.apache.kafka.connect.json.JsonConverter&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;value.converter.schemas.enable&#34;: &#34;true&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;tasks.max&#34;: &#34;1&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;topics&#34;: &#34;foo&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;auto.create&#34;: &#34;true&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;auto.evolve&#34;:&#34;true&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">      &#34;pk.mode&#34;:&#34;none&#34;          
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">    }&#39;</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Send a message to the topic</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kafkacat -b localhost:9092 -t foo -P <span style="color:#ba2121">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">{ &#34;schema&#34;: { &#34;type&#34;: &#34;struct&#34;, &#34;fields&#34;: [{ &#34;type&#34;: &#34;int32&#34;, &#34;optional&#34;: false, &#34;field&#34;: &#34;c1&#34; }, { &#34;type&#34;: &#34;string&#34;, &#34;optional&#34;: false, &#34;field&#34;: &#34;c2&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;create_ts&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;update_ts&#34; }], &#34;optional&#34;: false, &#34;name&#34;: &#34;foobar&#34; }, &#34;payload&#34;: { &#34;c1&#34;: 10000, &#34;c2&#34;: &#34;bar&#34;, &#34;create_ts&#34;: 1501834166000, &#34;update_ts&#34;: 1501834166000 } }
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">EOF</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Confirm that the dataâ€™s on the topic:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kafkacat -b localhost:9092 -t foo -C -f <span style="color:#ba2121">&#39;Topic: %t\nPartition: %p\nOffset: %o\nKey: %k\nPayload: %S bytes: %s\n--\n&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Topic: foo
</span></span><span style="display:flex;"><span>Partition: <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>Offset: <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>Key:
</span></span><span style="display:flex;"><span>Payload: <span style="color:#666">543</span> bytes: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;schema&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;struct&#34;</span>, <span style="color:#ba2121">&#34;fields&#34;</span>: <span style="color:#666">[{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int32&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c1&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;string&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c2&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;create_ts&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;update_ts&#34;</span> <span style="color:#666">}]</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;foobar&#34;</span> <span style="color:#666">}</span>, <span style="color:#ba2121">&#34;payload&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;c1&#34;</span>: 10000, <span style="color:#ba2121">&#34;c2&#34;</span>: <span style="color:#ba2121">&#34;bar&#34;</span>, <span style="color:#ba2121">&#34;create_ts&#34;</span>: 1501834166000, <span style="color:#ba2121">&#34;update_ts&#34;</span>: <span style="color:#666">1501834166000</span> <span style="color:#666">}</span> <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>--</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Check the connector status:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s <span style="color:#ba2121">&#34;http://localhost:8083/connectors?expand=info&amp;expand=status&#34;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             jq <span style="color:#ba2121">&#39;. | to_entries[] | [ .value.info.type, .key, .value.status.connector.state,.value.status.tasks[].state,.value.info.config.&#34;connector.class&#34;]|join(&#34;:|:&#34;)&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             column -s : -t| sed <span style="color:#ba2121">&#39;s/\&#34;//g&#39;</span>| sort
</span></span><span style="display:flex;"><span>sink    |  sink_postgres_foo_00         |  RUNNING  |  RUNNING  |  io.confluent.connect.jdbc.JdbcSinkConnector</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Confirm thereâ€™s data in the target DB:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>postgres<span style="color:#666">=#</span><span style="color:#bbb"> </span><span style="">\</span>dt<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>List<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">of</span><span style="color:#bbb"> </span>relations<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">Schema</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>Name<span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">Type</span><span style="color:#bbb">  </span><span style="color:#666">|</span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">Owner</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">--------+------+-------+----------
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>foo<span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">table</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>postgres<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>(<span style="color:#666">1</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">row</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>postgres<span style="color:#666">-#</span><span style="color:#bbb"> </span><span style="">\</span>d<span style="color:#bbb"> </span>foo<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                            </span><span style="color:#008000;font-weight:bold">Table</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#34;public.foo&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">Column</span><span style="color:#bbb">   </span><span style="color:#666">|</span><span style="color:#bbb">            </span><span style="color:#008000;font-weight:bold">Type</span><span style="color:#bbb">             </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">Collation</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">Nullable</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">Default</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">-----------+-----------------------------+-----------+----------+---------
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#bbb"> </span>update_ts<span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">timestamp</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">without</span><span style="color:#bbb"> </span>time<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">zone</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">           </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">not</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">null</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> </span>create_ts<span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">timestamp</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">without</span><span style="color:#bbb"> </span>time<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">zone</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">           </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">not</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">null</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> </span>c1<span style="color:#bbb">        </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000">integer</span><span style="color:#bbb">                     </span><span style="color:#666">|</span><span style="color:#bbb">           </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">not</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">null</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> </span>c2<span style="color:#bbb">        </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000">text</span><span style="color:#bbb">                        </span><span style="color:#666">|</span><span style="color:#bbb">           </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">not</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">null</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>postgres<span style="color:#666">=#</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#34;foo&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>update_ts<span style="color:#bbb">      </span><span style="color:#666">|</span><span style="color:#bbb">      </span>create_ts<span style="color:#bbb">      </span><span style="color:#666">|</span><span style="color:#bbb">  </span>c1<span style="color:#bbb">   </span><span style="color:#666">|</span><span style="color:#bbb"> </span>c2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">---------------------+---------------------+-------+-----
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">10000</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>bar<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>(<span style="color:#666">1</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">row</span>)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_here_comes_the_problem">Here comes the problem&nbsp;<a class="headline-hash" href="#_here_comes_the_problem">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Letâ€™s send another message to the topic, but omit one of the fields (<code>c2</code>):</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kafkacat -b localhost:9092 -t foo -P <span style="color:#ba2121">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">{ &#34;schema&#34;: { &#34;type&#34;: &#34;struct&#34;, &#34;fields&#34;: [{ &#34;type&#34;: &#34;int32&#34;, &#34;optional&#34;: false, &#34;field&#34;: &#34;c1&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;create_ts&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;update_ts&#34; }], &#34;optional&#34;: false, &#34;name&#34;: &#34;foobar&#34; }, &#34;payload&#34;: { &#34;c1&#34;: 10000,  &#34;create_ts&#34;: 1501834166000, &#34;update_ts&#34;: 1501834166000 } }
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">EOF</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>If we look at the status of the connector we can see that the task has <code>FAILED</code>:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s <span style="color:#ba2121">&#34;http://localhost:8083/connectors?expand=info&amp;expand=status&#34;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             jq <span style="color:#ba2121">&#39;. | to_entries[] | [ .value.info.type, .key, .value.status.connector.state,.value.status.tasks[].state,.value.info.config.&#34;connector.class&#34;]|join(&#34;:|:&#34;)&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             column -s : -t| sed <span style="color:#ba2121">&#39;s/\&#34;//g&#39;</span>| sort
</span></span><span style="display:flex;"><span>sink  |  sink_postgres_foo_00  |  RUNNING  |  FAILED  |  io.confluent.connect.jdbc.JdbcSinkConnector</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>And the Kafka Connect worker log shows a problem:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#666">[</span>2019-10-15 08:30:34,412<span style="color:#666">]</span> ERROR <span style="color:#666">[</span>sink_postgres_foo_00|task-0<span style="color:#666">]</span> WorkerSinkTask<span style="color:#666">{</span><span style="color:#19177c">id</span><span style="color:#666">=</span>sink_postgres_foo_00-0<span style="color:#666">}</span> Task threw an uncaught and unrecoverable exception <span style="color:#666">(</span>org.apache.kafka.connect.runtime.WorkerTask:179<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>org.apache.kafka.connect.errors.ConnectException: Exiting WorkerSinkTask due to unrecoverable exception.
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages<span style="color:#666">(</span>WorkerSinkTask.java:560<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerSinkTask.poll<span style="color:#666">(</span>WorkerSinkTask.java:321<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerSinkTask.iteration<span style="color:#666">(</span>WorkerSinkTask.java:224<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerSinkTask.execute<span style="color:#666">(</span>WorkerSinkTask.java:192<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerTask.doRun<span style="color:#666">(</span>WorkerTask.java:177<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerTask.run<span style="color:#666">(</span>WorkerTask.java:227<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at java.util.concurrent.Executors<span style="color:#19177c">$RunnableAdapter</span>.call<span style="color:#666">(</span>Executors.java:511<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at java.util.concurrent.FutureTask.run<span style="color:#666">(</span>FutureTask.java:266<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at java.util.concurrent.ThreadPoolExecutor.runWorker<span style="color:#666">(</span>ThreadPoolExecutor.java:1149<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at java.util.concurrent.ThreadPoolExecutor<span style="color:#19177c">$Worker</span>.run<span style="color:#666">(</span>ThreadPoolExecutor.java:624<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at java.lang.Thread.run<span style="color:#666">(</span>Thread.java:748<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>Caused by: org.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: java.sql.BatchUpdateException: Batch entry <span style="color:#666">0</span> INSERT INTO <span style="color:#ba2121">&#34;foo&#34;</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;c1&#34;</span>,<span style="color:#ba2121">&#34;create_ts&#34;</span>,<span style="color:#ba2121">&#34;update_ts&#34;</span><span style="color:#666">)</span> VALUES<span style="color:#666">(</span>10000,<span style="color:#ba2121">&#39;2017-08-04 08:09:26+00&#39;</span>,<span style="color:#ba2121">&#39;2017-08-04 08:09:26+00&#39;</span><span style="color:#666">)</span> was aborted: ERROR: null value in column <span style="color:#ba2121">&#34;c2&#34;</span> violates not-null constraint
</span></span><span style="display:flex;"><span>  Detail: Failing row contains <span style="color:#666">(</span>2017-08-04 08:09:26, 2017-08-04 08:09:26, 10000, null<span style="color:#666">)</span>.  Call getNextException to see other errors in the batch.
</span></span><span style="display:flex;"><span>org.postgresql.util.PSQLException: ERROR: null value in column <span style="color:#ba2121">&#34;c2&#34;</span> violates not-null constraint
</span></span><span style="display:flex;"><span>  Detail: Failing row contains <span style="color:#666">(</span>2017-08-04 08:09:26, 2017-08-04 08:09:26, 10000, null<span style="color:#666">)</span>.
</span></span><span style="display:flex;"><span>org.postgresql.util.PSQLException: ERROR: null value in column <span style="color:#ba2121">&#34;c2&#34;</span> violates not-null constraint
</span></span><span style="display:flex;"><span>  Detail: Failing row contains <span style="color:#666">(</span>2017-08-04 08:09:26, 2017-08-04 08:09:26, 10000, null<span style="color:#666">)</span>.
</span></span><span style="display:flex;"><span>   at io.confluent.connect.jdbc.sink.JdbcSinkTask.put<span style="color:#666">(</span>JdbcSinkTask.java:87<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   at org.apache.kafka.connect.runtime.WorkerSinkTask.deliverMessages<span style="color:#666">(</span>WorkerSinkTask.java:538<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>   ... <span style="color:#666">10</span> more
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>2019-10-15 08:30:34,413<span style="color:#666">]</span> ERROR <span style="color:#666">[</span>sink_postgres_foo_00|task-0<span style="color:#666">]</span> WorkerSinkTask<span style="color:#666">{</span><span style="color:#19177c">id</span><span style="color:#666">=</span>sink_postgres_foo_00-0<span style="color:#666">}</span> Task is being killed and will not recover <span style="color:#008000;font-weight:bold">until</span> manually restarted <span style="color:#666">(</span>org.apache.kafka.connect.runtime.WorkerTask:180<span style="color:#666">)</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Distilling this down gives us:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Batch entry <span style="color:#666">0</span> INSERT INTO <span style="color:#ba2121">&#34;foo&#34;</span><span style="color:#666">(</span><span style="color:#ba2121">&#34;c1&#34;</span>,<span style="color:#ba2121">&#34;create_ts&#34;</span>,<span style="color:#ba2121">&#34;update_ts&#34;</span><span style="color:#666">)</span> VALUES<span style="color:#666">(</span>10000,<span style="color:#ba2121">&#39;2017-08-04 08:09:26+00&#39;</span>,<span style="color:#ba2121">&#39;2017-08-04 08:09:26+00&#39;</span><span style="color:#666">)</span> was aborted: 
</span></span><span style="display:flex;"><span>ERROR: null value in column <span style="color:#ba2121">&#34;c2&#34;</span> violates not-null constraint</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Because we omitted field <code>c2</code> from our payload, and itâ€™s <code>NOT NULL</code> in the target schema, the message cannot be written, and the Connect sink task aborts.</p>
</div>
<div class="paragraph">
<p>What about if we send another, valid, message to the topic:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kafkacat -b localhost:9092 -t foo -P <span style="color:#ba2121">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">{ &#34;schema&#34;: { &#34;type&#34;: &#34;struct&#34;, &#34;fields&#34;: [{ &#34;type&#34;: &#34;int32&#34;, &#34;optional&#34;: false, &#34;field&#34;: &#34;c1&#34; }, { &#34;type&#34;: &#34;string&#34;, &#34;optional&#34;: false, &#34;field&#34;: &#34;c2&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;create_ts&#34; }, { &#34;type&#34;: &#34;int64&#34;, &#34;optional&#34;: false, &#34;name&#34;: &#34;org.apache.kafka.connect.data.Timestamp&#34;, &#34;version&#34;: 1, &#34;field&#34;: &#34;update_ts&#34; }], &#34;optional&#34;: false, &#34;name&#34;: &#34;foobar&#34; }, &#34;payload&#34;: { &#34;c1&#34;: 10001, &#34;c2&#34;: &#34;bar2&#34;, &#34;create_ts&#34;: 1501834166000, &#34;update_ts&#34;: 1501834166000 } }
</span></span></span><span style="display:flex;"><span><span style="color:#ba2121">EOF</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Restart the connectorâ€™s failed task:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -X POST http://localhost:8083/connectors/sink_postgres_foo_00/tasks/0/restart</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Itâ€™s upâ€¦</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s <span style="color:#ba2121">&#34;http://localhost:8083/connectors?expand=info&amp;expand=status&#34;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             jq <span style="color:#ba2121">&#39;. | to_entries[] | [ .value.info.type, .key, .value.status.connector.state,.value.status.tasks[].state,.value.info.config.&#34;connector.class&#34;]|join(&#34;:|:&#34;)&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             column -s : -t| sed <span style="color:#ba2121">&#39;s/\&#34;//g&#39;</span>| sort
</span></span><span style="display:flex;"><span>sink  |  sink_postgres_foo_00  |  RUNNING  |  RUNNING  |  io.confluent.connect.jdbc.JdbcSinkConnector</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>but soonâ€¦itâ€™s down</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s <span style="color:#ba2121">&#34;http://localhost:8083/connectors?expand=info&amp;expand=status&#34;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             jq <span style="color:#ba2121">&#39;. | to_entries[] | [ .value.info.type, .key, .value.status.connector.state,.value.status.tasks[].state,.value.info.config.&#34;connector.class&#34;]|join(&#34;:|:&#34;)&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             column -s : -t| sed <span style="color:#ba2121">&#39;s/\&#34;//g&#39;</span>| sort
</span></span><span style="display:flex;"><span>sink  |  sink_postgres_foo_00  |  RUNNING  |  FAILED  |  io.confluent.connect.jdbc.JdbcSinkConnector</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>The worker log shows the same error as before - <code>ERROR: null value in column &#34;c2&#34; violates not-null constraint</code>.</p>
</div>
<div class="paragraph">
<p>Of the three messages on the topic, weâ€™ve got a &#39;poison pill&#39; which has broken our pipeline ðŸ˜¿. Each time we restart the connector, it will start from where it got to last time and so fall over againâ€”regardless of how many &#39;good&#39; messages may come after it. The connector will only consider a message actually read once it has successfully written it to the target, which makes sense if you think about it from a data integrity point of viewâ€”but does land us with this problem here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_to_do">What to do?&nbsp;<a class="headline-hash" href="#_what_to_do">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few options:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If we were using Avro then it would be harder to break things, because schema compatibility can be enforced and bad messages would be rejected when being produced <em>on</em> to the topic.</p>
</li>
<li>
<p>We could write a stream processing job to take the source topic <code>foo</code> and write all valid messages from it to a new topic (e.g. <code>foo_good</code>) and hook our JDBC sink up to that instead.</p>
</li>
<li>
<p>Use the consumer group mechanism to just skip the bad message for the connector</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Which you use depends on how the problem arose. For example, one-off problems could be addressed by option #3, but itâ€™s very manual and could be error-prone if youâ€™re not careful. Option #2 is appropriate if youâ€™re dealing with third-parties and you have on-going data quality issues. #1, using Avro, is <strong>always</strong> a good idea, regardless!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_manually_skipping_bad_messages">Manually skipping bad messages&nbsp;<a class="headline-hash" href="#_manually_skipping_bad_messages">ðŸ”—</a> </h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each sink connector in Kafka Connect has its own consumer group, with the offset persisted in Kafka itself (pretty clever, right). This is also why if you delete a connector and recreate it <em>with the same name</em> youâ€™ll find it starts from where the previous instance got to.</p>
</div>
<div class="paragraph">
<p>You can view consumer groups using the <code>kafka-consumer-groups</code> command:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kafka-consumer-groups <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --bootstrap-server kafka:29092 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --list
</span></span><span style="display:flex;"><span>connect-sink_postgres_00
</span></span><span style="display:flex;"><span>_confluent-ksql-confluent_rmoff_01query_CSAS_JDBC_POSTGRES_TRANSACTIONS_GBP_2
</span></span><span style="display:flex;"><span>_confluent-ksql-confluent_rmoff_01query_CSAS_JDBC_POSTGRES_TRANSACTIONS_NO_CUSTOMERID_1
</span></span><span style="display:flex;"><span>connect-sink_postgres_foo_00
</span></span><span style="display:flex;"><span>connect-SINK_ES_04
</span></span><span style="display:flex;"><span>_confluent-ksql-confluent_rmoff_01transient_2925897355317205962_1571058964212
</span></span><span style="display:flex;"><span>_confluent-controlcenter-5-4-0-1
</span></span><span style="display:flex;"><span>connect-SINK_ES_03
</span></span><span style="display:flex;"><span>_confluent-controlcenter-5-4-0-1-command
</span></span><span style="display:flex;"><span>connect-SINK_ES_02
</span></span><span style="display:flex;"><span>connect-SINK_ES_01</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>There are various ones there, but weâ€™re interested in the one with a <code>connect-</code> prefix that matches our connector name, <code>connect-sink_postgres_foo_00</code></p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kafka-consumer-groups <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --bootstrap-server kafka:29092 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --describe <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --group connect-sink_postgres_foo_00
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Consumer group <span style="color:#ba2121">&#39;connect-sink_postgres_foo_00&#39;</span> has no active members.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GROUP                        TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             CONSUMER-ID     HOST            CLIENT-ID
</span></span><span style="display:flex;"><span>connect-sink_postgres_foo_00 foo             <span style="color:#666">0</span>          <span style="color:#666">1</span>               <span style="color:#666">3</span>               <span style="color:#666">2</span>               -               -               -</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>You can see from this that the current offset is 1, and there are two more messages to be read (one of which is the &#39;poison-pill&#39;).</p>
</div>
<div class="paragraph">
<p><code>kafkacat</code> is a fantastic tool for this kind of debugging, because we can directly relate offsets with the messages themselves:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kafkacat -b localhost:9092 -t foo -C -f <span style="color:#ba2121">&#39;Offset: %o\nPayload: %s\n--\n&#39;</span>
</span></span><span style="display:flex;"><span>Offset: <span style="color:#666">0</span>
</span></span><span style="display:flex;"><span>Payload: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;schema&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;struct&#34;</span>, <span style="color:#ba2121">&#34;fields&#34;</span>: <span style="color:#666">[{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int32&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c1&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;string&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c2&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;create_ts&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;update_ts&#34;</span> <span style="color:#666">}]</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;foobar&#34;</span> <span style="color:#666">}</span>, <span style="color:#ba2121">&#34;payload&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;c1&#34;</span>: 10000, <span style="color:#ba2121">&#34;c2&#34;</span>: <span style="color:#ba2121">&#34;bar&#34;</span>, <span style="color:#ba2121">&#34;create_ts&#34;</span>: 1501834166000, <span style="color:#ba2121">&#34;update_ts&#34;</span>: <span style="color:#666">1501834166000</span> <span style="color:#666">}</span> <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>--
</span></span><span style="display:flex;"><span>Offset: <span style="color:#666">1</span>
</span></span><span style="display:flex;"><span>Payload: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;schema&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;struct&#34;</span>, <span style="color:#ba2121">&#34;fields&#34;</span>: <span style="color:#666">[{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int32&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c1&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;create_ts&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;update_ts&#34;</span> <span style="color:#666">}]</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;foobar&#34;</span> <span style="color:#666">}</span>, <span style="color:#ba2121">&#34;payload&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;c1&#34;</span>: 10000,  <span style="color:#ba2121">&#34;create_ts&#34;</span>: 1501834166000, <span style="color:#ba2121">&#34;update_ts&#34;</span>: <span style="color:#666">1501834166000</span> <span style="color:#666">}</span> <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>--
</span></span><span style="display:flex;"><span>Offset: <span style="color:#666">2</span>
</span></span><span style="display:flex;"><span>Payload: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;schema&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;struct&#34;</span>, <span style="color:#ba2121">&#34;fields&#34;</span>: <span style="color:#666">[{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int32&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c1&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;string&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;c2&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;create_ts&#34;</span> <span style="color:#666">}</span>, <span style="color:#666">{</span> <span style="color:#ba2121">&#34;type&#34;</span>: <span style="color:#ba2121">&#34;int64&#34;</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;org.apache.kafka.connect.data.Timestamp&#34;</span>, <span style="color:#ba2121">&#34;version&#34;</span>: 1, <span style="color:#ba2121">&#34;field&#34;</span>: <span style="color:#ba2121">&#34;update_ts&#34;</span> <span style="color:#666">}]</span>, <span style="color:#ba2121">&#34;optional&#34;</span>: false, <span style="color:#ba2121">&#34;name&#34;</span>: <span style="color:#ba2121">&#34;foobar&#34;</span> <span style="color:#666">}</span>, <span style="color:#ba2121">&#34;payload&#34;</span>: <span style="color:#666">{</span> <span style="color:#ba2121">&#34;c1&#34;</span>: 10001, <span style="color:#ba2121">&#34;c2&#34;</span>: <span style="color:#ba2121">&#34;bar2&#34;</span>, <span style="color:#ba2121">&#34;create_ts&#34;</span>: 1501834166000, <span style="color:#ba2121">&#34;update_ts&#34;</span>: <span style="color:#666">1501834166000</span> <span style="color:#666">}</span> <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>--
</span></span><span style="display:flex;"><span>% Reached end of topic foo <span style="color:#666">[</span>0<span style="color:#666">]</span> at offset <span style="color:#666">3</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>So at offset 0 is the good message which Connect read, thus the current offset is 1. When the connector restarts from its failure it will be at offset 1, which is the &#39;bad&#39; message. The end of the topic currently is offset 3, i.e. the position after the third message which is at offset 2 (zero-based offsets).</p>
</div>
<div class="paragraph">
<p>What we want to do is tell Kafka Connect to resume from the next-good message, which we can see from <code>kafkacat</code> above is at offset 2.</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kafka-consumer-groups <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --bootstrap-server kafka:29092 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --group connect-sink_postgres_foo_00 <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --reset-offsets <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --topic foo <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --to-offset <span style="color:#666">2</span> <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>    --execute</span></span></code></pre></div>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>GROUP                          TOPIC                          PARTITION  NEW-OFFSET
</span></span><span style="display:flex;"><span>connect-sink_postgres_foo_00   foo                            <span style="color:#666">0</span>          <span style="color:#666">2</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>Now we can restart the failed task:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>curl -X POST http://localhost:8083/connectors/sink_postgres_foo_00/tasks/0/restart</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>and this time the connector stays running:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s <span style="color:#ba2121">&#34;http://localhost:8083/connectors?expand=info&amp;expand=status&#34;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             jq <span style="color:#ba2121">&#39;. | to_entries[] | [ .value.info.type, .key, .value.status.connector.state,.value.status.tasks[].state,.value.info.config.&#34;connector.class&#34;]|join(&#34;:|:&#34;)&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span></span></span><span style="display:flex;"><span><span style="color:#b62;font-weight:bold"></span>             column -s : -t| sed <span style="color:#ba2121">&#39;s/\&#34;//g&#39;</span>| sort
</span></span><span style="display:flex;"><span>sink  |  sink_postgres_foo_00  |  RUNNING  |  RUNNING  |  io.confluent.connect.jdbc.JdbcSinkConnector</span></span></code></pre></div>
</div>
<div class="paragraph">
<p>and in Postgres we get the new rows of data (except for the bad one, which is lost to us):</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>postgres<span style="color:#666">=#</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">from</span><span style="color:#bbb"> </span><span style="color:#ba2121">&#34;foo&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>update_ts<span style="color:#bbb">      </span><span style="color:#666">|</span><span style="color:#bbb">      </span>create_ts<span style="color:#bbb">      </span><span style="color:#666">|</span><span style="color:#bbb">  </span>c1<span style="color:#bbb">   </span><span style="color:#666">|</span><span style="color:#bbb">  </span>c2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#408080;font-style:italic">---------------------+---------------------+-------+------
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">10000</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>bar<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">2017</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">04</span><span style="color:#bbb"> </span><span style="color:#666">08</span>:<span style="color:#666">09</span>:<span style="color:#666">26</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span><span style="color:#666">10001</span><span style="color:#bbb"> </span><span style="color:#666">|</span><span style="color:#bbb"> </span>bar2<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>(<span style="color:#666">2</span><span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">rows</span>)</span></span></code></pre></div>
</div>
</div>
</div>
	<hr>
	<div class="giscus-container">
		<script src="https://giscus.app/client.js"
				data-repo="rmoff/rmoff-blog"
				data-repo-id="MDEwOlJlcG9zaXRvcnkxNTE3NDg2MTE="
				data-category="Announcements"
				data-category-id="DIC_kwDOCQuAA84CvP5T"
				data-mapping="pathname"
				data-strict="1"
				data-reactions-enabled="1"
				data-emit-metadata="0"
				data-input-position="bottom"
				data-theme="light"
				data-lang="en"
				crossorigin="anonymous"
				async>
		</script>
	</div>
</article>
      </main>
    
      
      <div class="docs-toc">
        <ul class="nav toc-top">
          <li><a href="#" id="back_to_top" class="docs-toc-title">On this page</a></li>
        </ul>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#_try_it_out">Try it out!</a></li>
    <li><a href="#_here_comes_the_problem">Here comes the problem</a></li>
    <li><a href="#_what_to_do">What to do?</a></li>
    <li><a href="#_manually_skipping_bad_messages">Manually skipping bad messages</a></li>
  </ul>
</nav>
      </div>
      
    
    </div>
  </div>
</div>


		</main>

		

		
		<footer class="site-footer hide-print" role="contentinfo">
			<span>&copy; 2026 </span>
		</footer>
		

		
	</body>
</html>
